<!DOCTYPE HTML>
<html>

<!-- HEADER -->
<head>

<meta charset="UTF-8">

<title>SPOOK TOWER</title>

<script type="bitsyGameData" id="exportedGameData">
In the distance, you can barely make out the looming, dark shape of a tower...

# BITSY VERSION 5.3

! ROOM_FORMAT 1

DEFAULT_FONT blacksphinx.v2

PAL 0
NAME Defaultish
0,82,204
128,159,255
255,255,255
40,105,255
178,196,250

PAL 1
NAME lil spook
0,0,0
57,94,63
212,206,174
14,36,60
245,102,152

PAL 2
NAME purp af
33,11,73
125,75,215
11,255,201
69,27,107
196,10,192

PAL 3
NAME bloody hell
68,0,3
144,46,36
255,151,63
114,20,44
208,14,0

PAL 4
NAME Drabbish
35,35,35
85,105,101
146,188,124
61,62,64
119,79,62

PAL 5
NAME Ecto Cooler
19,54,16
40,110,46
210,255,118
20,81,71
47,205,51

PAL 6
NAME Hallmark Card
48,35,23
139,74,165
0,255,17
56,62,19
215,107,0

PAL 7
NAME Ruby Sapphire
21,21,85
26,99,164
255,45,84
20,41,160
4,201,221

PAL 8
NAME Topaz
56,45,0
141,106,32
255,255,255
110,64,36
255,193,31

PAL 9
NAME Hildebrant
0,0,106
183,15,67
238,209,0
55,35,187
255,91,88

PAL 10
NAME Negative Zone
125,182,232
33,121,182
0,0,0
119,120,235
0,81,128

PAL 11
NAME Supercrisp
0,0,0
200,200,200
108,255,0
125,125,125
255,255,255

PAL 12
NAME Thrill-Killer
31,3,29
38,46,57
243,23,0
49,29,41
86,30,129

PAL ccc
NAME squiddark
0,0,0
153,153,153
106,191,106
66,66,66
222,222,222

PAL a0112
NAME ripple_pal
56,45,0
141,106,32
255,255,255
110,64,36
255,193,31
0,0,0
204,204,204

PAL a0113
NAME ripple_pal2
0,0,0
209,29,37
0,0,0
212,206,94
141,106,32

ROOM 0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,a,a,0,0,0,a,0,0,a,a,0,0,a,a,a
0,a,0,a,0,a,0,a,0,a,0,a,0,0,a,0
0,a,0,a,0,a,0,a,0,a,0,a,0,0,a,0
0,a,a,0,0,0,a,0,0,a,0,a,0,0,a,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,a,a,0,0,a,a,0,a,0,0,a,a,0,0,0
0,a,0,a,0,a,a,0,a,0,0,a,a,0,0,0
0,a,0,a,0,a,0,0,a,0,0,a,0,0,0,0
0,a,a,0,0,a,a,0,a,a,0,a,a,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,a,a,a,0,a,a,0,0,0,0,0,0,0,0,0
0,0,a,0,0,a,a,0,0,0,0,0,0,0,0,0
0,0,a,0,0,a,0,0,0,0,0,0,0,0,0,0
0,0,a,0,0,a,a,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
PAL 0

ROOM 1
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,7c,7d,7e,7f,7g,7h,7i,7j,7k,0,0,0
0,0,0,0,7l,7m,0,0,0,0,0,0,0,0,0,0
0,0,0,7n,7o,7p,7q,7r,7s,7t,7u,7v,7w,0,0,0
0,0,7x,7y,7z,80,81,82,83,84,85,86,0,0,0,0
0,87,88,89,8a,8b,8c,8d,8e,8f,8g,8h,8i,8j,0,0
0,8k,0,0,0,8l,8m,8n,8o,8p,8q,8r,8s,8t,0,0
0,0,0,0,0,8u,8v,8w,8x,8y,8z,90,91,92,0,0
0,0,9m,0,0,93,0,0,0,0,0,0,0,94,0,0
0,0,48,0,9l,95,96,97,98,99,9a,0,0,0,0,0
0,0,48,0,0,9b,9c,9d,9e,9f,9g,9k,0,0,0,0
0,0,48,0,0,9h,0,9i,9j,0,0,0,0,9p,9n,9n
9p,9n,48,9o,0,0,0,0,0,0,0,0,0,0,0,9p
4g,9p,48,9n,9q,9n,9o,4g,4g,4g,4g,4g,4g,4g,4g,4g
9q,9n,9r,9n,9n,9n,9n,9n,9n,9n,9o,0,0,0,0,0
3g,3h,3g,3h,3g,3h,3g,3g,3g,3h,3h,3g,3g,3h,3h,3g
NAME splash screen
ITM d011a 1,1
ITM d011a 1,3
ITM d011a 2,0
ITM d011a 14,3
ITM d011a 13,4
ITM d011a 14,1
ITM d011a 15,8
ITM d011a 12,9
ITM d011a 14,6
ITM d011a 4,6
ITM d011a 0,7
ITM d011a 0,4
ITM d011a 7,12
ITM d011a 11,12
ITM d011a 11,13
ITM d011a 14,13
ITM d011a 4,11
ITM d011a 0,10
ITM d011b 12,14
ITM d011b 15,14
ITM d011b 6,2
ITM d011b 10,2
ITM d011a 9,0
ITM d011a 13,0
ITM d011a 15,0
ITM e 7,2
ITM e 11,2
ITM e 13,14
ITM d 9,14
ITM d011a 2,10
ITM d011a 1,12
ITM d011b 3,14
ITM e 4,14
ITM d011a 15,11
ITM f011o 10,14
ITM 18 1,13
ITM 18 3,13
ITM 18 4,13
ITM 18 5,13
ITM 18 6,13
EXT 0,14 f019 0,14
PAL 12

ROOM 2
1,2,1m,35,42,1b,41,35,32,0,1i,f,7,8,9,b
3,4,35,1a,3x,42,0,43,40,0,1v,o,g,h,i,j
5,6,3z,1l,3y,40,2n,2o,2p,2q,2a,e,p,q,r,s
c,d,k,3z,40,0,56,33,34,55,2m,n,3f,3g,3h,3i
1u,29,1t,35,30,32,1n,3e,0,15,16,17,3m,3n,3o,3p
5g,51,5h,3b,3c,3d,20,2x,0,2r,1c,21,3t,3u,3v,3w
2f,2g,2l,43,3k,40,2e,39,0,36,1o,12,13,25,22,26
24,2u,27,0,0,0,0,0,1x,1y,1z,1d,1e,4i,2w,4h
37,38,3a,0,0,0,0,0,2b,2c,2d,1q,1r,2i,4k,2j
2h,2v,2k,59,5a,l,m,10,44,45,4l,4m,4n,5e,5f,0
1p,2t,1s,58,14,46,47,48,49,4a,28,22,23,5c,5d,0
0,0,0,1f,57,4b,4e,4f,4c,4d,4q,4o,4p,1h,1g,0
0,0,0,0,53,52,4w,54,4y,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
NAME Asset Display
ITM x 15,10
ITM y 15,11
ITM z 15,9
ITM r 15,13
ITM s 15,14
ITM t 15,15
ITM u 14,13
ITM v 14,14
ITM w 14,15
ITM o 13,13
ITM p 13,14
ITM q 13,15
ITM l 12,13
ITM m 12,14
ITM n 12,15
ITM i 11,13
ITM j 11,14
ITM k 11,15
ITM f 10,13
ITM g 10,14
ITM h 10,15
ITM e 9,15
ITM 9 9,14
ITM c 8,15
ITM b 8,14
ITM a 8,13
ITM 8 7,14
ITM d 7,15
ITM 2 6,14
ITM 3 5,13
ITM 4 5,14
ITM 5 5,15
ITM 7 6,15
ITM 6 4,15
ITM 1 4,14
ITM 15 2,12
ITM 12 2,11
ITM 11 1,11
ITM 13 0,11
ITM 14 0,12
ITM 10 1,12
ITM 16 5,3
ITM 17 9,12
PAL 1

ROOM 3
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,0,0,0,0,0,0,0,0,0,0,0,0,55,0,24
27,16,16,16,16,16,16,16,16,16,21,16,16,16,16,24
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,21,4g,4g,4g,4g,24
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,21,4g,4g,4g,4g,24
27,0,0,0,0,0,0,0,0,0,21,0,0,0,0,24
27,16,16,16,21,16,16,16,16,16,16,16,16,16,16,24
27,4g,4g,4g,21,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,4g,4g,4g,21,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,0,0,0,21,0,0,0,0,0,0,0,0,0,0,24
27,16,16,16,16,16,16,16,16,16,16,16,21,16,16,24
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,21,4g,4g,24
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,21,4g,4g,24
27,0,0,0,56,0,0,0,0,0,0,0,21,0,0,24
2k,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2h
NAME Sample Floor
PAL 0

ROOM 4
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
NAME Sprite For Party
PAL 0

ROOM f016
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38
27,55,0,0,0,0,0,0,0,0,35,1a,41,41,41,41
27,2t,2u,2u,2u,2t,2t,2u,2t,2u,2t,2t,2u,2t,2u,2t
2y,f015k,f015j,f015m,f015j,i,f015j,f015k,f015l,i,f015m,f015m,f015j,f015m,f015m,i
27,f015j,i,i,f015n,i,i,i,f015j,i,f015j,f015m,f015n,f015l,f015k,f015l
27,i,f015m,f015j,f015o,f015k,f015l,i,i,i,f015n,i,f015j,i,i,i
2y,f015j,f015m,i,i,i,f015n,i,f015j,i,f015o,i,i,f015m,f015k,f015l
27,f015k,f015l,f015k,f015m,i,f015j,f015m,f015l,f015k,f015o,f015k,f015j,f015m,f015n,i
2y,i,i,f015n,f015m,i,f015m,f015m,i,f015m,i,f015m,i,i,f015o,f015l
27,f015k,f015l,f015o,f015l,f015j,i,f015j,i,i,f015j,i,f015j,i,i,i
27,f015j,i,f015m,f015m,i,i,f015o,f015k,f015l,f015o,i,f015n,f015l,f015j,i
2y,i,i,f015j,i,f015j,i,i,i,i,f015m,f015m,f015n,i,i,f015m
27,f015j,f015k,f015o,i,f015o,f015k,f015l,f015k,f015l,f015j,f015m,f015o,f015l,f015j,i
27,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38
27,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0
2k,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g
NAME catacomb1
ITM f011h 1,7
ITM f011h 9,7
ITM f011h 8,12
ITM f011h 14,6
ITM f011i 2,9
ITM f011i 13,12
ITM f011i 8,3
ITM f011d 7,12
ITM f011a 7,3
ITM f011c 9,10
ITM f011h 14,4
ITM f011f 12,14
EXT 15,14 f017 1,14
EXT 15,1 f017 1,1
EXT 15,4 f017 1,4
EXT 15,6 f017 1,6
EXT 15,8 f017 1,8
EXT 4,3 f017 9,10
EXT 12,7 f017 10,6
EXT 3,5 f017 8,4
EXT 6,7 f017 5,12
EXT 10,9 f017 3,12
EXT 7,9 f017 12,3
EXT 2,3 f017 1,12
EXT 6,3 f017 5,3
EXT 8,4 f016 12,3
EXT 12,3 f016 8,4
EXT 3,11 f016 14,10
EXT 1,12 f017 12,7
EXT 1,10 f017 12,11
EXT 14,12 f017 4,7
EXT 14,10 f016 3,11
EXT 10,12 f017 10,3
EXT 8,6 f017 7,9
EXT 5,9 f017 2,6
EXT 1,6 f017 7,6
EXT 5,11 f017 2,8
EXT 1,4 f016 12,5
EXT 12,5 f016 1,4
EXT 10,4 f016 12,9
EXT 12,9 f016 10,4
PAL 11

ROOM f017
38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
41,3x,42,0,0,0,0,0,0,0,0,0,0,0,0,24
2t,2u,2u,2t,2u,2t,2u,2u,2u,2t,2u,2u,2t,2u,21,24
i,f015m,i,i,i,f015j,i,f015m,i,i,f015j,i,f015j,i,21,24
f015l,f015k,f015l,f015j,i,f015n,i,f015k,f015j,i,f015o,f015k,f015o,i,21,24
i,i,f015m,f015m,i,f015o,f015k,f015n,f015m,f015m,i,i,f015n,f015m,21,24
f015l,f015k,f015j,i,i,f015m,i,f015j,f015m,f015k,f015j,i,f015o,i,21,24
i,f015m,i,i,f015j,i,f015m,i,i,f015n,i,i,f015j,i,21,24
f015l,f015k,f015j,f015m,f015o,f015k,f015l,f015k,i,f015o,i,f015m,i,o,21,24
i,i,i,f015m,i,f015m,f015m,f015j,i,f015o,f015k,f015l,f015k,f015l,21,24
i,f015k,f015l,f015k,f015l,f015k,f015m,f015m,i,f015j,i,f015m,i,f,21,24
f015m,f015n,i,f015n,i,f015n,i,f015j,i,f015m,f015m,i,f015j,i,21,24
i,f015j,i,f015j,f015m,f015j,i,f015o,f015l,f015k,f015l,f015k,f015o,i,21,24
38,38,38,38,38,38,38,38,38,38,38,38,38,38,21,24
0,0,0,0,3z,1l,41,41,41,3y,40,0,0,0,21,24
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2h
NAME catacomb2
ITM f011i 2,4
ITM f011i 4,10
ITM f011i 10,12
ITM f011i 13,9
ITM f011h 11,4
ITM f011h 6,5
ITM f011b 6,8
ITM f011e 8,12
ITM f011h 1,10
ITM f011h 10,9
EXT 0,1 f016 14,1
EXT 0,4 f016 14,4
EXT 0,6 f016 14,6
EXT 0,8 f016 14,8
EXT 9,10 f016 4,3
EXT 10,6 f016 12,7
EXT 8,4 f016 3,5
EXT 5,12 f016 6,7
EXT 3,12 f016 10,9
EXT 12,3 f016 7,9
EXT 1,12 f016 2,3
EXT 5,3 f016 6,3
EXT 12,7 f016 1,12
EXT 0,14 f016 14,14
EXT 12,11 f016 1,10
EXT 4,7 f016 14,12
EXT 10,3 f016 10,12
EXT 7,9 f016 8,6
EXT 2,6 f016 5,9
EXT 3,4 f017 7,11
EXT 7,11 f017 3,4
EXT 7,6 f016 1,6
EXT 2,8 f016 5,11
PAL 11

ROOM f018
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38
27,55,0,0,0,0,0,0,0,0,35,1a,41,41,41,41
27,2t,2u,2u,2u,2t,2t,2u,2t,2u,2t,2t,2u,2t,2u,2t
2y,f015k,f015j,i,f015j,i,f015j,f015k,f015l,i,f015m,f015m,f015j,i,f015m,i
27,f015j,i,i,f015n,i,i,i,f015j,i,f015j,f015m,f015n,f015l,f015k,f015l
27,i,f015m,f015j,f015o,f015k,f015l,i,i,i,f015n,i,f015j,i,i,i
2y,f015j,f015m,i,i,i,f015n,i,f015j,i,f015o,i,i,i,f015k,f015l
27,f015k,f015l,f015k,f015j,i,f015j,f015m,f015l,f015k,f015o,f015k,f015j,i,f015n,i
2y,i,i,f015n,i,i,f015m,f015m,i,f015m,i,f015m,i,i,f015o,f015l
27,f015k,f015l,f015o,f015l,f015j,i,f015j,i,i,f015j,i,f015j,i,i,i
27,f015j,i,f015m,f015m,i,i,f015o,f015k,f015l,f015o,i,f015n,f015l,f015j,i
2y,i,i,f015j,i,f015j,i,i,i,i,f015m,f015m,f015n,i,i,f015m
27,f015j,f015k,f015o,i,f015o,f015k,f015l,f015k,f015l,f015j,f015m,f015o,f015l,f015j,i
27,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38
27,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0
2k,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g
NAME catacombleave
ITM f011j 7,1
ITM f011k 6,1
ITM f011g 12,14
ITM f011h 8,12
ITM f011h 9,7
ITM f011h 14,4
ITM f011h 14,6
ITM f011h 1,7
ITM f011i 13,12
ITM f011i 8,3
ITM f011i 2,9
ITM f011n 1,1
PAL 11

ROOM b010
3g,3g,3g,3g,3g,3g,3g,3g,3g,3g,3g,3g,3g,3g,3g,3g
3o,3o,3o,3o,3o,3o,3o,3o,3o,3o,3o,3o,3o,3o,3o,3o
3v,3v,3v,3v,3v,3v,3v,3v,3o,3o,3v,3v,3v,3v,3v,3v
0,0,0,0,0,0,0,0,3t,3p,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,3t,0,0,0,0,0,0
0,0,0,0,b015j,0,0,0,0,0,0,0,0,0,0,0
56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
16,16,16,16,16,16,17,0,0,0,0,0,0,0,0,0
3,4,4,4,4,4,6,0,5,4,4,4,6,0,0,0
4,4,4,4,4,4,2,0,0,1,4,4,4,6,0,0
4,4,4,4,4,4,6,0,0,0,1,4,4,2,0,b015j
4,4,4,4,4,4,6,0,0,1,4,4,6,0,55,0
4,4,4,b015j,4,4,2,0,15,16,16,16,16,16,16,16
4,4,4,4,4,3,6,0,5,4,4,4,4,4,4,4
16,1c,16,16,16,17,6,0,1,4,4,4,4,4,4,4
3,1c,4,4,4,3,2,0,5,4,4,4,4,4,4,4
NAME spookhop
ITM 10 15,10
ITM 10 3,12
ITM 10 4,5
ITM 18 0,12
ITM 18 2,12
ITM 18 1,12
ITM 18 4,12
ITM 18 5,12
ITM 18 6,12
ITM b011a 7,6
ITM b011b 7,11
ITM 18 0,5
ITM 18 3,5
ITM 18 2,5
ITM 18 1,5
ITM 18 5,5
ITM 18 6,5
ITM 18 7,5
ITM 18 9,10
ITM 18 10,10
ITM 18 11,10
ITM 18 12,10
ITM 18 13,10
ITM 18 14,10
ITM 18 8,10
ITM f011n 14,11
EXT 7,6 b010 8,11
EXT 7,11 b010 5,13
END b010 6,13
PAL 6

ROOM a033
3f,3v,3u,3u,3v,3v,3u,3v,3v,3u,3v,3v,3v,3v,3u,3i
3p,2p,2q,35,2q,5g,5h,4m,4m,5g,5h,2n,32,2n,2o,3m
3p,34,35,34,0,0,0,1,2,0,0,0,33,32,33,3m
3p,35,34,0,0,0,1,4,4,2,0,0,0,33,32,3m
3p,34,a035j,4g,k,d,6,5,6,5,d,k,0,a035j,33,3m
3p,13,2a,0,0,0,0,3e,3e,0,0,0,0,2a,12,3m
3p,17,2a,4g,0,0,3j,1s,1p,3l,0,0,0,2a,15,3m
3p,a035m,2a,0,4g,29,3q,27,24,3s,29,0,0,1v,a035l,3m
3p,4l,a035k,2r,4g,39,12,27,24,13,39,4g,a035s,a035k,4n,3m
3p,11,1v,36,0,a035n,1t,a035p,a035q,1u,a035o,0,a035r,2a,z,3m
3p,2q,a035k,4m,4m,4m,4m,a035k,a035k,4m,4m,2r,4m,a035k,2n,3m
3p,11,2a,0,0,0,3b,3c,3c,3d,0,36,0,1v,z,3m
3p,2q,a035k,2r,4m,4m,2n,2p,2o,2q,4m,a035s,4m,a035k,2n,3m
3p,11,2a,36,4g,4g,35,1a,3x,42,4g,4g,4g,2a,z,3m
3p,56,2a,36,0,35,1a,41,41,3x,42,0,0,2a,0,3m
h,i,h,i,j,1a,41,41,41,41,3x,g,h,i,h,i
NAME entrance room
ITM 11 2,3
ITM 11 13,3
ITM a03z 3,1
ITM q 7,1
ITM p 7,0
ITM p 12,0
ITM q 12,2
ITM a031b 14,7
ITM a031c 4,12
ITM a031c 5,12
ITM a031c 6,12
ITM a031c 9,12
ITM a031c 10,12
ITM a031c 12,12
ITM a031c 13,12
ITM a031c 14,12
ITM a031c 2,12
ITM a031c 1,12
ITM a031c 12,10
ITM a031c 13,10
ITM a031c 14,10
ITM a031c 10,10
ITM a031c 9,10
ITM a031c 8,10
ITM a031c 7,10
ITM a031c 6,10
ITM a031c 5,10
ITM a031c 4,10
ITM a031c 2,10
ITM a031c 1,10
ITM a031c 14,8
ITM a031c 1,8
ITM 18 6,13
ITM 18 7,13
ITM 18 8,13
ITM 18 9,13
ITM 18 1,13
ITM 18 2,13
ITM 18 13,13
ITM 18 14,13
ITM 18 5,8
ITM 18 10,8
ITM a031c 2,8
ITM a031c 13,8
ITM a031e 14,5
ITM a03z 12,1
ITM o 12,1
ITM a031d 7,12
ITM a031d 8,12
ITM 18 6,8
ITM 18 9,8
ITM 18 2,6
ITM 11 10,6
ITM a031c 3,10
ITM a031n 14,14
END a030 5,14
END a030 10,14
END a031 12,8
END a032 7,12
END a032 8,12
END a033 11,12
PAL 8

ROOM a035
3f,3v,3u,3u,3v,3v,3u,3v,3v,3u,3v,3v,3v,3v,3u,3i
3p,2p,2q,35,2q,5g,5h,4m,4m,5g,5h,2n,32,2n,2o,3m
3p,34,35,34,0,0,0,1,2,0,0,0,33,32,33,3m
3p,35,34,0,0,0,1,4,4,2,0,0,0,33,32,3m
3p,34,a035j,4g,k,d,6,5,6,5,d,k,0,a035j,33,3m
3p,13,2a,0,0,0,0,3e,3e,0,0,0,0,2a,12,3m
3p,17,2a,4g,0,0,3j,1s,1p,3l,0,0,0,2a,15,3m
3p,a035m,2a,0,4g,29,3q,27,24,3s,29,0,0,1v,a035l,3m
3p,4l,a035k,2r,4g,39,12,27,24,13,39,4g,a035s,a035k,4n,3m
3p,11,1v,36,0,a035n,1t,a035p,a035q,1u,a035o,0,a035r,2a,z,3m
3p,2q,a035k,4m,4m,4m,4m,a035k,a035k,4m,4m,2r,4m,a035k,2n,3m
3p,11,2a,0,0,0,3b,3c,3c,3d,0,36,0,1v,z,3m
3p,2q,a035k,2r,4m,4m,2n,2p,2o,2q,4m,a035s,4m,a035k,2n,3m
3p,11,2a,36,4g,4g,35,1a,3x,42,4g,4g,4g,2a,z,3m
3p,56,2a,36,0,35,1a,41,41,3x,42,0,0,2a,0,3m
h,i,h,i,j,1a,41,41,41,41,3x,g,h,i,h,i
NAME anim1
ITM 11 2,3
ITM 11 13,3
ITM a03z 3,1
ITM q 7,1
ITM p 7,0
ITM p 12,0
ITM q 12,2
ITM a031b 14,7
ITM a031c 4,12
ITM a031c 5,12
ITM a031c 6,12
ITM a031c 7,12
ITM a031c 8,12
ITM a031c 9,12
ITM a031c 10,12
ITM a031c 12,12
ITM a031c 13,12
ITM a031c 14,12
ITM a031c 2,12
ITM a031c 1,12
ITM a031c 12,10
ITM a031c 13,10
ITM a031c 14,10
ITM a031c 10,10
ITM a031c 9,10
ITM a031c 8,10
ITM a031c 7,10
ITM a031c 6,10
ITM a031c 5,10
ITM a031c 3,10
ITM a031c 2,10
ITM a031c 1,10
ITM a031c 14,8
ITM a031c 1,8
ITM 18 6,13
ITM 18 7,13
ITM 18 8,13
ITM 18 9,13
ITM 18 1,13
ITM 18 2,13
ITM 18 13,13
ITM 18 14,13
ITM 18 5,8
ITM 18 10,8
ITM a031c 2,8
ITM a031c 13,8
ITM a031e 14,5
ITM a031f 1,5
ITM a03z 12,1
ITM o 12,1
ITM 18 2,6
ITM a031g 1,7
ITM 11 10,6
ITM 11 5,6
ITM a031c 4,10
ITM a031m 3,11
ITM a031n 14,14
PAL 8

ROOM a036
3f,3v,3u,3u,3v,3v,3u,3v,3v,3u,3v,3v,3v,3v,3u,3i
3p,2p,2q,35,2q,5g,5h,4m,4m,5g,5h,2n,32,2n,2o,3m
3p,34,35,34,0,0,0,1,2,0,0,0,33,32,33,3m
3p,35,34,0,0,0,1,4,4,2,0,0,0,33,32,3m
3p,34,a035j,4g,k,d,6,5,6,5,d,k,0,a035j,33,3m
3p,13,2a,0,0,0,0,3e,3e,0,0,0,0,2a,12,3m
3p,17,2a,4g,0,0,3j,1s,1p,3l,0,0,0,2a,15,3m
3p,a035m,2a,0,4g,29,3q,27,24,3s,29,0,0,1v,a035l,3m
3p,4l,a035k,2r,4g,39,12,27,24,13,39,4g,a035s,a035k,4n,3m
3p,11,1v,36,0,a035n,1t,a035p,a035q,1u,a035o,0,a035r,2a,z,3m
3p,2q,a035k,4m,4m,4m,4m,a035k,a035k,4m,4m,2r,4m,a035k,2n,3m
3p,11,2a,0,0,0,3b,3c,3c,3d,0,36,0,1v,z,3m
3p,2q,a035k,2r,4m,4m,2n,2p,2o,2q,4m,a035s,4m,a035k,2n,3m
3p,11,2a,36,4g,4g,35,1a,3x,42,4g,4g,4g,2a,z,3m
3p,56,2a,36,0,35,1a,41,41,3x,42,0,0,2a,0,3m
h,i,h,i,j,1a,41,41,41,41,3x,g,h,i,h,i
NAME anim2
ITM 11 2,3
ITM 11 13,3
ITM a03z 3,1
ITM 11 5,6
ITM 11 10,6
ITM q 7,1
ITM p 7,0
ITM p 12,0
ITM q 12,2
ITM a031b 14,7
ITM a031c 4,12
ITM a031c 5,12
ITM a031c 6,12
ITM a031c 7,12
ITM a031c 8,12
ITM a031c 9,12
ITM a031c 10,12
ITM a031c 12,12
ITM a031c 13,12
ITM a031c 14,12
ITM a031c 2,12
ITM a031c 1,12
ITM a031c 12,10
ITM a031c 13,10
ITM a031c 14,10
ITM a031c 10,10
ITM a031c 9,10
ITM a031c 8,10
ITM a031c 7,10
ITM a031c 6,10
ITM a031c 5,10
ITM a031c 3,10
ITM a031c 2,10
ITM a031c 1,10
ITM a031c 14,8
ITM a031c 1,8
ITM 18 6,13
ITM 18 7,13
ITM 18 8,13
ITM 18 9,13
ITM 18 1,13
ITM 18 2,13
ITM 18 13,13
ITM 18 14,13
ITM 18 5,8
ITM 18 10,8
ITM a031c 2,8
ITM a031c 13,8
ITM a031e 14,5
ITM a031f 1,5
ITM a03z 12,1
ITM o 12,1
ITM a031e 6,8
ITM a031f 9,8
ITM 10 7,11
ITM 10 8,11
ITM 18 2,6
ITM a031g 1,7
ITM a031h 7,5
ITM a031i 8,5
ITM a031c 4,10
ITM a031m 4,14
ITM d 7,8
ITM e 8,8
ITM a031n 14,14
PAL 8

ROOM a037
3f,3v,3u,3u,3v,3v,3u,3v,3v,3u,3v,3v,3v,3v,3u,3i
3p,2p,2q,35,2q,5g,5h,4m,4m,5g,5h,2n,32,2n,2o,3m
3p,34,35,34,0,0,0,1,2,0,0,0,33,32,33,3m
3p,35,34,0,0,0,1,4,4,2,0,0,0,33,32,3m
3p,34,a035j,4g,k,d,6,5,6,5,d,k,0,a035j,33,3m
3p,13,2a,0,0,0,3e,0,0,3e,0,0,0,2a,12,3m
3p,17,2a,4g,0,3j,1s,38,38,1p,3l,0,0,2a,15,3m
3p,a035m,2a,0,4g,29,27,0,0,24,29,0,0,1v,a035l,3m
3p,4l,a035k,2r,4g,12,27,0,0,24,13,4g,a035s,a035k,4n,3m
3p,11,1v,36,0,a035n,a035p,21,21,a035q,a035o,0,a035r,2a,z,3m
3p,2q,a035k,4m,4m,22,4m,a035k,a035k,4m,22,2r,4m,a035k,2n,3m
3p,11,2a,0,0,0,3b,3c,3c,3d,0,36,0,1v,z,3m
3p,2q,a035k,2r,4m,22,2n,2p,2o,2q,22,a035s,4m,a035k,2n,3m
3p,11,2a,36,4g,4g,35,1a,3x,42,4g,4g,4g,2a,z,3m
3p,56,2a,36,0,35,1a,41,41,3x,42,0,0,2a,0,3m
h,i,h,i,j,1a,41,41,41,41,3x,g,h,i,h,i
NAME anim3
ITM 11 2,3
ITM 11 13,3
ITM a03z 3,1
ITM q 7,1
ITM p 7,0
ITM p 12,0
ITM q 12,2
ITM a031b 14,7
ITM a031c 4,12
ITM a031c 6,12
ITM a031c 7,12
ITM a031c 8,12
ITM a031c 9,12
ITM a031c 12,12
ITM a031c 13,12
ITM a031c 14,12
ITM a031c 2,12
ITM a031c 1,12
ITM a031c 12,10
ITM a031c 13,10
ITM a031c 14,10
ITM a031c 9,10
ITM a031c 8,10
ITM a031c 7,10
ITM a031c 3,10
ITM a031c 2,10
ITM a031c 1,10
ITM a031c 14,8
ITM a031c 1,8
ITM 18 6,13
ITM 18 7,13
ITM 18 8,13
ITM 18 9,13
ITM 18 1,13
ITM 18 2,13
ITM 18 13,13
ITM 18 14,13
ITM a031c 2,8
ITM a031c 13,8
ITM a031e 14,5
ITM a031f 1,5
ITM a03z 12,1
ITM o 12,1
ITM 10 7,11
ITM 10 8,11
ITM 18 2,6
ITM a031g 1,7
ITM a031e 5,8
ITM a031f 10,8
ITM a031h 6,5
ITM a031i 9,5
ITM a031j 7,5
ITM a031j 8,5
ITM a031k 7,7
ITM a031l 8,7
ITM b 5,9
ITM b 10,9
ITM c 5,10
ITM c 10,10
ITM c 10,11
ITM c 5,11
ITM 5 5,13
ITM 5 5,14
ITM 5 5,15
ITM 5 10,13
ITM 5 10,14
ITM 5 10,15
ITM d 4,11
ITM e 6,11
ITM e 11,11
ITM d 9,11
ITM 11 5,6
ITM 11 10,6
ITM a 5,8
ITM a 10,8
ITM a031c 6,10
ITM a031c 4,10
ITM a031m 6,15
ITM 5 5,12
ITM 5 10,12
ITM e 9,8
ITM d 6,8
ITM a031o 14,14
PAL 7

ROOM 
3f,3v,3u,3u,3v,3v,3u,3v,3v,3u,3v,3v,3v,3v,3u,3i
3p,2p,2q,35,2q,5g,5h,4m,4m,5g,5h,2n,32,2n,2o,3m
3p,34,35,34,0,0,0,1,2,0,0,0,33,32,33,3m
3p,35,34,0,0,0,1,4,4,2,0,0,0,33,32,3m
3p,34,a035j,4g,k,d,6,5,6,5,d,k,0,a035j,33,3m
3p,13,2a,0,0,0,3e,0,0,3e,0,0,0,2a,12,3m
3p,17,2a,4g,0,3j,1s,38,38,1p,3l,0,0,2a,15,3m
3p,a035m,2a,0,4g,29,27,a035v,a035w,24,29,0,0,1v,a035l,3m
3p,4l,a035k,2r,4g,a035x,27,a035t,a035u,24,a035y,4g,a035s,a035k,4n,3m
3p,11,1v,36,0,a035n,a035p,21,21,a035q,a035o,0,a035r,2a,z,3m
3p,2q,a035k,4m,4m,22,4m,a035k,a035k,4m,22,2r,4m,a035k,2n,3m
3p,11,2a,0,0,0,3b,3c,3c,3d,0,36,0,1v,z,3m
3p,2q,a035k,2r,4m,22,2n,2p,2o,2q,22,a035s,4m,a035k,2n,3m
3p,11,2a,36,4g,4g,35,1a,3x,42,4g,4g,4g,2a,z,3m
3p,56,2a,36,0,35,1a,41,41,3x,42,0,0,2a,0,3m
h,i,h,i,j,1a,41,41,41,41,3x,g,h,i,h,i
NAME exit room
ITM 11 2,3
ITM 11 13,3
ITM a03z 3,1
ITM q 7,1
ITM p 7,0
ITM p 12,0
ITM q 12,2
ITM a031b 14,7
ITM a031c 4,12
ITM a031c 6,12
ITM a031c 7,12
ITM a031c 8,12
ITM a031c 9,12
ITM a031c 12,12
ITM a031c 13,12
ITM a031c 14,12
ITM a031c 2,12
ITM a031c 1,12
ITM a031c 12,10
ITM a031c 13,10
ITM a031c 14,10
ITM a031c 9,10
ITM a031c 8,10
ITM a031c 7,10
ITM a031c 6,10
ITM a031c 3,10
ITM a031c 2,10
ITM a031c 1,10
ITM a031c 14,8
ITM a031c 1,8
ITM 18 6,13
ITM 18 7,13
ITM 18 8,13
ITM 18 9,13
ITM 18 1,13
ITM 18 2,13
ITM 18 13,13
ITM 18 14,13
ITM a031c 2,8
ITM a031c 13,8
ITM a03z 12,1
ITM o 12,1
ITM 18 2,6
ITM a031g 1,7
ITM b 5,9
ITM b 10,9
ITM c 10,10
ITM c 10,11
ITM c 5,11
ITM 5 5,13
ITM 5 5,14
ITM 5 5,15
ITM 5 10,13
ITM 5 10,14
ITM 5 10,15
ITM d 4,11
ITM e 6,11
ITM e 11,11
ITM d 9,11
ITM a031c 4,10
ITM 5 5,12
ITM 5 10,12
ITM c 5,10
ITM a 5,8
ITM a 10,8
ITM 10 7,11
ITM 10 8,11
ITM 11 10,6
ITM 11 5,6
ITM a031p 14,14
ITM f011n 7,8
ITM f011n 8,8
END a034 10,11
END a033 11,12
END a031 12,8
PAL 8

ROOM d025
3i,3p,3v,3p,3h,3i,0,0,5c,0,3p,3n,3o,3g,3o,3p
3t,3m,1,56,3v,3m,0,5c,0,3i,3t,3g,3p,3t,3t,3o
3m,1,21,3v,3m,3i,5c,0,0,3o,3p,3t,2k,1p,1s,1p
3f,21,3i,3f,3t,3i,0,0,5c,3f,3w,1,4,2,4,55
3v,21,3v,3n,3f,3h,0,5c,0,3w,4g,1o,0,3f,3i,3t
3i,21,3w,3m,3w,3i,5e,0,0,4g,4g,1o,1s,3i,3p,3t
3m,21,3f,3t,3t,3f,0,0,0,4g,4g,1o,1p,3t,3p,3f
3i,21,3i,3p,3g,3i,0,0,0,4g,4g,1o,1s,3i,3f,3p
3f,21,3m,5e,0,0,0,0,0,4g,1c,1o,3h,3f,3t,3i
3m,21,4g,0,0,0,0,0,0,4g,1c,1o,3p,3i,3m,3h
3p,21,4g,0,0,4g,0,0,0,4g,1o,1o,3m,3f,3p,3i
3i,21,4g,4g,4g,3e,4g,4g,4g,4g,1o,1o,3i,3m,3f,3p
3m,21,0,0,0,39,0,0,1,2,6,0,3f,3i,3h,3o
3w,3v,3i,3w,3m,3f,3v,3i,3p,8,8,3p,3t,3p,3p,3t
3m,3g,3f,3u,3v,3w,3i,3g,3v,h,h,3o,3f,3t,3p,3f
i,i,i,h,i,i,i,i,j,q,q,g,i,i,i,h
NAME batgut
ITM 5 10,7
ITM 5 10,9
ITM 5 10,11
ITM 5 10,12
ITM 5 10,10
ITM 5 10,8
ITM b 10,4
ITM c 10,5
ITM c 10,6
ITM b 9,5
ITM c 9,6
ITM c 9,7
ITM 5 9,8
ITM 5 9,9
ITM 5 9,10
ITM 5 9,11
ITM 5 9,12
ITM 6 8,12
ITM 8 11,4
ITM 9 12,4
ITM d 12,7
ITM 10 5,11
ITM d 9,0
ITM 4 9,13
ITM 4 10,13
ITM 5 9,14
ITM 5 10,14
ITM 5 9,15
ITM 5 10,15
ITM 7 6,12
ITM 2 4,8
ITM 1 5,8
ITM 2 3,8
ITM 1 2,9
ITM 6 7,12
ITM 6 4,12
ITM 7 3,12
ITM 6 2,12
ITM 7 11,12
ITM f011n 15,3
PAL 11

ROOM e025
2y,3,e025p,e025o,e025q,0,3,3,3,3,3,3,21,3,3,2s
2y,0,e025m,e025r,e025n,0,0,0,0,0,0,0,0,0,55,2s
2y,4g,e025j,e025k,e025l,0,4g,4g,4g,4g,4g,4g,4g,2f,2g,2s
2y,29,2,1,4,0,29,0,0,0,0,0,0,0,0,2s
2y,16,16,16,16,16,16,4q,21,23,2g,2g,2g,2g,2g,2s
2y,2b,2c,2c,2c,2d,0,4g,21,4g,0,0,0,0,33,2s
2y,36,2c,2c,36,2d,4g,4g,21,4g,4g,4g,4g,2b,2d,2s
2y,36,2c,2c,36,2d,0,0,21,0,0,29,0,2b,2d,2s
2y,2g,2r,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2s
2y,2b,36,2c,2d,0,5f,0,0,2b,2c,2c,2c,2d,33,2s
2y,2b,36,2c,2d,4g,4g,5f,4g,2b,2c,36,2c,2d,4g,2s
2y,2b,36,2c,2d,29,0,0,5f,2b,2c,36,2c,2d,0,2s
2y,2g,2g,2g,2g,2g,2g,28,23,2g,2g,2g,2g,2g,2r,2s
2y,e025s,4g,e025s,4g,2b,2c,2c,2c,2c,2c,2c,2c,2d,36,2s
2y,0,56,0,0,2b,2c,2c,2c,2c,2c,2c,2c,2d,36,2s
2y,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2s
NAME SquiddingtonStudy0
ITM g 5,1
ITM 18 2,13
ITM 18 4,13
ITM g 5,0
ITM 18 5,6
ITM 18 5,5
ITM 18 3,5
ITM 18 3,6
ITM 18 2,6
ITM 18 2,5
ITM 18 13,6
ITM 18 14,6
ITM 18 1,9
ITM 18 1,10
ITM 18 3,10
ITM 18 3,9
ITM 18 4,10
ITM 18 7,10
ITM 18 9,10
ITM 18 10,10
ITM 18 10,9
ITM 18 12,10
ITM 18 12,9
ITM 18 13,10
ITM 18 5,13
ITM 18 6,13
ITM 18 7,13
ITM 18 8,13
ITM 18 9,13
ITM 18 10,13
ITM 18 11,13
ITM 18 12,13
ITM 18 13,13
ITM 11 5,10
ITM 11 11,6
ITM 11 6,2
ITM 11 1,2
ITM 10 1,13
ITM 10 3,13
PAL 2

ROOM e026
2y,3,e025p,e025o,e025q,0,3,3,3,3,3,3,21,3,3,2s
2y,0,e025m,e025r,e025n,0,0,0,0,0,0,0,0,0,55,2s
2y,4g,e025j,e025k,e025l,0,4g,4g,4g,4g,4g,4g,4g,2f,2g,2s
2y,29,2,1,4,0,29,0,0,0,0,0,0,0,0,2s
2y,16,16,16,16,16,16,4q,21,23,2g,2g,2g,2g,2g,2s
2y,2b,2c,2c,2c,2d,0,4g,21,4g,0,0,0,0,33,2s
2y,36,2c,2c,36,2d,4g,4g,21,4g,4g,4g,4g,2b,2d,2s
2y,36,2c,2c,36,2d,0,0,21,0,0,29,0,2b,2d,2s
2y,2g,2r,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2s
2y,2b,36,2c,2d,0,5f,0,0,2b,2c,2c,2c,2d,33,2s
2y,2b,36,2c,2d,4g,4g,5f,4g,2b,2c,36,2c,2d,4g,2s
2y,2b,36,2c,2d,29,0,0,5f,2b,2c,36,2c,2d,0,2s
2y,2g,2g,2g,2g,2g,2g,28,23,2g,2g,2g,2g,2g,2r,2s
2y,e025s,4g,e025s,4g,2b,2c,2c,2c,2c,2c,2c,2c,2d,36,2s
2y,0,56,0,0,2b,2c,2c,2c,2c,2c,2c,2c,2d,36,2s
2y,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2s
NAME SquiddingtonStudy1
ITM g 5,0
ITM g 5,1
ITM e021e 14,7
ITM e021d 1,5
ITM e021c 4,5
ITM e021b 11,9
ITM 18 5,5
ITM 18 5,6
ITM 18 3,6
ITM 18 3,5
ITM 18 2,5
ITM 18 2,6
ITM 18 13,6
ITM 18 14,6
ITM 18 1,9
ITM 18 1,10
ITM 18 3,9
ITM 18 3,10
ITM 18 7,10
ITM 18 9,10
ITM 18 10,10
ITM 18 10,9
ITM 18 12,9
ITM 18 12,10
ITM 18 13,10
ITM 18 13,13
ITM 18 12,13
ITM 18 11,13
ITM 18 10,13
ITM 18 9,13
ITM 18 7,13
ITM 18 8,13
ITM 18 6,13
ITM 18 5,13
ITM 18 4,10
ITM 11 11,6
ITM 11 6,2
ITM 11 5,10
ITM 11 1,2
ITM 10 1,13
ITM 10 3,13
PAL 2

ROOM e027
2y,3,e025p,e025o,e025q,0,3,3,3,3,3,3,21,3,3,2s
2y,0,e025m,e025r,e025n,0,0,0,0,0,0,0,21,0,55,2s
2y,4g,e025j,e025k,e025l,4g,4g,4g,4g,4g,4g,4g,21,2f,2g,2s
2y,29,2,1,4,0,29,0,0,0,0,0,21,0,0,2s
2y,16,16,16,16,16,16,4q,21,23,2g,2g,2g,2g,2g,2s
2y,2b,2c,2c,2c,2d,0,4g,21,4g,0,0,0,0,33,2s
2y,36,2c,2c,36,2d,4g,4g,21,4g,4g,4g,4g,2b,2d,2s
2y,36,2c,2c,36,2d,0,0,21,0,0,29,0,2b,2d,2s
2y,2g,2r,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2s
2y,2b,36,2c,2d,0,5f,0,0,2b,2c,2c,2c,2d,33,2s
2y,2b,36,2c,2d,4g,4g,5f,4g,2b,2c,36,2c,2d,4g,2s
2y,2b,36,2c,2d,29,0,0,5f,2b,2c,36,2c,2d,0,2s
2y,2g,2g,2g,2g,2g,2g,28,23,2g,2g,2g,2g,2g,2r,2s
2y,e025s,0,e025s,0,2b,2c,2c,2c,2c,2c,2c,2c,2d,36,2s
2y,0,56,0,0,2b,2c,2c,2c,2c,2c,2c,2c,2d,36,2s
2y,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2s
NAME SquiddingtonStudy2
ITM g 5,1
ITM g 5,0
ITM e021g 13,1
ITM 18 13,6
ITM 18 14,6
ITM 18 5,6
ITM 18 5,5
ITM 18 3,5
ITM 18 3,6
ITM 18 2,6
ITM 18 2,5
ITM 18 1,10
ITM 18 1,9
ITM 18 3,9
ITM 18 3,10
ITM 18 4,10
ITM 18 7,10
ITM 18 9,10
ITM 18 10,10
ITM 18 10,9
ITM 18 12,9
ITM 18 12,10
ITM 18 13,10
ITM 18 13,13
ITM 18 12,13
ITM 18 11,13
ITM 18 10,13
ITM 18 9,13
ITM 18 8,13
ITM 18 7,13
ITM 18 6,13
ITM 18 5,13
ITM 18 4,13
ITM 18 2,13
ITM 11 5,10
ITM 11 6,2
ITM 11 1,2
ITM 11 11,6
ITM 10 1,13
ITM 10 3,13
ITM 18 11,1
ITM 18 11,0
ITM 18 12,0
ITM 18 13,0
ITM 18 14,0
ITM f011n 14,1
PAL 2

ROOM e017
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,0,0,1i,0,0,0,0,0,0,0,0,0,0,55,24
e015l,e015j,e015k,2a,e015m,e015j,e015j,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,33,32,2a,30,35,34,0,0,0,4g,21,4g,0,0,24
27,0,33,10,10,34,0,0,4g,4g,4g,21,4g,4g,4g,24
27,0,z,10,10,11,0,0,0,0,0,21,0,0,56,24
27,0,0,0,0,0,e015m,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,0,0,0,0,0,4g,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,0,0,0,0,0,0,0,0,0,21,0,0,0,24
27,0,0,0,0,0,0,e015q,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,0,0,0,0,0,0,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,4g,4g,4g,21,4g,4g,4g,24
27,4f,4f,4f,4f,4f,4f,e015p,0,4y,0,21,0,0,0,24
2k,2g,2g,2g,2g,2g,2g,e015r,2g,2g,2g,2g,2g,2g,2g,2h
NAME slime-1
ITM c 3,8
ITM c 3,9
ITM c 4,9
ITM c 4,8
ITM b 3,7
ITM b 4,7
ITM c 3,10
ITM c 4,10
ITM c 4,11
ITM c 3,11
ITM 10 4,4
ITM e 5,11
ITM d 2,11
ITM e0117 9,14
ITM 1a 13,6
ITM 1d 7,6
ITM 1e 13,14
ITM 1f 3,2
ITM 1j 7,9
ITM f011n 14,2
EXT 11,4 e018 11,4
EXT 11,9 e018 11,9
END e010 6,9
PAL 5

ROOM e018
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,0,0,1i,0,0,0,0,0,0,0,0,0,0,55,24
e015l,e015j,e015k,2a,e015m,e015j,e015j,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,33,32,2a,30,35,34,0,0,0,4g,21,4g,0,0,24
27,0,33,10,10,34,0,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,z,10,10,11,0,0,0,0,0,21,0,0,56,24
27,0,0,0,0,0,e015m,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,0,0,0,0,0,4g,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,0,0,0,0,0,0,0,0,0,21,0,0,0,24
27,0,0,0,0,0,0,e015q,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,4g,4g,4g,21,4g,4g,4g,24
27,4f,4f,4f,4f,4f,4f,e015p,0,4y,0,21,0,0,0,24
2k,2g,2g,2g,2g,2g,2g,e015r,2g,2g,2g,2g,2g,2g,2g,2h
NAME slime-2
ITM b 3,7
ITM b 4,7
ITM c 3,8
ITM c 3,9
ITM c 4,8
ITM c 4,9
ITM c 3,10
ITM c 4,10
ITM d 2,10
ITM e 5,10
ITM 10 4,4
ITM e0117 9,14
ITM 1b 11,3
ITM 1b 11,5
ITM 1c 11,8
ITM 1c 11,10
ITM 1d 7,6
ITM 1e 13,14
ITM 1f 3,2
ITM 1g 12,2
ITM 1g 13,2
ITM 1c 9,2
ITM 1j 7,9
ITM f011n 14,2
END e010 6,9
PAL 5

ROOM e019
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,0,0,1i,0,0,0,0,0,0,0,0,0,0,55,24
e015l,e015j,e015k,2a,e015m,e015j,e015j,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,33,32,2a,30,35,34,0,0,0,4g,21,4g,0,0,24
27,0,33,10,10,34,0,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,z,10,10,11,0,0,0,0,0,21,0,0,56,24
27,0,0,0,0,0,e015m,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,0,0,0,0,0,4g,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,0,0,0,0,0,0,0,0,0,21,0,0,0,24
27,4f,4f,4f,4f,4f,4f,e015q,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,4g,4g,4g,21,4g,4g,4g,24
27,4f,4f,4f,4f,4f,4f,e015p,0,4y,0,21,0,0,0,24
2k,2g,2g,2g,2g,2g,2g,e015r,2g,2g,2g,2g,2g,2g,2g,2h
NAME slime-3
ITM b 3,7
ITM b 4,7
ITM c 3,8
ITM c 4,8
ITM c 3,9
ITM c 4,9
ITM d 2,9
ITM e 5,9
ITM 10 4,4
ITM e0117 9,14
ITM 1d 7,6
ITM 1e 13,14
ITM 1f 3,2
ITM 1g 12,2
ITM 1g 13,2
ITM 1c 10,2
ITM 1c 8,2
ITM 1c 11,8
ITM 1b 10,14
ITM 1j 7,9
ITM f011n 14,2
END e010 6,9
PAL 5

ROOM e01a
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,0,0,1i,0,0,0,0,0,0,0,0,0,0,55,24
e015l,e015j,e015k,2a,e015m,e015j,e015j,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,33,32,2a,30,35,34,0,0,4g,4g,21,4g,4g,4g,24
27,0,33,10,10,34,0,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,z,10,10,11,0,0,0,0,0,21,0,0,56,24
27,0,0,0,0,0,e015m,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,0,0,0,0,4g,4g,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,0,0,0,0,0,0,0,0,4g,21,0,0,0,24
27,4f,4f,4f,4f,4f,4f,e015q,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,4f,4f,4f,4f,4f,4f,4f,24
27,4f,4f,4f,4f,4f,4f,e015p,4f,4f,4f,4f,4f,4f,4f,24
27,4f,4f,4f,4f,4f,4f,e015p,4f,4f,4f,4f,4f,4f,4f,24
2k,2g,2g,2g,2g,2g,2g,e015r,2g,2g,2g,2g,2g,2g,2g,2h
NAME slime-4
ITM b 3,7
ITM b 4,7
ITM c 3,8
ITM c 4,8
ITM c 3,9
ITM c 4,9
ITM d 2,9
ITM e 5,9
ITM 10 4,4
ITM 1d 7,6
ITM 1f 3,2
ITM 1g 12,2
ITM 1g 13,2
ITM 1c 11,7
ITM a 9,9
ITM a 10,9
ITM a 8,9
ITM a 7,9
ITM b 9,10
ITM b 10,10
ITM b 8,10
ITM c 8,11
ITM c 9,11
ITM c 10,11
ITM a 12,11
ITM a 13,11
ITM a 14,11
ITM a 6,9
ITM a 11,11
ITM 1k 13,13
ITM f011n 14,2
PAL 5

ROOM e01b
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,0,0,1i,0,0,0,0,0,0,0,0,0,0,55,24
e015l,e015j,e015k,2a,e015m,e015j,e015j,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,33,32,2a,30,35,34,0,0,4g,4g,21,4g,4g,4g,24
27,0,33,10,10,34,0,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,z,10,10,11,0,0,0,0,0,21,0,0,56,24
27,0,0,0,0,0,e015m,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,0,0,0,0,4g,4g,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,0,0,0,0,0,0,0,0,0,21,0,0,0,24
27,4f,4f,4f,4f,4f,4f,e015q,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,4g,4g,4g,21,4g,4g,4g,24
27,4f,4f,4f,4f,4f,4f,e015p,0,4y,0,21,0,0,0,24
2k,2g,2g,2g,2g,2g,2g,e015r,2g,2g,2g,2g,2g,2g,2g,2h
NAME slime-3o
ITM 1d 7,6
ITM 1e 13,14
ITM 1f 3,2
ITM 8 4,7
ITM 9 3,7
ITM a 6,9
ITM a 5,9
ITM a 4,9
ITM a 3,9
ITM a 2,9
ITM a 1,9
ITM 1i 13,2
ITM 1j 7,9
ITM f011n 14,2
END e010 6,9
PAL 5

ROOM e01c
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,4g,24
27,0,0,1i,0,0,0,0,0,0,0,0,0,0,55,24
e015l,e015j,e015k,2a,e015m,e015j,e015j,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,33,32,2a,30,35,34,0,0,4g,4g,21,4g,4g,4g,24
27,0,33,10,10,34,0,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,z,10,10,11,0,0,0,0,0,21,0,0,56,24
27,0,0,0,0,0,e015m,e015j,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,0,0,0,0,4g,4g,4g,4g,4g,4g,21,4g,4g,4g,24
27,0,0,0,0,0,0,0,0,0,0,21,0,0,0,24
27,4f,4f,4f,4f,4f,4f,e015q,e015j,e015j,e015k,21,e015m,e015j,e015j,e015n
27,4f,4f,4f,4f,4f,4f,e015p,0,0,4g,21,4g,0,0,24
27,4f,4f,4f,4f,4f,4f,e015p,4f,4f,4f,4f,4f,4f,4f,24
27,4f,4f,4f,4f,4f,4f,e015p,4f,4f,4f,4f,4f,4f,4f,24
27,4f,4f,4f,4f,4f,4f,e015p,4f,4f,4f,4f,4f,4f,4f,24
2k,2g,2g,2g,2g,2g,2g,e015r,2g,2g,2g,2g,2g,2g,2g,2h
NAME slime-4o
ITM 1d 7,6
ITM 1f 3,2
ITM 9 3,7
ITM 8 4,7
ITM a 8,11
ITM a 9,11
ITM a 10,11
ITM a 11,11
ITM a 12,11
ITM a 13,11
ITM a 14,11
ITM a 4,9
ITM a 3,9
ITM a 1,9
ITM a 2,9
ITM a 5,9
ITM 1i 13,2
ITM 1j 7,9
ITM a 6,9
ITM 1k 13,13
ITM f011n 14,2
END e010 6,9
PAL 5

ROOM d013
0,0,d015z,0,0,0,0,0,0,0,0,0,0,d015z,0,0
0,0,d015z,d015y,d015y,d015y,d015y,d015y,d015y,d015y,d015y,d015y,d015y,d015z,d015y,d015y
0,0,d015z,4,55,6,0,0,0,0,0,0,0,6,d015s,d015s
0,0,d015z,15,16,0,16,16,16,16,16,16,17,d015z,d015q,d015s
0,0,d015y,d015p,4,0,4,d015v,0,0,0,d015x,0,d015z,d015r,d015t
0,0,4g,0,d015p,0,5,6,d015u,0,0,0,0,d015z,d015q,d015s
0,0,d015y,d015y,d015y,0,d015y,5,4,4,d015u,d015v,d015w,d015z,0,d015t
0,0,d015y,0,0,0,0,d015y,4,4,4,d015p,6,d015y,d015q,d015s
0,0,4g,15,16,16,17,0,4,4,6,0,0,d015y,d015r,d015t
0,0,d015y,5,6,4,6,0,5,4,0,0,4g,4g,d015q,d015s
0,0,d015y,4,4,d015l,d015n,4,4,6,0,d015y,d015y,d015y,d015r,d015t
0,0,d015z,d015l,d015m,0,0,d015o,d015n,4,4,d015y,0,0,d015q,d015s
0,0,d015z,0,0,0,0,0,0,d015n,4,6,21,d015z,d015r,d015t
0,0,d015z,d015y,d015y,d015y,0,d015x,d015y,d015y,d015o,d015m,21,d015z,d015q,d015s
0,d015k,2y,0,0,56,0,0,0,0,0,0,21,2s,d015j,d015t
d015k,2t,15,16,16,16,16,16,16,16,16,16,16,17,2u,d015j
NAME rose ruins
ITM d 2,10
ITM e 3,10
ITM d011a 0,1
ITM d011a 0,2
ITM d011a 0,4
ITM d011a 0,5
ITM d011a 1,5
ITM d011a 2,6
ITM d011a 3,7
ITM d011a 2,5
ITM d011a 3,6
ITM d011a 6,6
ITM d011a 10,9
ITM d011a 11,8
ITM d011a 12,8
ITM d011a 11,10
ITM d011a 1,6
ITM d011a 1,10
ITM d011a 0,9
ITM d011a 1,9
ITM d011a 0,8
ITM d011a 0,11
ITM d011a 0,12
ITM d011a 0,14
ITM 8 2,4
ITM 18 4,12
ITM 18 11,12
ITM j 5,4
ITM j 5,5
ITM i 5,3
ITM j 5,6
ITM k 5,7
ITM 18 4,4
ITM 18 6,4
ITM 18 6,5
ITM 18 13,8
ITM 18 14,12
ITM 18 15,12
ITM d011a 14,0
ITM d011a 15,1
ITM d011a 15,0
ITM d011a 14,1
ITM d011a 15,5
ITM d011a 14,4
ITM d011a 14,10
ITM d011a 15,11
ITM d011a 12,9
ITM d011b 1,13
ITM d011b 1,12
ITM d011b 1,3
ITM d011b 1,2
ITM d011b 1,0
ITM d011b 12,11
ITM d011b 13,10
ITM d011a 13,9
ITM d011b 13,7
ITM d011a 4,5
ITM d011b 2,7
ITM d011b 4,7
ITM d011b 6,7
ITM d011a 7,8
ITM d011a 7,9
ITM f011n 4,2
PAL 1

ROOM ccc3
4g,0,12,13,0,4g,0,4g,0,4g,4g,0,12,13,4g,4g
4g,0,1q,1r,0,ccc5p,0,4g,0,4g,ccc5p,0,1q,1r,0,4g
4g,0,4g,4g,0,4g,ccc5l,ccc5k,ccc5k,ccc5j,4g,0,0,4g,0,4g
4g,0,12,13,0,0,59,c,d,59,4g,0,12,13,0,4g
4g,0,1d,1e,4g,0,59,d,55,59,0,0,1d,1e,0,4g
4g,0,1q,1r,0,0,15,16,16,17,0,0,1q,1r,0,4g
4g,4g,0,4g,0,0,0,4g,4g,0,0,0,4g,4g,4g,4g
4g,4g,12,13,0,0,0,12,13,0,4g,0,12,13,4g,0
4g,0,1d,1e,0,ccc5p,0,1d,1e,0,ccc5p,0,1d,1e,0,4g
4g,0,1q,1r,0,4g,0,1q,1r,0,4g,0,1q,1r,0,4g
4g,0,4g,4g,0,4g,4g,4g,4g,0,4g,0,4g,4g,0,4g
4g,0,ccc5o,56,0,29,0,0,0,0,29,0,0,ccc5o,0,4g
4g,0,15,16,16,16,16,1o,1c,16,16,16,16,17,0,4g
4g,0,4g,4g,4g,4g,4g,1o,1c,4g,4g,4g,4g,4g,0,4g
4g,0,0,0,0,0,0,1o,1c,0,0,0,0,0,0,4g
3f,3g,3h,3g,3h,3g,3h,3g,3h,3g,3h,3g,3h,3g,3h,3i
NAME garden-dark
ITM ccc1f 14,14
ITM ccc1f 12,14
ITM ccc1f 10,14
ITM ccc1f 6,14
ITM ccc1f 4,14
ITM ccc1f 2,14
ITM ccc1g 9,14
ITM ccc1g 3,14
ITM ccc1h 11,14
ITM ccc1h 5,14
ITM ccc1h 1,14
ITM ccc1d 12,0
ITM ccc1e 13,0
ITM ccc1c 13,1
ITM ccc1i 13,5
ITM w 11,10
ITM v 11,9
ITM u 11,8
ITM v 11,7
ITM u 11,6
ITM v 11,5
ITM u 11,4
ITM v 11,3
ITM u 11,2
ITM u 11,1
ITM v 11,0
ITM t 5,7
ITM s 5,6
ITM r 5,5
ITM s 5,4
ITM r 5,3
ITM w 14,13
ITM v 14,12
ITM u 14,11
ITM v 14,10
ITM u 14,9
ITM u 14,8
ITM t 9,11
ITM s 9,10
ITM r 9,9
ITM s 9,8
ITM r 9,7
ITM s 9,6
ITM u 2,6
ITM u 2,7
ITM w 2,8
ITM u 4,0
ITM v 4,1
ITM u 4,2
ITM w 4,3
ITM r 1,0
ITM s 1,1
ITM r 1,2
ITM t 8,1
ITM s 8,0
ITM s 1,9
ITM r 1,10
ITM s 1,11
ITM r 1,12
ITM t 1,13
ITM s 1,8
ITM r 1,3
ITM r 1,4
ITM t 1,5
ITM o 15,0
ITM o 15,2
ITM o 15,4
ITM o 15,6
ITM o 15,8
ITM o 15,10
ITM o 15,12
ITM o 0,1
ITM o 0,3
ITM o 0,5
ITM o 0,7
ITM o 0,9
ITM o 0,11
ITM o 0,13
ITM q 15,14
ITM q 0,14
ITM p 15,1
ITM p 15,3
ITM p 15,5
ITM p 15,7
ITM p 15,9
ITM p 15,11
ITM p 15,13
ITM p 0,12
ITM p 0,10
ITM p 0,8
ITM p 0,6
ITM p 0,4
ITM p 0,2
ITM p 0,0
ITM ccc1m 10,4
ITM ccc1l 10,5
ITM ccc1n 10,6
ITM ccc1m 4,5
ITM ccc1l 4,6
ITM ccc1m 4,7
ITM ccc1l 4,8
ITM ccc1m 4,9
ITM ccc1n 14,5
ITM ccc1l 14,4
ITM ccc1m 14,3
ITM ccc1l 14,2
ITM ccc1m 14,1
ITM ccc1n 6,2
ITM ccc1m 6,0
ITM ccc1l 6,1
ITM 18 3,7
ITM 18 3,8
ITM 18 2,4
ITM 18 3,4
ITM 18 3,3
ITM 18 2,3
ITM 18 2,0
ITM 18 3,0
ITM 18 7,7
ITM 18 8,7
ITM 18 8,8
ITM 18 7,8
ITM 18 12,7
ITM 18 13,7
ITM 18 13,8
ITM 18 12,8
ITM 18 13,3
ITM 18 13,4
ITM 18 12,4
ITM t 4,10
ITM ccc1o 13,11
ITM ccc1o 2,11
ITM ccc1l 12,2
ITM ccc1n 12,3
ITM ccc1n 6,9
ITM ccc1l 6,8
ITM ccc1l 6,6
ITM ccc1m 6,7
ITM 18 6,3
ITM 18 7,3
ITM 18 8,3
ITM 18 9,3
ITM ccc1b 12,1
ITM f011n 8,4
PAL ccc

ROOM ccc5
4g,0,12,13,0,4g,0,4g,0,4g,4g,0,12,13,4g,4g
4g,0,1q,1r,0,ccc5p,0,4g,0,4g,ccc5p,0,1q,1r,0,4g
4g,0,4g,4g,0,4g,ccc5l,ccc5k,ccc5k,ccc5j,4g,0,0,4g,0,4g
4g,0,12,13,0,0,59,c,d,59,4g,0,12,13,0,4g
4g,0,1d,1e,4g,0,59,d,55,59,0,0,1d,1e,0,4g
4g,0,1q,1r,0,0,15,16,16,17,0,0,1q,1r,0,4g
4g,4g,0,4g,0,0,0,4g,4g,0,0,0,4g,4g,4g,4g
4g,4g,12,13,0,0,0,12,13,0,4g,0,12,13,4g,4g
4g,0,1d,1e,0,ccc5p,0,1d,1e,0,ccc5p,0,1d,1e,0,4g
4g,0,1q,1r,0,4g,0,1q,1r,0,4g,0,1q,1r,0,4g
4g,0,4g,4g,0,4g,4g,4g,4g,0,4g,0,4g,4g,0,4g
4g,0,ccc5q,56,0,29,0,0,0,0,29,0,0,ccc5q,0,4g
4g,0,15,16,16,16,16,1o,1c,16,16,16,16,17,0,4g
4g,0,4g,4g,4g,4g,4g,1o,1c,4g,4g,4g,4g,4g,0,4g
4g,0,0,0,0,0,0,1o,1c,0,0,0,0,0,0,4g
3f,3g,3h,3g,3h,3g,3h,3g,3h,3g,3h,3g,3h,3g,3h,3i
NAME garden-light
ITM ccc1d 12,0
ITM ccc1e 13,0
ITM ccc1b 12,1
ITM ccc1c 13,1
ITM s 8,0
ITM o 15,0
ITM o 15,2
ITM o 15,4
ITM o 15,6
ITM o 15,8
ITM o 15,10
ITM o 15,12
ITM o 0,1
ITM o 0,3
ITM o 0,5
ITM o 0,7
ITM o 0,9
ITM o 0,11
ITM o 0,13
ITM q 15,14
ITM q 0,14
ITM p 15,1
ITM p 15,3
ITM p 15,5
ITM p 15,7
ITM p 15,9
ITM p 15,11
ITM p 15,13
ITM p 0,12
ITM p 0,10
ITM p 0,8
ITM p 0,6
ITM p 0,4
ITM p 0,2
ITM p 0,0
ITM ccc1m 10,4
ITM ccc1l 10,5
ITM ccc1n 10,6
ITM ccc1m 4,5
ITM ccc1l 4,6
ITM ccc1m 4,7
ITM ccc1l 4,8
ITM ccc1m 4,9
ITM ccc1n 14,5
ITM ccc1l 14,4
ITM ccc1m 14,3
ITM ccc1l 14,2
ITM ccc1m 14,1
ITM ccc1n 6,2
ITM ccc1m 6,0
ITM ccc1l 6,1
ITM 18 3,7
ITM 18 3,8
ITM 18 2,4
ITM 18 3,4
ITM 18 3,3
ITM 18 2,3
ITM 18 2,0
ITM 18 3,0
ITM 18 7,7
ITM 18 8,7
ITM 18 8,8
ITM 18 7,8
ITM 18 12,7
ITM 18 13,7
ITM 18 13,8
ITM 18 12,8
ITM 18 13,3
ITM 18 13,4
ITM 18 12,4
ITM ccc1p 13,14
ITM ccc1s 14,14
ITM ccc1q 1,14
ITM ccc1r 2,14
ITM ccc1s 3,14
ITM ccc1q 4,14
ITM ccc1r 5,14
ITM ccc1s 6,14
ITM ccc1q 9,14
ITM ccc1r 10,14
ITM ccc1q 11,14
ITM ccc1r 12,14
ITM u 1,0
ITM u 1,2
ITM u 1,3
ITM u 1,4
ITM u 1,10
ITM u 1,12
ITM u 5,3
ITM u 5,5
ITM u 9,7
ITM u 9,9
ITM w 9,11
ITM w 1,13
ITM w 1,5
ITM w 5,7
ITM v 1,1
ITM v 1,8
ITM v 1,9
ITM v 1,11
ITM v 5,6
ITM v 5,4
ITM v 9,6
ITM v 9,8
ITM v 9,10
ITM t 2,8
ITM t 4,3
ITM t 11,10
ITM t 14,13
ITM s 14,12
ITM s 14,10
ITM s 11,9
ITM s 11,7
ITM s 11,5
ITM s 11,3
ITM s 11,0
ITM s 4,1
ITM r 2,7
ITM r 2,6
ITM r 4,2
ITM r 4,0
ITM r 11,8
ITM r 11,6
ITM r 11,4
ITM r 11,2
ITM r 11,1
ITM r 14,11
ITM r 14,9
ITM r 14,8
ITM t 8,1
ITM t 4,10
ITM 10 5,8
ITM 10 10,8
ITM 10 10,1
ITM 10 5,1
ITM ccc1l 12,2
ITM ccc1l 6,6
ITM ccc1l 6,8
ITM ccc1m 6,7
ITM ccc1n 12,3
ITM ccc1n 6,9
ITM 18 6,3
ITM 18 7,3
ITM 18 8,3
ITM 18 9,3
ITM f011n 8,4
PAL 8

ROOM c026
2t,38,38,38,38,38,38,38,38,38,3a,36,24,0,0,0
27,0,0,0,0,0,0,0,0,0,0,36,24,0,0,0
27,28,22,22,22,2r,22,22,22,23,2l,36,24,0,0,0
2y,1b,1b,1b,1b,36,1b,1b,1b,1b,2y,0,2s,0,0,0
16,16,16,2r,16,2r,16,16,16,16,16,36,16,16,16,16
41,41,41,36,41,36,41,41,41,41,41,36,41,41,41,41
16,16,16,16,16,16,16,2r,16,16,16,36,16,16,2r,16
41,41,41,41,41,41,41,36,41,41,41,36,41,41,36,41
41,41,41,41,41,41,41,36,41,41,41,36,41,41,36,41
16,16,16,16,16,16,16,16,16,16,16,36,16,16,16,41
41,41,41,41,41,41,41,36,41,41,41,36,41,36,41,41
41,41,41,41,41,41,41,36,41,41,41,36,41,36,41,41
16,16,16,2r,16,16,16,16,16,16,16,16,16,16,16,16
3i,41,41,36,41,41,41,41,41,41,41,41,3x,42,0,5
3p,3i,41,36,41,41,41,41,41,41,41,41,41,3x,42,56
16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16
NAME dream demons 1
ITM 18 15,13
ITM 18 14,13
ITM 18 12,13
ITM 18 13,13
ITM 18 11,13
ITM 18 10,13
ITM 18 9,13
ITM 18 8,13
ITM 18 7,13
ITM 18 6,13
ITM 18 5,13
ITM 18 4,13
ITM 18 2,13
ITM 18 6,10
ITM 18 5,10
ITM 18 3,10
ITM 18 4,10
ITM 18 2,10
ITM 18 1,10
ITM 18 0,10
ITM 18 8,10
ITM 18 9,10
ITM 18 10,10
ITM 18 12,10
ITM 18 14,10
ITM 18 15,10
ITM 18 15,8
ITM 18 15,7
ITM 18 13,7
ITM 18 12,7
ITM 18 10,7
ITM 18 9,7
ITM 18 8,7
ITM 18 6,7
ITM 18 5,7
ITM 18 4,7
ITM 18 3,7
ITM 18 1,7
ITM 18 2,7
ITM 18 0,7
ITM c021d 14,3
EXT 11,0 c027 11,14
END c02d 11,2
END c02e 11,3
PAL 4

ROOM c027
25,22,22,26,25,22,22,26,25,22,22,26,25,22,22,26
4i,1,2,4h,4i,1,2,4h,4i,1,2,4h,4i,1,2,4h
4q,4o,4o,4o,4o,4o,4o,4o,4o,4o,4o,4o,4o,4o,4o,4p
2k,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2h
2v,2v,1s,38,38,1p,1s,38,38,1p,1s,38,38,1p,2v,2v
2v,2v,2y,12,13,37,3a,12,13,37,3a,12,13,2s,2v,2v
2v,2v,2y,5g,5h,4,4,5g,5h,4,4,5g,5h,2s,2v,2v
2v,2v,2y,12,13,4,4,12,13,4,4,12,13,2s,2v,2v
2v,2v,2y,1d,1e,4,4,1d,1e,4,4,1d,1e,2s,2v,2v
2v,2v,2y,1d,1e,4,4,1d,1e,4,4,1d,1e,2s,2v,2v
1s,38,3a,1q,1r,1m,1m,1q,1r,1m,1m,1q,1r,37,38,1p
2y,0,35,1b,1b,42,35,1b,1b,42,35,1b,1b,42,0,2s
3a,35,1x,1y,1y,1z,41,1x,1y,1y,1z,41,1x,1z,42,2s
35,1a,2b,2c,2c,2d,3x,2b,2c,2c,2d,41,2b,2d,3x,2s
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2r,2g,2g,2g,2h
2v,2u,2u,2u,2v,2v,2u,2v,2u,2u,2v,2u,2u,2v,2u,2v
NAME dream demons 2
ITM 18 14,12
ITM 18 12,12
ITM 18 11,12
ITM 18 10,12
ITM 18 9,12
ITM 18 7,12
ITM 18 6,12
ITM 18 5,12
ITM 18 4,12
ITM 18 3,12
ITM 18 2,12
ITM 18 1,12
ITM 18 8,12
ITM 18 0,0
ITM 18 3,0
ITM 18 4,0
ITM 18 7,0
ITM 18 8,0
ITM 18 11,0
ITM 18 12,0
ITM 18 15,0
ITM c021d 3,11
ITM c021e 8,11
ITM c021d 13,11
EXT 0,13 c02a 14,13
EXT 13,12 c027 15,1
EXT 0,1 c02a 15,1
PAL 4

ROOM c02a
25,22,22,26,25,22,22,26,25,22,22,26,25,22,22,26
4i,1,2,4h,4i,1,2,4h,4i,1,2,4h,4i,1,2,4h
4q,4o,4o,4o,4o,4o,4o,21,4o,4o,4o,4o,4o,4o,4o,4p
2k,2g,2g,2g,2g,2g,2g,21,2g,2g,2g,2g,2g,2g,2g,2h
2u,2v,1s,38,38,38,38,21,38,38,38,38,38,1p,2v,1s
2v,2v,2y,0,0,1,2,21,1,2,1,3,0,2s,2v,2v
2v,2v,2y,0,5,3,4,21,3,4,4,2,0,2s,2v,2v
2v,2v,2y,2,0,0,5,c025o,3,4,6,0,1,24,2v,2v
2v,2v,2y,3,3,0,0,0,5,6,0,1,3,2s,2v,2v
2v,2v,2y,3,3,2,0,0,0,0,5,3,3,2s,2v,2v
1s,38,3a,3,3,6,0,3e,0,0,0,5,3,37,38,1p
2y,42,5,3,6,0,0,0,0,0,0,0,0,0,35,2s
3i,3x,1b,1b,1b,1b,1b,1b,1b,1b,1b,1b,1b,1b,1a,37
3o,3i,41,41,41,41,41,41,41,41,41,41,41,41,41,41
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g
2v,2u,2u,2u,2v,2v,2u,2v,2u,2u,2v,2u,2u,2v,2u,2v
NAME dream demons 3
ITM 16 1,11
ITM 16 14,11
ITM 18 14,12
ITM 18 13,12
ITM 18 12,12
ITM 18 11,12
ITM 18 10,12
ITM 18 9,12
ITM 18 8,12
ITM 18 7,12
ITM 18 6,12
ITM 18 5,12
ITM 18 4,12
ITM 18 3,12
ITM 18 2,12
ITM 18 1,12
ITM 18 6,5
ITM 18 6,6
ITM 18 6,7
ITM 18 7,8
ITM 18 8,7
ITM 18 8,6
ITM 18 8,5
ITM 18 8,0
ITM 18 7,0
ITM 18 4,0
ITM 18 3,0
ITM 18 0,0
ITM 18 11,0
ITM 18 12,0
ITM 18 15,0
ITM 18 1,0
ITM 18 2,0
ITM 18 5,0
ITM 18 6,0
ITM 18 9,0
ITM 18 10,0
ITM 18 13,0
ITM 18 14,0
ITM 10 7,10
EXT 15,13 c027 1,13
EXT 0,1 c02b 15,1
END c02f 7,7
PAL 4

ROOM c02b
i,i,h,j,0,0,0,0,0,0,0,0,0,0,0,0
h,i,i,j,0,0,0,0,0,0,0,0,0,0,0,0
i,o,n,j,0,0,0,0,0,0,0,0,0,15,21,16
h,0,0,j,0,0,0,0,0,0,0,0,0,0,21,n
i,9,9,j,0,0,0,0,0,0,0,0,0,0,21,0
i,i,h,j,0,0,0,0,0,0,0,0,0,0,21,0
i,o,n,j,0,0,0,0,0,0,0,0,0,0,21,0
i,0,0,j,0,0,0,0,0,0,0,0,0,0,21,0
h,9,9,j,0,0,0,0,0,0,0,0,0,0,21,0
i,i,h,j,0,0,0,0,0,0,0,0,0,0,21,3f
57,57,57,57,0,0,0,0,0,0,0,e,i,h,i,i
c025k,2q,2n,c025k,0,0,0,0,0,0,0,i,h,h,h,i
c025l,0,0,c025l,0,0,0,0,0,0,0,i,h,i,i,i
c025j,55,0,c025j,0,0,0,0,0,0,0,h,h,i,i,i
15,16,16,16,16,16,16,16,16,16,16,16,17,i,i,i
i,i,i,i,o,0,0,0,0,0,n,i,i,i,i,i
NAME dream demons 4
ITM 12 4,8
ITM 15 10,8
ITM 11 9,3
ITM 14 5,2
ITM 12 6,6
ITM 18 4,12
ITM 18 5,12
ITM 18 7,12
ITM 18 6,12
ITM 18 8,12
ITM 18 9,12
ITM 18 10,12
ITM 18 3,12
ITM 18 2,12
ITM 18 1,12
ITM 18 0,12
ITM 18 12,1
ITM 18 12,0
ITM 18 13,3
ITM 18 13,4
ITM 18 13,5
ITM 18 13,6
ITM 18 13,7
ITM 18 13,8
ITM 18 12,8
ITM 18 11,8
ITM 18 10,9
ITM 18 15,8
ITM 18 15,7
ITM 18 15,6
ITM 18 15,5
ITM 18 15,4
ITM 18 13,0
ITM 18 14,0
ITM 18 15,0
ITM f011n 1,13
EXT 11,9 c02b 10,13
PAL 4

ROOM c013
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,c015n,c015n,c015n,c015n,c015n,c015n,c015n,2x,c015n,c015n,c015n,c015n,c015n,c015n,24
27,c015n,c015n,c015n,c015n,c015n,c015n,c015n,29,c015n,c015n,c015n,c015n,55,c015n,24
27,c015j,c015l,c015l,c015k,c015n,c015n,c015n,c015n,c015n,c015o,1p,1s,1s,1s,24
27,1s,1s,1s,1s,1s,1s,1s,1s,1s,21,c015n,c015n,c015n,c015n,24
27,c015n,c015n,c015n,c015n,c015n,2x,c015n,c015n,c015n,21,c015n,c015n,c015n,c015n,24
27,c015n,c015n,c015n,c015n,c015n,29,c015n,c015n,c015o,1s,1s,1s,c015o,1s,24
27,c015n,c015n,c015n,c015n,c015n,c015n,c015n,c015n,21,c015n,c015n,c015n,2r,c015n,24
27,c015o,1s,1s,1s,1s,1s,1s,c015o,1s,c015n,2x,c015n,36,c015n,24
27,36,c015n,c015n,c015n,c015n,c015n,c015n,21,c015n,c015n,29,c015n,36,c015n,24
27,36,c015n,c015n,c015n,c015n,c015n,c015n,21,c015n,c015n,c015n,c015n,36,c015m,24
27,36,c015n,c015n,c015n,c015n,c015n,56,21,c015n,c015n,c015n,1u,2g,2h,2h
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,c015o,2t,2t,2t,2v
25,26,2u,25,26,2v,2k,25,22,26,2t,c015o,25,26,2w,2t
4i,4h,2t,4i,4h,2k,2t,4i,0,4h,c015o,c015o,4i,4h,2h,2h
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g
NAME enui wet floor
ITM a 1,0
ITM a 3,3
ITM b 2,3
ITM a 1,14
ITM a 3,14
ITM 9 3,15
ITM b 1,15
ITM a 4,14
ITM 8 4,15
ITM f 6,8
ITM i 4,8
ITM c011a 1,7
ITM a 2,2
ITM c 1,1
ITM c 1,2
ITM c 3,5
ITM c 3,6
ITM c 3,4
ITM c011a 2,11
ITM t 11,14
ITM s 11,13
ITM r 11,12
ITM c011a 13,5
ITM b 14,3
ITM c 14,6
ITM g 6,9
ITM h 6,10
ITM f 3,9
ITM c 14,15
ITM c011a 13,14
ITM s 0,6
ITM t 0,7
ITM r 0,3
ITM r 0,5
ITM s 0,4
ITM s 15,10
ITM s 15,8
ITM r 15,9
ITM r 15,7
ITM 18 12,13
ITM 18 13,13
ITM 18 10,7
ITM 18 11,7
ITM 18 12,7
ITM 18 12,8
ITM 18 10,8
ITM 18 10,9
ITM 18 12,9
ITM 18 11,4
ITM 18 12,4
ITM 18 13,4
ITM 18 12,1
ITM 18 13,1
ITM 18 14,1
ITM 18 9,1
ITM 18 10,1
ITM 18 11,1
ITM 18 2,1
ITM 18 3,1
ITM 18 4,1
ITM 18 6,1
ITM 18 7,1
ITM 18 5,1
ITM 18 7,2
ITM 18 1,5
ITM 18 1,6
ITM 18 2,6
ITM 18 2,5
ITM 18 4,5
ITM 18 4,6
ITM 18 5,6
ITM 18 5,5
ITM 18 7,6
ITM 18 7,5
ITM 18 8,6
ITM 18 8,5
ITM 18 7,9
ITM 18 7,10
ITM 18 2,9
ITM 18 2,10
ITM 10 11,8
ITM c011a 11,2
ITM t 15,13
ITM s 15,11
ITM r 15,12
ITM c011e 9,11
ITM c011e 14,13
ITM c011e 14,2
ITM c011e 5,7
ITM c011f 2,7
ITM c011f 4,11
ITM c011d 4,7
ITM c011d 5,11
ITM c011g 14,14
ITM c011g 14,5
ITM 9 9,12
ITM c011h 5,9
ITM 8 5,8
ITM j 4,9
ITM k 4,10
ITM h 3,11
ITM g 3,10
ITM 18 9,2
ITM 18 9,9
ITM 18 9,10
ITM 18 14,10
ITM c011g 14,9
ITM c011g 14,8
ITM c011g 14,7
ITM c011g 14,4
ITM 18 11,10
ITM c011g 3,7
ITM 10 6,5
ITM c011f 8,14
ITM c011d 9,14
ITM 18 7,13
ITM 18 9,13
ITM 10 8,1
ITM 18 6,2
ITM c011m 6,3
ITM c011n 5,3
ITM c011l 10,3
ITM f011n 13,2
ITM 18 6,6
ITM 18 8,2
ITM 18 11,9
ITM 18 10,10
PAL 7

ROOM c015
1s,38,38,38,38,38,38,38,38,38,38,38,38,38,38,1p
27,c015p,c015n,c015n,c015n,c015n,c015n,c015n,2x,c015n,c015n,c015n,c015n,c015n,c015n,24
27,c015n,c015n,c015n,c015n,0,c015n,c015n,29,c015n,c015n,c015n,c015n,55,c015n,24
27,c015j,c015l,c015l,c015k,c015n,c015n,c015n,c015n,c015n,c015o,1p,1s,1s,1s,24
27,1s,1s,1s,1s,1s,1s,1s,1s,1s,21,c015n,c015n,c015n,c015n,24
27,c015n,c015n,c015n,c015n,c015n,2x,c015n,c015n,c015n,21,c015n,c015n,c015n,c015n,24
27,c015n,c015n,c015n,c015n,c015n,29,c015n,c015n,c015o,1s,1s,1s,c015o,1s,24
27,c015n,c015n,c015n,c015n,c015n,c015n,c015n,c015n,21,c015n,c015n,c015n,2r,c015n,24
27,c015o,1s,1s,1s,1s,1s,1s,c015o,1s,c015n,2x,c015n,36,c015n,24
27,36,c015n,c015n,c015n,c015n,c015n,c015n,21,c015n,c015n,29,c015n,36,c015n,24
27,36,c015n,c015n,c015n,c015n,c015n,c015n,21,c015n,c015n,c015n,c015n,36,c015m,24
27,36,c015n,c015n,c015n,c015n,c015n,56,21,c015n,c015n,c015n,1u,2g,2h,2h
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,c015o,2t,2t,2t,2v
25,26,2u,25,26,2v,2k,25,22,26,2t,c015o,25,26,2w,2t
4i,4h,2t,4i,4h,2k,2t,4i,0,4h,c015o,c015o,4i,4h,2h,2h
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g
NAME enui dry floor
ITM 10 6,5
ITM 10 11,8
ITM c 1,2
ITM c011j 2,7
ITM f 3,9
ITM h 3,11
ITM g 3,10
ITM f 6,8
ITM g 6,9
ITM h 6,10
ITM i 4,8
ITM k 4,10
ITM j 4,9
ITM r 11,12
ITM s 11,13
ITM t 11,14
ITM r 15,7
ITM s 15,8
ITM s 15,10
ITM s 15,12
ITM t 15,13
ITM r 15,11
ITM r 15,9
ITM r 0,3
ITM t 0,7
ITM s 0,6
ITM s 0,4
ITM r 0,5
ITM c011i 3,7
ITM 18 9,13
ITM 18 7,13
ITM 18 10,14
ITM 18 9,10
ITM 18 11,10
ITM 18 12,9
ITM 18 11,9
ITM 18 9,9
ITM 18 10,8
ITM 18 10,7
ITM 18 11,7
ITM 18 12,7
ITM 18 12,8
ITM 18 14,7
ITM 18 14,8
ITM 18 14,4
ITM 18 11,4
ITM 18 12,4
ITM 18 13,4
ITM 18 2,1
ITM 18 3,1
ITM 18 4,1
ITM 18 5,1
ITM 18 6,1
ITM 18 6,2
ITM 18 10,1
ITM 18 11,1
ITM 18 13,1
ITM 18 14,1
ITM 18 12,1
ITM 18 7,6
ITM 18 7,5
ITM 18 8,6
ITM 18 8,5
ITM 18 6,6
ITM 18 5,6
ITM 18 5,5
ITM 18 4,5
ITM 18 3,5
ITM 18 2,5
ITM 18 1,5
ITM 18 1,6
ITM 18 2,6
ITM 18 3,6
ITM 18 4,6
ITM 18 7,10
ITM 18 7,9
ITM 18 5,9
ITM 18 2,9
ITM 18 2,10
ITM 10 8,1
ITM 18 7,1
ITM 18 7,2
ITM 18 9,2
ITM 18 9,1
ITM 18 8,2
ITM c011k 9,14
ITM c011k 14,13
ITM c011k 14,9
ITM c011k 4,14
ITM c011k 1,14
ITM c011k 0,14
ITM f011n 13,2
ITM 18 10,9
ITM 18 10,10
PAL 7

ROOM bbb5
4g,4g,4g,4g,i,d,d,d,bbb5k,0,4g,0,3r,3r,3r,4g
0,1,3,4,b,2,d,d,bbb5k,0,55,0,3f,3i,1c,4g
16,16,17,36,4w,4w,0,d,bbb5k,57,57,1p,57,0,1o,1o
4g,4g,4g,36,5c,5d,4g,4g,4g,0,0,2v,57,0,3i,1c
0,0,0,36,2m,2m,2m,2m,0,36,0,1p,57,0,3w,1c
i,i,i,i,i,i,i,i,i,36,0,2v,36,0,i,i
4i,1x,1z,24,25,21,26,27,4g,36,0,9,36,0,4g,i
4i,1x,1y,1z,28,22,23,0,0,36,0,7,36,0,0,3o
i,3v,3v,3v,i,h,h,i,i,36,0,57,57,h,36,3u
0,56,0,0,0,3n,3p,3o,3m,5a,0,36,57,4g,36,3t
4g,1n,1n,bbb5k,bbb5k,3u,3v,3t,3w,1p,1p,36,0,0,36,i
4g,0,i,i,i,i,i,1p,1p,1p,1p,0,i,i,i,i
0,0,0,0,0,0,1p,1p,1p,1p,1p,0,n,h,i,o
1n,1n,1n,1n,1n,0,0,0,0,0,1p,0,0,0,0,0
h,i,i,i,i,h,i,i,i,0,0,0,i,1n,i,i
i,i,h,i,i,i,i,h,i,0,0,0,i,i,i,h
NAME Onion Floor 1
ITM g 13,3
ITM g 13,4
ITM g 13,5
ITM 7 2,4
ITM 6 1,4
ITM n 10,8
ITM m 10,7
ITM m 10,6
ITM m 10,5
ITM m 10,4
ITM 10 13,2
ITM 10 10,3
ITM t 8,10
ITM 16 12,13
ITM 16 13,13
ITM 16 13,10
ITM 16 13,9
ITM 16 14,7
ITM 1 13,11
ITM 2 12,11
ITM m 11,11
ITM m 11,12
ITM m 11,13
ITM n 11,14
ITM j 9,1
ITM j 9,0
ITM 4 0,3
ITM 5 0,4
ITM 4 14,0
ITM 4 13,0
ITM 4 12,0
ITM t 14,12
ITM t 13,15
ITM r 3,14
ITM s 5,15
ITM t 1,15
ITM 10 4,9
ITM 10 0,7
ITM 10 5,1
ITM h 13,6
ITM bbb1a 0,1
ITM bbb1a 14,13
ITM 16 15,13
ITM t 3,15
ITM s 1,14
ITM v 10,10
ITM bbb1b 0,9
ITM g 5,8
ITM h 5,9
ITM m 6,9
ITM m 6,8
ITM n 6,10
ITM s 7,12
ITM r 7,13
ITM t 7,14
ITM s 9,11
ITM r 8,9
ITM r 14,11
ITM r 5,14
ITM 6 1,0
ITM 7 2,0
ITM 16 8,13
ITM 16 0,12
ITM 16 1,12
ITM 16 2,12
ITM 16 3,12
ITM 16 0,10
ITM 16 0,11
ITM 16 5,12
ITM 16 5,13
ITM 16 6,13
ITM r 9,12
ITM s 9,13
ITM t 9,14
ITM u 10,11
ITM v 10,12
ITM u 10,13
ITM w 10,14
ITM 11 7,3
ITM 11 6,3
ITM k 3,0
ITM 7 11,15
ITM 7 9,15
ITM 6 10,15
ITM f011n 10,1
ITM h 9,3
ITM m 11,0
ITM n 11,1
ITM 5 14,1
ITM 5 15,3
ITM 5 15,4
ITM 16 14,8
ITM 16 14,9
ITM 16 14,10
ITM 5 14,2
ITM 4 15,0
ITM 5 15,1
EXT 0,9 bbb5 0,12
EXT 15,13 bbb6 1,13
EXT 15,4 bbb6 0,4
END bbbd 9,15
END bbbd 10,15
END bbbd 11,15
END bbbd 2,4
END bbbe 4,9
END bbbe 10,3
END bbbe 13,2
PAL 2

ROOM bbb6
4g,4g,4g,0,4g,1g,0,0,0,0,i,i,i,0,0,0
0,0,4g,0,0,0,1g,i,i,i,41,0,4g,i,i,0
0,0,4g,0,4g,i,0,1g,bbb5k,0,41,1s,41,4g,i,1n
4g,4g,4g,0,i,2k,36,4g,1g,0,i,5a,0,4g,0,i
59,59,59,0,2m,2k,36,2m,54,36,0,i,i,0,1n,0
i,i,i,4g,0,0,i,0,1h,0,1p,i,0,0,2m,i
i,0,4g,5g,5h,5g,i,1h,0,39,0,0,i,4g,i,0
i,4g,0,0,28,36,23,37,38,3a,0,i,0,51,1n,0
i,0,0,1s,1p,36,0,i,2k,2k,2k,4g,0,h,i,36
2k,0,22,22,0,3n,0,0,d,5a,d,2m,0,58,4g,36
2k,1n,1n,d,d,0,2v,2u,i,52,4g,52,0,0,5a,36
i,i,i,i,i,2u,2v,0,0,0,0,0,0,36,i,i
4g,4g,0,0,0,0,2s,i,36,1n,1n,1n,53,36,0,i
0,0,36,1n,1n,0,0,0,36,0,0,0,0,36,0,i
h,i,i,i,i,h,0,i,i,i,i,i,i,h,0,i
i,i,h,i,i,i,0,0,h,0,h,0,h,0,0,h
NAME Onion Floor 2
ITM 16 0,12
ITM 16 0,13
ITM 16 1,13
ITM 16 1,12
ITM 16 2,12
ITM 16 3,12
ITM 16 4,12
ITM 6 6,15
ITM 7 7,15
ITM 6 9,15
ITM 6 11,15
ITM 6 13,15
ITM 7 14,15
ITM 10 2,8
ITM 10 4,1
ITM 10 9,3
ITM 10 12,8
ITM 10 13,3
ITM u 3,3
ITM p 1,1
ITM o 1,0
ITM v 3,2
ITM u 3,1
ITM v 3,0
ITM bbb1a 9,0
ITM bbb1a 13,6
ITM 4 2,0
ITM 1 8,1
ITM 1 11,0
ITM 1 12,4
ITM 2 11,4
ITM 2 14,1
ITM 8 4,8
ITM 9 3,8
ITM j 10,6
ITM k 10,7
ITM i 12,9
ITM 4 6,0
ITM 4 10,10
ITM 5 7,9
ITM 4 1,6
ITM 5 1,7
ITM 5 1,8
ITM 5 1,9
ITM d 8,6
ITM e 12,3
ITM 7 12,5
ITM 7 13,0
ITM m 14,12
ITM l 14,11
ITM m 14,13
ITM n 14,14
ITM m 6,13
ITM n 6,14
ITM j 12,10
ITM k 12,11
ITM b 0,0
ITM c 0,1
ITM c 0,2
ITM c 15,1
ITM b 15,0
ITM 11 9,5
ITM m 6,12
ITM l 6,10
ITM m 6,11
ITM i 10,5
ITM 18 0,3
ITM j 4,4
ITM k 4,5
ITM w 3,4
ITM bbb1a 1,4
ITM q 1,3
ITM p 1,2
ITM 5 2,1
EXT 0,13 bbb5 14,13
EXT 0,4 bbb5 15,4
END bbbd 10,15
END bbbd 6,15
END bbbd 7,15
END bbbd 13,15
END bbbd 14,15
END bbbe 12,8
PAL 2

ROOM a027
0,0,0,5d,0,0,0,0,0,5c,0,0,0,0,4,0
1,3,0,0,5d,0,a025k,0,5c,0,0,d,c,0,0,0
d,0,k,c,15,16,16,16,17,0,0,0,0,4,6,0
30,32,3,6,0,2,0,0,0,0,0,k,0,0,0,0
3c,3d,0,0,0,0,5,4,4,6,0,3,0,1,4,4
3k,a025n,0,0,0,c,0,0,0,0,0,0,4,0,0,1
2,0,d,6,0,0,d,0,0,2,4,0,3,6,0,0
4g,4g,4g,4g,4g,3,4g,4g,d,d,6,4g,4g,4g,4g,4g
0,0,56,0,0,0,0,0,0,0,0,4,0,0,55,0
16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16
h,i,i,h,j,14,28,0,3,23,14,g,h,i,h,i
i,h,i,i,j,28,4,0,0,0,23,g,i,i,i,i
i,i,h,i,j,1,0,0,1,3,k,g,i,h,i,i
i,i,i,i,j,c,0,0,0,0,d,g,h,i,i,i
h,i,h,i,j,0,k,d,0,0,0,g,i,i,h,i
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g
NAME a02-1
ITM q 6,3
ITM p 5,3
ITM q 5,4
ITM q 4,3
ITM p 7,3
ITM o 7,4
ITM q 7,5
ITM o 8,3
ITM q 8,4
ITM 5 0,6
ITM 5 0,7
ITM 5 0,10
ITM 5 0,11
ITM 5 0,12
ITM 5 0,13
ITM 5 0,14
ITM 7 1,14
ITM 7 1,8
ITM 4 0,5
ITM 4 0,9
ITM 3 0,4
ITM a021h 3,8
ITM a021h 5,8
ITM b 0,15
ITM a021i 8,8
ITM a021j 0,8
ITM 18 5,7
ITM 18 8,7
ITM 18 9,7
ITM 18 10,7
ITM f011n 14,8
PAL 7

ROOM a028
0,0,0,5d,0,0,0,0,0,5c,0,0,0,0,4,0
1,3,0,0,5d,0,a025k,0,5c,0,0,d,c,0,0,0
d,0,k,c,15,16,16,16,17,0,0,0,0,4,6,0
30,32,3,6,0,2,0,0,0,0,0,k,0,0,0,0
3c,3d,0,0,0,0,5,4,4,6,0,3,0,1,4,4
3k,a025n,0,0,0,c,0,0,0,0,0,0,4,0,0,1
2,0,d,6,0,0,d,0,0,2,4,0,3,6,0,0
4g,4g,4g,4g,4g,3,4g,4g,d,d,6,4g,4g,4g,4g,4g
0,0,56,0,0,0,0,0,0,0,0,4,0,0,55,0
16,16,16,16,16,16,4g,4g,4g,4g,16,16,16,16,16,16
h,i,i,h,j,14,a025l,4g,3,a025m,14,g,h,i,h,i
i,h,i,i,j,28,a025l,4g,0,a025m,23,g,i,i,i,i
i,i,h,i,j,1,0,0,1,3,k,g,i,h,i,i
i,i,i,i,j,c,0,0,0,0,d,g,h,i,i,i
h,i,h,i,j,0,k,d,0,0,0,g,i,i,h,i
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g
NAME a02-2
ITM 4 0,5
ITM 4 0,9
ITM 5 0,6
ITM 5 0,7
ITM 5 0,10
ITM 5 0,11
ITM 5 0,12
ITM 5 0,13
ITM 5 0,14
ITM 7 1,8
ITM 7 1,14
ITM 3 0,4
ITM b 0,15
ITM q 5,4
ITM q 4,3
ITM q 6,3
ITM q 8,4
ITM q 7,5
ITM p 7,3
ITM o 7,4
ITM o 8,3
ITM 5 0,8
ITM p 5,3
ITM a021k 11,8
ITM a021k 12,8
ITM a021k 13,8
ITM a021l 9,8
ITM a021m 8,11
ITM a021n 8,12
ITM 18 5,7
ITM 18 8,7
ITM 18 9,7
ITM 18 10,7
ITM f011n 14,8
EXT 9,8 a028 8,10
EXT 8,12 a029 8,12
PAL 7

ROOM a029
0,0,0,5d,0,0,0,0,0,5c,0,0,0,0,4,0
1,3,0,0,5d,0,a025k,0,5c,0,0,d,c,0,0,0
d,0,k,c,15,16,16,16,17,0,0,0,0,4,6,0
30,32,3,6,0,2,0,0,0,0,0,k,0,0,0,0
3c,3d,0,0,0,0,5,4,4,6,0,3,0,1,4,4
3k,0,0,0,0,c,0,0,0,0,0,0,4,0,0,1
2,0,d,6,0,0,d,0,0,2,4,0,3,6,0,0
4g,4g,4g,4g,4g,3,4g,4g,d,d,6,4g,4g,4g,4g,4g
0,0,56,0,0,0,0,0,0,0,0,4,0,0,55,0
16,16,16,16,16,16,4g,4g,4g,4g,16,16,16,16,16,16
h,i,i,h,j,14,a025l,0,3,a025m,14,g,h,i,h,i
i,h,i,i,j,28,a025l,4g,4g,a025m,23,g,i,i,i,i
i,i,h,i,j,1,0,4g,1,3,k,g,i,h,i,i
i,i,i,i,j,c,0,4g,0,4g,d,g,h,i,i,i
h,i,h,i,j,0,k,d,0,0,0,g,i,i,h,i
2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g
NAME a02-3
ITM a021f 8,14
ITM a021e 7,14
ITM a021a 5,14
ITM a021c 6,14
ITM a021g 9,14
ITM a021b 10,14
ITM 5 0,6
ITM 5 0,7
ITM 5 0,8
ITM 4 0,9
ITM 5 0,10
ITM 5 0,11
ITM 5 0,12
ITM 5 0,13
ITM 5 0,14
ITM b 0,15
ITM 4 0,5
ITM 3 0,4
ITM p 5,3
ITM p 7,3
ITM o 7,4
ITM o 8,3
ITM q 4,3
ITM q 5,4
ITM q 6,3
ITM q 7,5
ITM q 8,4
ITM 18 5,7
ITM 18 8,7
ITM 18 9,7
ITM 18 10,7
ITM 18 9,12
ITM f011n 14,8
PAL 7

ROOM a015
55,0,2f,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2g,2l
1n,36,2x,1s,a0164,0,0,0,0,1s,0,0,0,0,36,2y
2f,2l,36,0,a0164,1s,1s,36,1s,a0164,36,1s,1s,1s,36,2y
37,38,38,3a,a0165,0,0,36,0,a0164,1s,1s,0,0,36,2y
9,9,9,9,2f,2g,2g,2g,2l,a0164,1s,0,36,38,36,3a
a0164,0,0,9,24,0,a0164,0,27,a0165,0,36,2y,2y,36,0
a0164,7,9,9,37,3a,a0164,37,38,38,38,38,3a,0,36,0
a0165,0,a0164,9,a0165,4g,a0164,36,0,0,0,0,0,0,36,0
9,b,a0164,9,0,0,a0165,36,2n,2o,4m,2p,2q,15,16,17
0,0,2x,0,0,a0160,a0161,36,4g,0,0,0,0,0,4k,4k
5e,23,22,22,28,a015z,a015y,23,4g,36,a015m,a015n,a015o,36,a015u,a015t
5f,0,4g,4g,4g,4g,4g,0,0,36,a015l,48,a015p,36,a015u,a015t
4g,5f,0,0,29,0,0,36,22,28,a015s,a015r,a015q,36,a015u,a015t
22,22,22,22,28,a015j,a015k,23,4,4,4,4,4,36,a015u,a015t
2,56,2,4,4,4,4,4,4,4,a015m,a015n,a015o,0,a015u,a015t
7,9,9,9,3f,3g,3u,3i,16,17,a015l,48,a015p,a0163,a015v,a015t
NAME ripple_room1_the_barren_belltower
ITM a011a 11,15
ITM a011b 13,14
ITM a011h 13,15
ITM a011a 11,11
ITM a011i 5,13
ITM a011k 2,9
ITM a011l 1,9
ITM a011l 0,9
ITM a011l 0,10
ITM a011l 0,11
ITM a011l 1,11
ITM a011l 1,12
ITM a011l 3,9
ITM n 13,7
ITM m 13,6
ITM n 15,6
ITM m 13,5
ITM m 15,5
ITM a011r 5,14
ITM a011s 10,5
ITM a011s 11,1
ITM a011s 5,3
ITM a011t 3,2
ITM a011t 2,5
ITM a011t 5,5
ITM a011u 7,5
ITM a011k 2,1
ITM a011s 12,3
ITM a0122 6,12
ITM a0123 5,12
ITM 11 4,11
ITM a011w 15,9
ITM a011t 3,12
ITM a011l 2,12
ITM a011l 1,5
ITM a011t 7,9
ITM a0124 0,14
ITM 18 14,15
ITM 18 14,14
ITM 18 14,13
ITM 18 14,12
ITM 18 14,11
ITM 18 14,10
ITM 18 15,10
ITM 18 12,8
ITM 18 11,8
ITM 18 10,8
ITM 18 9,8
ITM 18 8,8
ITM 18 8,13
ITM 18 4,7
ITM a011l 2,8
ITM a011l 1,7
ITM a011l 0,7
ITM a011l 0,6
ITM a011l 0,5
ITM a011l 4,9
ITM a011l 4,8
ITM a011l 5,8
ITM a011l 6,6
ITM a011l 6,5
ITM a011t 8,7
ITM a011v 14,5
ITM a011l 2,2
ITM a011l 1,1
ITM a011l 1,0
ITM a011q 14,4
ITM a011l 2,7
ITM a011l 6,8
ITM a011l 6,7
ITM a011j 13,2
ITM a011j 8,3
ITM a011j 4,0
ITM a011m 6,0
ITM a011m 10,3
ITM a011m 15,2
ITM a011n 8,4
ITM a011n 13,3
ITM a011n 4,2
ITM a011o 6,2
ITM a011o 10,4
ITM a011o 15,3
ITM a011p 4,1
ITM a011p 5,1
ITM a011p 6,1
ITM a011p 5,0
ITM a011p 5,2
ITM a011p 9,3
ITM a011p 9,4
ITM a011p 14,2
ITM a011p 14,3
ITM a011x 11,4
ITM a011x 12,0
ITM a011x 7,0
ITM a011x 6,3
ITM a011y 15,0
ITM a011y 10,0
ITM a011y 7,3
ITM a011y 12,4
ITM a011z 7,2
ITM a011z 12,1
ITM a011z 11,5
ITM a0120 10,2
ITM a0120 15,1
ITM a0120 12,5
ITM a0121 7,1
ITM a0121 8,1
ITM a0121 8,0
ITM a0121 9,0
ITM a0121 9,1
ITM a0121 10,1
ITM a0121 9,2
ITM a0121 8,2
ITM a0121 13,0
ITM a0121 14,0
ITM a0121 14,1
ITM a0121 13,1
ITM a011z 6,4
ITM a0120 7,4
ITM a011l 7,8
ITM a011l 7,7
ITM f011n 0,0
PAL a0112

ROOM a016
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,4f,4f,4f,4f,4f,4f,4f,4f,4f,0,0,0,0
0,0,0,0,4c,4e,0,0,0,4b,4d,0,0,0,0,0
0,0,0,0,0,4c,4e,0,4b,4d,0,0,0,0,0,0
0,0,0,0,0,0,4c,a015w,4d,0,0,0,0,0,0,0
0,0,0,0,0,0,4b,a015x,4e,0,0,0,0,0,0,0
0,0,0,0,0,4b,4d,0,4c,4e,0,0,0,0,0,0
0,0,0,0,4b,4d,0,0,0,4c,4e,0,0,0,0,0
0,0,0,4f,4f,4f,4f,4f,4f,4f,4f,4f,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
NAME ripple_room2_splash_screen
ITM a011c 7,5
ITM a011d 7,6
ITM a011e 7,7
ITM a011f 7,8
ITM a011g 7,9
END a010 1,15
END a010 2,14
END a010 0,14
END a010 1,13
PAL a0113

ROOM f019
0,0,0,0,0,0,0,0,0,h,i,i,i,i,h,i
0,0,0,0,0,0,0,0,0,i,i,h,i,i,i,i
0,0,0,0,0,0,0,0,0,i,i,i,i,i,i,i
0,0,0,0,0,0,0,0,0,i,2w,i,2w,i,2w,i
0,0,0,0,0,0,0,0,9,9,8,9,8,9,9,9
0,0,0,0,0,0,0,0,7,9,9,9,9,9,9,9
0,0,0,0,0,0,0,0,0,i,i,i,h,i,i,i
0,0,0,0,0,0,0,0,0,i,h,i,i,i,i,i
0,0,0,0,0,0,0,0,0,i,i,h,2w,i,i,2w
0,0,0,0,0,0,0,0,0,h,i,i,8,i,i,9
0,0,0,0,4g,4g,4g,4g,4g,i,i,i,i,a035v,a035w,i
0,0,0,4g,4g,0,0,0,0,f015p,f015p,f015p,f015p,a035t,a035u,i
4g,4g,4g,4g,f015r,f015n,f015q,2f,2g,2g,2g,2g,2g,2g,2g,2g
4g,4g,4g,4g,ccc5p,f015o,4g,2s,2v,2h,2v,2k,2h,2v,2k,2v
0,0,0,0,0,f015o,0,2s,1p,25,26,2h,25,26,1p,25
3g,3h,3g,3g,3h,3g,3i,2s,2h,4i,4h,1p,4i,4h,2h,4i
NAME entrance
ITM d011a 7,9
ITM d011a 3,8
ITM d011a 6,5
ITM d011a 6,4
ITM d011a 4,6
ITM d011a 4,1
ITM d011a 2,1
ITM d011a 2,3
ITM d011a 5,2
ITM d011a 6,3
ITM d011a 7,2
ITM d011a 6,0
ITM d011a 4,4
ITM d011a 6,10
ITM d011a 1,5
ITM d011a 4,10
ITM d011a 1,9
ITM d011a 3,12
ITM d011a 1,12
ITM d011a 0,2
ITM d011a 0,0
ITM d011b 8,0
ITM d011b 8,7
ITM d011b 6,11
ITM d 8,11
ITM d 8,3
ITM 1 10,4
ITM 2 14,4
ITM 1 8,4
ITM 10 4,13
ITM 11 12,8
ITM 11 15,8
ITM d011a 0,13
ITM e 4,14
ITM d 3,14
ITM d 2,14
ITM e 0,14
ITM d 6,14
ITM l 4,12
ITM f011l 7,11
ITM f011n 13,11
PAL 12

ROOM f01a
4m,2p,2q,d015o,4m,4m,f0164,2q,2p,2q,4m,4m,f0164,2p,2q,4m
35,34,0,1u,a0164,1t,34,35,34,0,1u,a0164,1t,34,0,35
34,0,0,5g,51,5h,35,34,0,0,5g,51,5h,0,35,34
0,0,35,34,0,35,34,0,0,0,35,34,0,35,34,0
0,12,13,0,35,34,0,0,0,35,34,0,35,12,13,0
0,1d,1e,15,2r,16,16,16,16,16,16,2r,17,1d,1e,0
0,1q,1r,34,36,15,16,16,16,16,17,36,0,1q,1r,0
0,0,34,0,36,0,0,12,13,35,34,36,0,0,0,0
1m,1m,1m,1m,36,1m,1m,1d,1e,1m,1m,36,1m,1m,1m,1m
16,16,16,16,2r,17,41,1d,1e,41,15,2r,16,16,16,16
0,0,0,35,36,f015x,41,1q,1r,41,f015x,36,42,0,0,0
0,0,35,1a,36,f015x,41,41,41,41,f015x,36,3x,42,0,0
0,35,1a,f015x,36,f015x,41,41,41,41,f015x,36,f015x,3x,42,0
35,1a,f015x,f015x,36,f015x,f015x,f015t,f015u,f015x,f015x,36,f015x,f015x,3x,42
1m,1m,1m,1m,36,1m,1m,f015w,f015v,1m,1m,36,1m,1m,1m,1m
16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16
NAME party center
ITM 15 5,1
ITM 15 12,1
ITM 14 3,1
ITM 14 10,1
ITM 18 11,3
ITM 18 10,3
ITM 18 8,3
ITM 18 7,3
ITM 18 6,3
ITM 18 5,3
ITM 18 4,3
ITM 18 3,3
ITM 18 2,3
ITM 18 2,4
ITM 18 3,6
ITM 18 3,7
ITM 18 5,7
ITM 18 10,7
ITM 18 12,7
ITM 18 12,6
ITM 18 13,7
ITM 18 14,7
ITM 18 15,7
ITM 18 2,7
ITM 18 1,7
ITM 18 0,7
ITM 18 12,10
ITM 18 3,10
ITM 18 3,11
ITM 18 12,11
ITM 18 14,13
ITM 18 15,13
ITM 18 0,13
ITM 18 1,13
ITM 18 7,13
ITM 18 8,13
ITM 18 9,8
ITM 18 9,3
ITM f 11,0
ITM f 4,0
ITM 12 12,0
ITM 13 10,0
ITM 13 3,0
ITM 12 5,0
EXT 0,8 f01b 14,8
EXT 0,14 f01b 14,14
EXT 15,8 f01c 1,8
EXT 15,14 f01c 1,14
PAL 6

ROOM f01b
0,0,0,0,0,0,e,o,35,2q,0,4m,f0164,2q,2p,2q
0,0,0,0,0,e,o,35,34,0,1u,a0164,1t,35,34,0
0,0,0,0,e,o,35,34,0,0,5g,51,5h,34,0,35
0,0,0,e,o,35,34,0,0,35,34,35,34,0,35,34
0,0,e,o,35,34,0,0,35,55,35,34,f015j,35,34,0
0,ccc5l,ccc5k,ccc5k,ccc5j,0,0,15,16,16,16,16,16,16,17,0
0,0,c025k,34,0,0,35,34,15,16,16,16,16,17,0,0
0,0,c025l,0,0,35,34,35,34,0,35,34,0,0,0,0
0,0,c025j,1m,1m,1m,1m,1m,1m,1m,1m,1m,1m,1m,1m,1m
15,16,16,2r,16,17,41,41,41,41,15,16,16,2r,16,16
0,n,i,36,1a,41,41,41,41,41,41,3x,42,36,0,0
0,0,i,36,f015x,41,41,41,41,41,41,41,3x,36,0,0
0,35,h,36,f015x,41,41,41,41,41,41,41,f015x,36,42,0
0,0,i,36,f015x,f015x,f015x,f015y,f015y,f015x,f015x,f015x,f015x,36,3x,42
0,0,i,36,1m,1m,c025k,c025k,c025k,c025k,1m,1m,1m,36,1m,1m
0,0,f015s,16,16,16,16,16,16,16,16,16,16,16,16,16
NAME party left
ITM 3 7,12
ITM 3 8,12
ITM 1 6,14
ITM 1 8,14
ITM 2 9,14
ITM 2 7,14
ITM d011b 4,1
ITM d011b 2,2
ITM d011a 1,0
ITM d011a 4,0
ITM d011a 0,2
ITM d011a 1,12
ITM d011a 0,14
ITM d 1,4
ITM d 3,2
ITM f 11,0
ITM 18 14,13
ITM 18 15,13
ITM 18 14,12
ITM 18 14,11
ITM 18 14,10
ITM 18 12,7
ITM 18 13,7
ITM 18 14,7
ITM 18 15,7
ITM 18 12,10
ITM 18 2,7
ITM 18 3,7
ITM 18 4,7
ITM 18 4,10
ITM 18 13,4
ITM 18 12,3
ITM 18 11,3
ITM 18 10,3
ITM 18 12,11
ITM 7 9,13
ITM 6 6,13
ITM 14 10,1
ITM 15 12,1
ITM 13 10,0
ITM 12 12,0
ITM f011q 7,13
ITM f011q 8,13
EXT 12,4 f01d 2,12
EXT 15,14 f01a 1,14
EXT 15,8 f01a 1,8
END e011 9,4
PAL 6

ROOM f01c
2p,2q,4m,4m,4m,4m,f0164,2q,n,i,j,21,g,4g,0,0
34,0,0,1u,a0164,1t,34,35,34,n,j,c025o,f015k,0,4g,0
0,0,0,5g,51,5h,35,34,0,0,j,f015k,g,0,4g,4g
0,0,35,34,0,35,34,0,0,0,c025k,f015k,g,0,0,4g
0,12,13,0,35,34,0,12,13,35,c025l,f015k,g,f,0,4g
0,1q,1r,35,34,0,0,1q,1r,34,c025l,c025o,c025k,i,0,4g
0,0,35,34,0,0,0,35,34,0,c025l,21,c025l,h,0,4g
0,35,34,0,0,0,35,34,0,35,c025l,21,c025l,i,0,4g
1m,1m,1m,1m,1m,1m,1m,1m,1m,1m,c025j,21,c025j,i,0,4g
16,16,16,16,2r,16,16,16,16,16,16,16,16,f015s,0,4g
0,0,0,35,36,41,41,41,41,41,41,41,41,i,0,4g
0,0,35,1a,36,41,41,41,41,41,41,41,f015j,h,0,0
0,35,1a,41,36,41,1x,f015n,1y,1y,1y,1z,41,i,b,4g
35,1a,41,41,36,41,2b,f015o,2c,2c,2c,2d,41,h,0,0
1m,1m,1m,1m,36,1m,2b,f015o,2c,2c,2c,2d,1m,i,0,0
16,16,16,16,16,16,16,16,16,16,16,16,16,f015s,0,0
NAME party right
ITM d011a 14,3
ITM d011a 15,7
ITM d011a 14,0
ITM d011a 14,11
ITM d011a 15,9
ITM d011a 15,14
ITM d011a 13,1
ITM ccc1d 7,4
ITM ccc1e 8,4
ITM ccc1c 8,5
ITM ccc1b 7,5
ITM 18 1,13
ITM 18 0,13
ITM 18 3,13
ITM 18 5,13
ITM 18 5,10
ITM 18 5,11
ITM 18 5,12
ITM 18 3,10
ITM 18 3,11
ITM 18 3,12
ITM 18 6,10
ITM 18 7,10
ITM 18 8,10
ITM 18 6,12
ITM 18 6,13
ITM 18 8,12
ITM 18 8,13
ITM 18 9,12
ITM 18 9,13
ITM 18 10,12
ITM 18 10,13
ITM 18 11,13
ITM 18 11,12
ITM 18 11,10
ITM 18 12,10
ITM 18 10,10
ITM 18 12,8
ITM 18 12,7
ITM 18 12,6
ITM 18 12,5
ITM 18 10,7
ITM 18 10,6
ITM 18 10,5
ITM 18 9,7
ITM 18 8,7
ITM 18 7,7
ITM 18 6,7
ITM 18 5,7
ITM 18 4,7
ITM 18 3,7
ITM 18 2,7
ITM 18 11,4
ITM 15 5,1
ITM 14 3,1
ITM 18 1,7
ITM 18 0,7
ITM f011p 11,2
ITM f 4,0
ITM 12 5,0
ITM 13 3,0
EXT 12,11 f01c 14,11
EXT 14,11 f01c 12,11
EXT 0,8 f01a 14,8
EXT 0,14 f01a 14,14
EXT 11,0 f01d 12,14
END a010 15,11
PAL 6

ROOM f01d
0,0,0,0,0,0,0,p,q,h,i,j,0,0,0,0
0,f0160,f0161,0,0,0,0,5,d,p,j,6,0,0,0,0
0,f0162,f0163,0,0,k,0,0,d015n,d,g,h,i,j,0,0
0,0,4g,0,1,4,d015u,d015w,1,4,g,i,h,i,j,0
0,0,0,p,r,21,r,s,4,p,q,q,q,i,0,0
0,0,0,0,j,21,f015z,d015l,d015n,4,4,c,2,h,0,0
0,0,0,0,j,21,5,d015u,d015v,d,4,4,d,h,0,0
0,0,0,0,j,21,4g,0,d015n,d015l,d015m,d015n,4,d,0,0
0,0,0,0,j,21,d015v,d015w,d,0,0,0,d015n,6,0,0
0,0,0,0,j,21,p,r,21,r,s,0,d015v,h,0,0
0,0,0,0,j,21,k,f015z,21,6,0,k,4,h,0,0
i,i,i,h,j,21,f015z,f015z,21,f015z,f015z,f015z,d,i,0,0
h,4,f015j,d,k,c025o,d,4,21,4,4,d,4,i,0,0
i,h,i,i,i,i,h,i,i,h,i,j,21,g,0,0
i,i,h,i,i,i,h,h,h,i,i,j,21,g,0,0
i,h,i,i,h,h,i,i,i,h,i,j,21,g,0,0
NAME party top
ITM d011b 3,8
ITM d011b 3,6
ITM d011a 6,7
ITM d011a 11,8
ITM d011a 13,0
ITM d011a 15,4
ITM d011a 15,11
ITM d011a 14,6
ITM d011a 14,13
ITM d011a 1,8
ITM d011a 7,2
ITM d011a 2,0
ITM d 3,3
ITM e 14,2
ITM e 12,1
ITM 8 13,7
ITM d011a 10,10
ITM d011a 0,2
ITM d011a 1,5
ITM 2 10,9
ITM 1 9,9
ITM 1 6,9
ITM 1 6,4
ITM 2 8,1
ITM 1 10,5
ITM 7 7,12
ITM 6 6,12
ITM 6 10,12
ITM d011b 2,10
ITM e 3,10
ITM 2 6,5
ITM 18 12,11
ITM 18 9,10
ITM 18 9,7
ITM 18 8,7
ITM 18 7,7
ITM 18 6,6
ITM 18 5,2
ITM 18 6,2
ITM 18 4,2
ITM d011b 0,10
ITM d011a 3,2
ITM d011a 1,1
ITM 18 2,2
ITM 18 2,1
ITM 18 3,0
ITM 18 4,0
ITM 18 5,0
ITM 18 6,0
ITM 18 7,1
ITM f011r 6,1
EXT 2,12 f01b 12,4
EXT 12,15 f01c 11,1
PAL 11

ROOM f01e
4,0,4,4,3,4,4,4,4,4,4,4,d015l,d015m,5,4
4,4,4,d,4,2,k,5,6,0,4,4,d015u,k,1,4
3,4,4,4,3,4,3,4,4,4,3,4,4,4,d,4
4,6,d015x,d015n,4,d,4,4,c,4,2,d015w,4,4,4,4
4,4,2,1,3,4,4,6,1,4,3,4,4,6,k,5
c,4,4,4,4,d015m,4,4,4,4,4,4,1,4,3,4
6,0,d,4,2,0,1,4,d,6,d015x,1,2,4,4,4
4,4,4,4,4,4,6,d015m,4,4,4,4,4,d,3,4
4,d015l,0,d015n,4,6,d015v,d015w,4,d,3,4,4,4,3,4
4,d015u,1,4,4,4,4,c,4,4,6,d015m,k,5,4,c
d,4,3,4,d,3,4,4,3,4,4,4,d015u,d015w,4,4
4,6,d015w,4,3,4,5,3,d015x,d015n,4,d,4,4,d,4
4,6,4,6,5,4,4,d015l,6,1,2,5,4,3,4,4
4,4,4,4,4,4,6,1,4,4,4,4,4,d,1,4
4,d,3,4,d,3,4,d015l,d015m,3,4,2,k,4,4,4
3,4,4,4,4,4,2,d015v,1,4,4,4,4,4,3,3
PAL 7

TIL 1
00000000
00000001
00011011
00111011
00000000
00000111
00011111
11011111
NAME bg brick 01
COL 3

TIL 2
00000000
11110000
11111000
11111000
00000000
10011010
11011111
11011110
NAME bg brick 02
COL 3

TIL 3
00000000
11101000
11111010
11111011
00000000
10001111
11011111
01011110
NAME bg brick 03
COL 3

TIL 4
00000000
01110001
11111011
11111011
00000000
10011111
11011111
11011111
NAME bg brick 04
COL 3

TIL 5
00000000
00110001
01111011
00011011
00000000
00001111
00000111
00000001
NAME bg brick 05
COL 3

TIL 6
00000000
11000011
11101010
11111000
00000000
10001100
11011000
11000000
NAME bg brick 06
COL 3

TIL 7
00000000
00000000
00111111
00111111
00000000
00011101
00011101
00011101
NAME light brick 01
WAL true
COL 4

TIL 8
00000000
00000000
00111011
10010011
00000000
11011001
11111101
00111100
NAME light brick 02
WAL true
COL 4

TIL 9
00000000
00000000
11011111
11011111
00000000
11111101
11111101
11111101
NAME light brick 03
WAL true
COL 4

TIL 10
11111111
11111111
11111111
11111111
11111111
11111111
11111111
11111111
NAME bg solid
COL 3

TIL 11
11000000
10000000
10000000
10000000
11000000
00000000
00000000
00000000
NAME bg edge 02
COL 3

TIL 12
00000000
00001111
00010001
00100001
01000001
01000001
01000001
01111111
NAME main window 10

TIL 13
00000000
11110000
10001000
10000100
10000010
10000010
10000010
11111110
NAME main window 11

TIL 14
00000000
01011110
00000000
01111010
01111110
00000000
01011110
00000000
NAME main post 01
WAL true

TIL 15
11110111
01110111
00000000
00111111
00111111
00000000
00011111
00000000
NAME light platform 01
WAL true
COL 4

TIL 16
11101111
11101111
00000000
11111111
11111111
00000000
11111111
00000000
NAME light platform 02
WAL true
COL 4

TIL 17
11101111
11101110
00000000
11111100
11111100
00000000
11111000
00000000
NAME light platform 02
WAL true
COL 4

TIL 20
00001000
01111110
01111110
01111110
01111110
00101000
01111110
01111110
NAME main pillar 02
WAL true

TIL 21
01000010
01000010
11111111
10111101
01000010
01000010
11111111
10111101
NAME main ladder 03

TIL 22
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME main bar 01
WAL true

TIL 23
00000000
11111111
00110001
00011000
00001100
00000110
00000011
00000001
NAME main bar 03
WAL true

TIL 24
01010000
01001111
01010111
01010111
01001000
01011011
01010111
01011111
NAME main brick 13
WAL true

TIL 25
00000000
11110000
11100111
11001000
00010000
10100000
10100000
10100000
NAME main window 01

TIL 26
00000000
00001111
11100111
00010011
00001000
00000101
00000101
00000101
NAME main window 02

TIL 27
00001010
11110010
11101010
11101010
00010010
11011010
11101010
11111010
NAME main brick 12
WAL true

TIL 28
00000000
11111111
10001100
00011000
00110000
01100000
11000000
10000000
NAME main bar 02
WAL true

TIL 29
00000000
00111100
00000000
00011000
00000000
00011000
00011000
00011000
NAME main candle 05

TIL 30
00000000
00000000
00000000
00000000
01111110
11111111
11111111
11111111
NAME bg culvert 01
COL 3

TIL 31
00000000
00000000
00000000
00000000
00000000
10000000
11000000
11100000
NAME  108

TIL 32
00000000
00000000
00000000
00000000
00000000
10000000
11000000
11100000
NAME bg corner 02
COL 3

TIL 33
11110000
01111000
00111100
00011110
00001111
00000111
00000011
00000001
NAME bg support 05
COL 3

TIL 34
00001111
00011110
00111100
01111000
11110000
11100000
11000000
10000000
NAME bg support 06
COL 3

TIL 35
00000000
00000000
00000000
00000000
00000000
00000001
00000011
00000111
NAME bg corner 01
COL 3

TIL 36
00100100
00111100
00100100
00111100
00100100
00111100
00100100
00111100
NAME main ladder 02

TIL 37
01000000
00011011
01011101
01001111
00000000
01000000
00010101
00000000
NAME main brick 07
WAL true

TIL 38
00000000
10111111
11011111
11111111
00000000
00000000
01010101
00000000
NAME main brick 08
WAL true

TIL 39
00011000
00011000
00011000
00011000
00000000
00111100
00000000
01111110
NAME main lantern 02

TIL 40
11110000
11100000
11000000
10000000
00000000
00000000
00000000
00000000
NAME bg corner 03
COL 3

TIL 41
11111011
11110101
11111011
11111111
10111111
01011111
10111111
11111111
NAME bg wallpaper 01
COL 3

TIL 42
00000000
00000000
00000000
00000000
10000000
01000000
10100000
11110000
NAME bg wallpaper 02
COL 3

TIL 43
00001111
00000111
00000011
00000001
00000000
00000000
00000000
00000000
NAME bg corner 04
COL 3

TIL 44
11111111
01111111
00111111
00011111
00001111
00000111
00000011
00000001
NAME bg diag 03
COL 3

TIL 45
11111111
11111110
11111100
11111000
11110000
11100000
11000000
10000000
NAME bg diag 04
COL 3

TIL 46
00000001
00000011
00000111
00001111
00011111
00111111
01111111
11111111
NAME main diag 01
WAL true

TIL 47
10000000
11000000
11100000
11110000
11111000
11111100
11111110
11111111
NAME light diag 02
WAL true

TIL 48
11111111
11111111
11111111
11111111
11111111
11111111
11111111
11111111
NAME main solid
WAL true

TIL 49
11111111
01111111
00111111
00011111
00001111
00000111
00000011
00000001
NAME main diag 03
WAL true

TIL 50
11111110
11111110
11111110
11111100
11111000
11111001
11110000
11100000
NAME splash screen 19
COL 2

TIL 51
10011001
01111110
00011000
11111111
00111100
00011000
00111100
01111110
NAME main candle 01

TIL 52
00000000
00111100
01100110
01111010
01111010
01111010
01111110
00000000
NAME block 01
WAL true

TIL 53
00000000
00111100
00100100
00110100
00111100
10000001
11111111
00000000
NAME block 02
WAL true

TIL 54
00011000
00011000
01110110
01101110
00011000
00011000
00111100
00000000
NAME cross 02
WAL true

TIL 55
01111110
11000011
10000101
10000001
10001101
10000001
10111101
10000001
NAME EXIT HERE
COL 2

TIL 56
00111100
01000010
10000001
10011001
10111101
10111101
10111101
10111101
NAME ENTRANCE HERE
COL 3

TIL 57
00000000
01011110
00000000
01111010
01111110
00000000
01011110
00000000
NAME light post 01
WAL true
COL 4

TIL 58
00111100
01111110
00011100
01111110
00101100
01111110
00111110
01111110
NAME main post 01
WAL true

TIL 59
00111100
01111110
00011100
01111110
00101100
01111110
00111110
01111110
NAME bg post 01
WAL false
COL 3

TIL 80
10000001
00000011
00000011
00000111
11000110
11001111
11101111
11001100
NAME splash screen 109
COL 2

TIL 81
11111100
11110000
10000000
00000000
00000000
00000000
00000000
00000000
NAME splash screen 110
COL 2

TIL 82
00011100
00111000
00111000
01111000
01111100
01111111
01111111
00111111
NAME splash screen 111
COL 2

TIL 83
00011101
00011101
00111011
01111011
11110011
11100011
11000011
10000011
NAME splash screen 112
COL 2

TIL 84
11100000
11000000
11000001
10000011
10000111
10011111
11111110
11111100
NAME splash screen 113
COL 2

TIL 85
11100111
11101111
11001111
11001100
10011100
00011000
00111000
00111000
NAME splash screen 114
COL 2

TIL 86
11100000
11100000
11100000
01110000
01110000
00111000
00011000
00011100
NAME splash screen 115
COL 2

TIL 87
00000000
00000000
00000000
00000000
00000000
00000000
00000001
00000111
NAME splash screen 116
COL 2

TIL 88
00000000
00000000
00000000
00000000
00000111
01111111
11111100
11100000
NAME splash screen 117
COL 2

TIL 89
00000000
00000011
00011111
11111111
11111000
10000010
00001000
00000000
NAME splash screen 118
COL 2

TIL 90
00000110
00111110
11111000
11100001
10000001
00000000
00000000
00000000
NAME splash screen 145
COL 2

TIL 91
11111000
11110000
11110000
11100000
11100000
11000000
00000000
00000000
NAME splash screen 146
COL 2

TIL 92
11100000
11100000
11110000
01110000
01110000
00111000
00111000
00111000
NAME splash screen 147
COL 2

TIL 93
11110000
11110000
10100000
10000000
10000000
00000000
00000000
00000000
NAME splash screen 148
COL 2

TIL 94
00011100
00011100
00001010
00001100
00000100
00000010
00000000
00000000
NAME splash screen 149
COL 2

TIL 95
01101000
01111100
01101100
01101101
01101101
01101101
00101100
00000100
NAME splash ui 150
COL 4

TIL 96
00000000
00000000
11100101
10110101
11110101
10000111
11100101
00000000
NAME splash ui 151
COL 4

TIL 97
00000000
00000000
01000000
01000000
01000000
11000000
01000000
00000000
NAME splash ui 152
COL 4

TIL 98
01111000
01101101
01100000
01101100
01101101
01101101
00111100
00001100
NAME splash ui 153
COL 4

TIL 99
00000000
00000000
11100101
00110111
11110101
10110101
11010101
00000000
NAME splash ui 154
COL 4

TIL a
11111111
10000001
10000001
10011001
10011001
10000001
10000001
11111111
COL 4

TIL b
00000000
00000000
11011100
11011100
00000000
11111000
11111000
11111000
NAME light brick 05
WAL true
COL 4

TIL c
00000000
00111000
01111100
01111110
01111110
00111100
00011100
00000000
NAME bg stone 01
COL 3

TIL d
11100000
00000011
01110011
11111000
01110110
00000110
01100110
00000000
NAME bg stone 02
COL 3

TIL e
00000000
00000001
00000011
00000111
00000000
00011101
00111101
01111101
NAME light brick 07
WAL true
COL 4

TIL f
00000000
10000000
11000000
11100000
00000000
11101000
11101100
11101110
NAME light brick 08
WAL true
COL 4

TIL g
00000000
00111111
00111111
00111111
00000000
00011101
00011101
00011101
NAME light brick 09
WAL true
COL 4

TIL h
00000000
11011110
10001111
10011001
00000000
11111101
11111101
10010000
NAME light brick 10
WAL true
COL 4

TIL i
00000000
11011111
11011111
11011111
00000000
11111101
11111101
11111101
NAME light brick 11
WAL true
COL 4

TIL j
00000000
10111100
10111100
10111100
00000000
11111000
11111000
11111000
NAME light brick 12
WAL true
COL 4

TIL k
00000000
00000000
00000000
00001000
00000010
00010111
00010111
00000000
NAME bg stone 03
COL 3

TIL l
00000001
00000011
00000111
00001111
00011111
00111111
01111111
11111111
NAME bg diag 01
COL 3

TIL m
10000000
11000000
11100000
11110000
11111000
11111100
11111110
11111111
NAME bg diag 02
COL 3

TIL n
00000000
01111111
00111111
00011111
00000000
00000111
00000011
00000001
NAME light brick 13
WAL true
COL 4

TIL o
00000000
11011110
11011100
11011000
00000000
11100000
11000000
10000000
NAME light brick 14
WAL true
COL 4

TIL p
00000000
00111111
00111111
00111111
00000000
00110111
00000000
00000000
NAME light brick 15
WAL true
COL 4

TIL q
00000000
10011001
11011111
11000110
00000000
10001111
00000000
00000000
NAME light brick 16
WAL true
COL 4

TIL r
00000000
11011111
11011111
11011111
00000000
11110111
00000000
00000000
NAME light brick 17
WAL true
COL 4

TIL s
00000000
10111100
10111100
10111100
00000000
11101100
00000000
00000000
NAME light brick 18
WAL true
COL 4

TIL z
00000011
00000001
00000001
00000001
00000011
00000000
00000000
00000000
NAME bg edge 01
COL 3

TIL 1a
00001011
00010101
00111011
01111111
10111111
01011111
10111111
11111111
NAME bg wallpaper 03
COL 3

TIL 1b
00000100
00001010
00000100
00000000
11111111
10111111
01011111
10111111
NAME bg wallpaper 07
COL 3

TIL 1c
00000000
00111110
01111110
01110000
00000000
01111100
01111110
00000000
NAME light ladder 01
COL 4

TIL 1d
01000001
01000001
01000001
01111111
01000001
01000001
01000001
01111111
NAME main window 12

TIL 1e
10000010
10000010
10000010
11111110
10000010
10000010
10000010
11111110
NAME main window 13

TIL 1f
00111100
01111110
00011100
01111110
00101100
01111110
00111110
01111110
NAME light post 02
WAL true
COL 4

TIL 1g
11100000
10010000
10010000
01111000
00011110
00001001
00001001
00000111
NAME light stairs 01
WAL true
COL 4

TIL 1h
00000111
00001001
00001001
00011110
01111000
10010000
10010000
11100000
NAME light stairs 02
WAL true
COL 4

TIL 1i
00000000
00000000
00111100
00110100
00111100
00111100
00111100
00111100
NAME bg plank 01
COL 3

TIL 1l
11111011
11110101
11111011
11111111
10111111
01011111
00111111
00011111
NAME bg wallpaper 05
COL 3

TIL 1m
00000000
11111111
00000000
10101010
10101010
10101010
10101010
10101010
NAME bg panel 01
COL 3

TIL 1n
00000000
11111111
00000000
01010100
00101010
00000000
01111110
01111110
NAME main pillar 01
WAL true

TIL 1o
00000000
01110000
01111110
00011110
00000000
01111110
00111110
00000000
NAME light ladder 02
COL 4

TIL 1p
00000000
10111011
11110111
11110111
01000000
00111111
01011011
00011011
NAME main brick 10
WAL true

TIL 1q
01000001
01000001
01000001
01000001
01111111
00000000
10000000
11111111
NAME  main window 14

TIL 1r
10000010
10000010
10000010
10000010
11111110
00000000
00000001
11111111
NAME main window 15

TIL 1s
00000000
10111110
11111111
11101111
00000000
11111100
10111001
11011010
NAME  main brick 11
WAL true

TIL 1t
00000000
11110000
00000000
01100000
00000000
01001111
01000000
01000110
NAME main candle 06

TIL 1u
00000000
00001111
00000000
00000110
00000000
11110010
00000010
01100010
NAME main candle 04

TIL 1v
00111100
00111100
00101100
00111100
00000000
00111100
00110100
00111100
NAME bg plank 02
COL 3

TIL 1x
00000000
01111111
01000000
01000000
01011000
01011010
01011010
01000000
NAME bg books 01
COL 3

TIL 1y
00000000
11111111
00000000
00000000
10001101
10101101
10101101
00000000
NAME bg books 01
COL 3

TIL 1z
00000000
11111110
00000010
00000010
00011010
01011010
01011010
00000010
NAME bg books 03
COL 3

TIL 2a
00111100
00111100
00111100
00111100
00111100
00111100
00111100
00111100
NAME bg plank 03
COL 3

TIL 2b
01011111
01000000
01000000
01000110
01010110
01010110
01010110
01000000
NAME bg books 04
COL 3

TIL 2c
11111111
00000000
00000000
00101000
00101011
10101011
10101011
00000000
NAME bg books 05
COL 3

TIL 2d
11111010
00000010
00000010
01100010
01101010
01101010
01101010
00000010
NAME bg books 06
COL 3

TIL 2e
00001000
01111110
01111110
00101010
01010100
00101010
00000000
11111111
NAME main pillar 03
WAL true

TIL 2f
00000000
00111111
01000000
01011111
01010100
01011111
01001011
01011111
NAME main brick 01
WAL true

TIL 2g
00000000
11111111
00000000
11111111
01001000
11111111
01110110
11111111
NAME main brick 02
WAL true

TIL 2h
01000100
10110111
01111111
11110111
01000000
11111011
10011011
11111111
NAME main brick 14
WAL true

TIL 2i
00100000
10100000
10100000
10100000
00100000
10100000
10111111
10000000
NAME main window 05

TIL 2j
00000100
00000101
00000101
00000101
00000100
00000101
11111101
00000001
NAME main window 08

TIL 2k
00100010
11101101
11111110
11101111
00000010
11011111
11011001
11111111
NAME main brick 05
WAL true

TIL 2l
00000000
11111100
00000010
11111010
01001010
11111010
10100010
11111010
NAME main brick 03
WAL true

TIL 2m
00111100
00111100
00111100
00111100
00101100
00111100
00000000
00000000
NAME bg plank 04
COL 3

TIL 2n
00000000
11111111
00000000
00011110
00001111
00000111
00000011
00000001
NAME bg support 01
COL 3

TIL 2o
00000000
11111111
00000000
00011000
00001100
10000110
11000011
11100001
NAME  bg support 02
COL 3

TIL 2p
00000000
11111111
00000000
00011000
00110000
01100001
11000011
10000111
NAME bg support 03
COL 3

TIL 2q
00000000
11111111
00000000
01111000
11110000
11100000
11000000
10000000
NAME bg support 04
COL 3

TIL 2r
00100100
10111101
00100100
00111100
00100100
00111100
00100100
00111100
NAME main ladder 01

TIL 2s
01000000
01010111
01001111
01011111
01000000
01011011
01011011
01010101
NAME main brick 04
WAL true

TIL 2t
00000000
11111010
11011101
10111111
00000000
11111101
11111101
11111010
NAME main brick 15
WAL true

TIL 2u
00000000
10110111
11010111
11110111
00000000
11111101
11111101
11111110
NAME main brick 10
WAL true

TIL 2v
00000000
10111101
11011111
10101111
00000000
11111101
11111101
11111101
NAME main brick 16
WAL true

TIL 2w
01111110
11000011
10000001
10000001
10000001
10000001
10000001
11111111
NAME main window 09

TIL 2x
00111100
01100110
01000010
01000010
01000010
01000010
00111100
00011000
NAME main lantern 01

TIL 2y
00000010
11101010
11011010
11111010
00000010
11111010
11111010
10101010
NAME main brick 06
WAL true

TIL 2z
00000000
00000000
00000000
00000000
00000000
00000001
00000011
00000111
NAME  106

TIL 3a
00000010
11011000
11101010
11110010
00000000
00000010
10101000
00000000
NAME main brick 09
WAL true

TIL 3b
00000111
00001111
00001111
00001111
00001111
00001111
00001111
00001111
NAME bg culvert 02
COL 3

TIL 3c
10000001
00000000
00000000
00000000
00000000
00000000
00000000
01111110
NAME bg culvert 05
COL 3

TIL 3d
11100000
11110000
11110000
11110000
11110000
11110000
11110000
11110000
NAME bg culvert 04
COL 3

TIL 3e
00000000
00000000
00000000
00000000
00000000
00000000
00111100
00011000
NAME main sconce 01

TIL 3f
00111011
01100111
11111000
11011100
11000001
10010111
10111000
11000011
NAME light dirt 01
WAL true
COL 4

TIL 3g
11101111
11111111
10000000
00110111
11000000
11101101
00011101
11011000
NAME light dirt 02
WAL true
COL 4

TIL 3h
01111110
11111111
10000001
10011110
00111110
10011100
11000000
11000111
NAME light dirt 03
WAL true
COL 4

TIL 3i
01111100
11111110
11000011
00011111
11101101
11101111
01101101
00100101
NAME light dirt 04
WAL true
COL 4

TIL 3j
00000011
00000001
00000000
00000000
00000000
00000000
00000000
00000000
NAME  126

TIL 3k
11111111
11111111
11111111
11111111
00000000
00000000
00000000
00000000
NAME bg culvert 06
COL 3

TIL 3l
11000000
10000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME  128

TIL 3m
11100100
10101110
10000111
11001011
10111001
11011100
10011100
10101100
NAME light dirt 05
WAL true
COL 4

TIL 3n
10001101
00110011
00011000
10000000
11010011
00011001
10001000
11000111
NAME light dirt 06
WAL true
COL 4

TIL 3o
00001110
01110010
00111000
10011100
11000001
00011101
10111000
11000010
NAME light dirt 07
WAL true
COL 4

TIL 3p
11000001
11100101
11101111
01101110
00000101
10111001
10011101
10001101
NAME light dirt 08
WAL true
COL 4

TIL 3q
00000000
00000000
00000000
00000010
00000000
00010001
00000001
00001011
NAME  133

TIL 3r
11111111
01110101
01010001
00010001
01010000
01010000
00010000
00000000
NAME  134
WAL false

TIL 3s
00000000
00000000
00000000
01000000
00000000
10001000
10000000
11010000
NAME  135

TIL 3t
10100011
10110111
11110111
11110110
10100000
10011101
11101001
01111111
NAME  light dirt 09
WAL true
COL 4

TIL 3u
11001110
10111111
00000000
01111100
10111110
10000001
00111011
11101111
NAME light dirt 10
WAL true
COL 4

TIL 3v
11100111
00001111
00101110
01100000
11101100
11011110
00001100
11110111
NAME light dirt 11
WAL true
COL 4

TIL 3w
00100111
01110101
11100001
11010011
10011101
10111011
01100110
10111110
NAME light dirt 12
WAL true
COL 4

TIL 3x
11111000
11110100
11111010
11111111
10111111
01011111
10111111
11111111
NAME bg wallpaper 04
COL 3

TIL 3y
11111011
11110101
11111011
11111111
10111111
01011110
10111100
11111000
NAME bg wallpaper 06
COL 3

TIL 3z
00011011
00000101
00000011
00000001
00000000
00000000
00000000
00000000
NAME bg wallpaper 05
COL 3

TIL 4a
11111111
11111110
11111100
11111000
11110000
11100000
11000000
10000000
NAME main diag 04
WAL true

TIL 4b
00000001
00000011
00000111
00001111
00011111
00111111
01111111
11111111
NAME light diag 01
WAL true
COL 4

TIL 4c
11111111
01111111
00111111
00011111
00001111
00000111
00000011
00000001
NAME light diag 03
WAL true
COL 4

TIL 4d
11111111
11111110
11111100
11111000
11110000
11100000
11000000
10000000
NAME light diag 04
WAL true
COL 4

TIL 4e
10000000
11000000
11100000
11110000
11111000
11111100
11111110
11111111
NAME light diag 02
WAL true
COL 4

TIL 4f
11111111
11111111
11111111
11111111
11111111
11111111
11111111
11111111
NAME light solid
WAL true
COL 4

TIL 4g
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME dark solid
WAL true

TIL 4h
00000100
00000101
00000101
00000101
00000100
00000101
00000101
00000101
NAME main window 04

TIL 4i
00100000
10100000
10100000
10100000
00100000
10100000
10100000
10100000
NAME main window 03

TIL 4j
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

TIL 4k
00000000
00000000
00000000
00000000
00000000
00000000
11111111
00000000
NAME main window 07

TIL 4l
00000000
11111111
10001100
00011000
00110000
01100000
11000000
10000000
NAME bg bar 02
COL 3

TIL 4m
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME bg bar 01
COL 3

TIL 4n
00000000
11111111
00110001
00011000
00001100
00000110
00000011
00000001
NAME bg bar 03
COL 3

TIL 4o
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME light bar 01
WAL true
COL 4

TIL 4p
00000000
11111111
00110001
00011000
00001100
00000110
00000011
00000001
NAME light bar 03
WAL true
COL 4

TIL 4q
00000000
11111111
10001100
00011000
00110000
01100000
11000000
10000000
NAME light bar 02
WAL true
COL 4

TIL 4w
00011000
00111100
01011010
11111111
11111111
01011010
00111100
00011000
NAME cross 01
WAL true

TIL 4y
00000000
00000000
00000000
00000000
11111111
11111111
01000010
01000010
NAME table 01

TIL 5a
00000000
01011110
00000000
01111010
01111110
00000000
01011110
00000000
NAME bg post 02
WAL false
COL 3

TIL 5b
00000000
01111110
00010100
01111110
00101100
01111110
00000000
00000000

TIL 5c
00000111
00001001
00001001
00011110
01111000
10010000
10010000
11100000
NAME main stairs 01
WAL true

TIL 5d
11100000
10010000
10010000
01111000
00011110
00001001
00001001
00000111
NAME main stairs 02
WAL true

TIL 5e
00000111
00001001
00001001
00011110
01111000
10010000
10010000
11100000
NAME bg stairs 01
COL 3

TIL 5f
11100000
10010000
10010000
01111000
00011110
00001001
00001001
00000111
NAME bg stairs 02
COL 3

TIL 5g
01100001
00110000
00011100
00000111
00000000
00000000
00000000
00000000
NAME main candle 03

TIL 5h
10000110
00001100
00111000
11100000
00000000
00000000
00000000
00000000
NAME main candle 02

TIL 5i
00111100
01000110
10001111
10011101
10111001
11110001
01100010
00111100
NAME DO NOT DELETE

TIL 7c
00000000
00000000
11101110
10100100
11000100
10100100
11101110
00000000
NAME splash top 85

TIL 7d
00000000
00000000
11100110
01001000
01001110
01000010
01001100
00000000
NAME splash top 86

TIL 7e
00000000
00000000
01100110
10001010
10001010
10001010
01101100
00000000
NAME splash top 87

TIL 7f
00000000
00000000
11101100
10101010
11001010
10101010
10101110
00000000
NAME splash top 88

TIL 7g
00000000
00000000
00011101
00010101
00011101
00010001
00010001
00000000
NAME splash top 89

TIL 7h
00000000
00000000
11011100
01010001
10011001
01010000
01011101
00000000
NAME splash top 90

TIL 7i
00000000
00000000
11011101
00010001
11011001
01010001
10011101
00000000
NAME splash top 91

TIL 7j
00000000
00000000
10011100
01001001
01001001
01001000
01001001
00000000
NAME splash top 92

TIL 7k
00000000
00000000
11000000
00000000
11000000
01000000
10000000
00000000
NAME splash top 93

TIL 7l
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000111
NAME splash screen 94
COL 2

TIL 7m
00000000
00000000
00000000
00000000
00000000
00110000
11111000
11111000
NAME splash screen 95
COL 2

TIL 7n
00000000
00000000
00000000
00000011
00000111
00001111
00111111
01111110
NAME splash screen 96
COL 2

TIL 7o
00011111
00111111
11111111
11111111
11111000
11000000
00000001
00000011
NAME splash screen 97
COL 2

TIL 7p
11111000
11111001
11111001
11110000
01110000
11100000
11000000
11000001
NAME splash screen 98
COL 2

TIL 7q
00011111
11111111
11111000
11110000
01110000
11100001
11100111
11111111
NAME splash screen 99
COL 2

TIL 7r
11100000
11111001
00111001
00111011
01110111
11101111
11001110
10011100
NAME splash screen 100
COL 2

TIL 7s
11110000
11111000
11111100
10011100
00001100
00001110
00001110
00001110
NAME splash screen 101
COL 2

TIL 7t
00000111
00001111
00011111
00111100
00111000
01111000
11110000
11100000
NAME splash screen 102
COL 2

TIL 7u
00000000
11000000
11000001
11000001
01100011
01100011
01100011
01100111
NAME splash screen 103
COL 2

TIL 7v
11000000
11100001
11100011
11000111
11001111
10011110
10111000
11110000
NAME splash screen 104
COL 2

TIL 7w
00000000
11000000
11000000
10000000
00000000
00000000
00000000
00000000
NAME splash screen 105
COL 2

TIL 7x
00000000
00000000
00000001
00000001
00000001
00000000
00000000
00000000
NAME splash screen 106
COL 2

TIL 7y
11111000
11110000
11111111
11111111
11111111
01011111
00000000
00000000
NAME splash screen 107
COL 2

TIL 7z
00000001
00000000
00000000
11111110
11111111
11111111
00000011
00000011
NAME splash screen 108
COL 2

TIL 8a
00111111
11111111
11111111
11111111
01111000
10000000
00000000
00000000
NAME splash screen 119
COL 2

TIL 8b
11001000
11000000
11000011
00111111
01111111
01111111
11111100
11100001
NAME splash screen 120
COL 2

TIL 8c
00000000
00011111
11111111
11111111
11111111
11111100
11111000
11111000
NAME splash screen 121
COL 2

TIL 8d
00011110
11110000
11100100
11110000
00000000
00001000
00011100
01111111
NAME splash screen 122
COL 2

TIL 8e
00000001
00000000
00000000
00000000
00000000
00000000
00001000
00001100
NAME splash screen 123
COL 2

TIL 8f
11100000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME splash screen 124
COL 2

TIL 8g
00110000
00000000
00000000
00000000
00000000
01010000
01110000
01110001
NAME splash screen 125
COL 2

TIL 8h
00001010
00000000
00000001
00000000
00000000
00000000
11001111
11111111
NAME splash screen 126
COL 2

TIL 8i
00000000
00000000
00000000
00000000
00000000
00000000
10000111
01111111
NAME splash screen 127
COL 2

TIL 8j
00000000
00000000
00000000
00000000
00000000
00000000
11111110
11111111
NAME splash screen 128
COL 2

TIL 8k
00001111
00011000
00000000
00000000
00000000
00000000
00000000
00000000
NAME splash screen 129
COL 2

TIL 8l
00000001
00000011
00000011
00000111
00000111
00001111
00001111
00011111
NAME splash screen 130
COL 2

TIL 8m
11110000
11110000
11100001
11100001
11000011
10000111
10000111
00001111
NAME splash screen 131
COL 2

TIL 8n
01111111
11110011
11100011
11000011
10000011
10000011
00000111
00000111
NAME splash screen 132
COL 2

TIL 8o
00011110
10011100
10011100
10011000
10111001
10111001
10111011
00111111
NAME splash screen 133
COL 2

TIL 8p
00000000
00110000
01111001
11111001
11111001
11111011
10111011
00111111
NAME splash screen 134
COL 2

TIL 8q
11110001
11100011
11100011
11000111
11001111
10001111
10011111
00011100
NAME splash screen 135
COL 2

TIL 8r
11111110
11100000
10000000
10000000
11111100
11111000
10000000
00000000
NAME splash screen 136
COL 2

TIL 8s
01111111
00110111
00001111
00011110
00011110
00111111
00111111
01111101
NAME splash screen 137
COL 2

TIL 8t
10000011
00000111
00001111
00111110
11111100
11110000
11100000
11000000
NAME splash screen 138
COL 2

TIL 8u
00011111
00111110
00111110
00111110
01111100
01111100
01111000
11111000
NAME splash screen 139
COL 2

TIL 8v
00001110
00001110
00001111
00001111
00000111
00000011
00000000
00000000
NAME splash screen 140
COL 2

TIL 8w
00001111
00011110
00111100
11111000
11110000
11100000
00000000
00000000
NAME splash screen 141
COL 2

TIL 8x
01111110
01111110
01111100
01111000
01111000
01110000
00000000
00000000
NAME splash screen 142
COL 2

TIL 8y
00011111
00011110
00011110
00011100
00001100
00001110
00001100
00000000
NAME splash screen 143
COL 2

TIL 8z
00111100
00111000
00111001
01111111
01111111
01111100
00000000
00000000
NAME splash screen 144
COL 2

TIL 9a
00000000
00000000
01001110
11011011
01011111
01011000
01001110
00000000
NAME splash ui 155
COL 4

TIL 9b
00000000
01111100
01101100
01100000
01100001
01100001
01101101
00111000
NAME splash ui 156
COL 4

TIL 9c
00000000
00000000
00000000
11100101
10110110
10110110
10110110
11100010
NAME splash ui 157
COL 4

TIL 9d
00000000
00000000
00001100
10011110
11001100
11001100
11001100
01001100
NAME splash ui 158
COL 4

TIL 9e
00000000
00000000
01000000
00100001
00110001
00110001
00110001
00110000
NAME splash ui 159
COL 4

TIL 9f
00000000
00000000
00000000
01100010
10110110
10110110
10110110
10010011
NAME splash ui 160
COL 4

TIL 9g
00000000
00000000
00000000
10001110
11011011
11011111
11011000
10001110
NAME splash ui 161
COL 4

TIL 9h
00010000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME splash ui 162
COL 4

TIL 9i
00000110
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME splash ui 163
COL 4

TIL 9j
00011000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME splash ui 164
COL 4

TIL 9k
00000000
00001000
00001100
00001110
00001111
00001110
00001100
00001000
>
00000000
00010000
00011000
00011100
00011110
00011100
00011000
00010000
NAME splash arrow 01
COL 4

TIL 9l
00000000
00010000
00110000
01110000
11110000
01110000
00110000
00010000
>
00000000
00001000
00011000
00111000
01111000
00111000
00011000
00001000
NAME splash arrow 02
COL 4

TIL 9m
10100101
11111111
11111111
11111111
11101111
11101111
11111111
11111111
NAME splash tower 01

TIL 9n
11111111
11111111
11111111
11111111
11111111
11111111
11111111
11111111
NAME splash mist 01
WAL false
COL 3

TIL 9o
11000000
11100000
11100000
11000000
11111100
11111110
11111110
11111100
NAME splash mist 02
WAL false
COL 3

TIL 9p
00111111
01111111
01111111
00111111
00000111
00001111
00001111
00000111
NAME splash mist 03
WAL false
COL 3

TIL 9q
10000001
00000000
00000000
10000001
11111111
11111111
11111111
11111111
NAME splash mist 04
WAL false
COL 3

TIL 9r
11111111
10101010
11111111
11111111
11100111
11100111
11100111
00000000
NAME splash tower 02

TIL f015j
10111101
01000010
10000001
10000001
10000001
10000001
01000010
10111101
NAME portal
COL 3

TIL f015k
00000000
01110011
01110010
10101001
00000000
01001011
10010111
11001110
NAME bg bone1
COL 3

TIL f015l
00000000
01101011
11010001
10101010
00000000
10011101
01011101
10001011
NAME bg bone2
COL 3

TIL f015m
00000000
11011101
11011101
10001000
00000000
10111011
10111011
00010001
NAME skullbrick1
WAL true
COL 4

TIL f015n
00100100
10111101
00100100
00111100
00100100
00111100
00100100
00111100
NAME bg ladder1
COL 3

TIL f015o
00100100
00111100
00100100
00111100
00100100
00111100
00100100
00111100
NAME bg ladder2
COL 3

TIL b015j
00111100
01100110
01000010
01000010
01000010
01000010
00111100
00011000
>
00111100
01100110
01000010
01000010
01000010
01000010
00111100
00011000
NAME Lantern - copy
WAL true

TIL a035j
01100110
00000000
11111111
10110101
01111110
00000000
01111110
00100100
COL 3

TIL a035k
00000000
11111111
00000000
00111100
00000000
00111100
00111100
00111100
COL 3

TIL a035l
00000111
00001001
00000001
00000001
00000001
00001001
00000111
00000001

TIL a035m
11100000
10010000
10000000
10000000
10000000
10010000
11100000
10000000

TIL a035n
00000000
11111111
00110001
00011000
00001100
00000110
00000011
00000001
WAL false

TIL a035o
00000000
11111111
10001100
00011000
00110000
01100000
11000000
10000000
WAL false

TIL a035p
01000000
00011011
01011101
01001111
00000000
01000000
00010101
00000000
WAL false

TIL a035q
00000010
11011000
11101010
11110010
00000000
00000010
10101000
00000000
WAL false

TIL a035r
00000000
00000000
00000000
00100000
00100000
00110000
00100100
00111100

TIL a035s
00000000
10110101
00000100
00111100
00100000
00110000
00100100
00000100

TIL a035t
10000000
10000000
10000111
10000000
10011111
10000000
10111111
10000000
COL 2

TIL a035u
00000001
00000001
11100001
00000001
11111001
00000001
11111101
00000001
COL 2

TIL a035v
01111111
11000000
10000000
10000000
10000000
10000000
10000000
10000000
COL 2

TIL a035w
11111110
00000011
00000001
00000001
00000001
00000001
00000001
00000001
COL 2

TIL a035x
00000000
00001111
00010001
00100001
01000001
01000001
01000001
01111111
WAL true

TIL a035y
00000000
11110000
10001000
10000100
10000010
10000010
10000010
11111110
WAL true

TIL e025j
10001000
11001000
10001000
11000111
10000011
11000000
10101010
01111111
WAL true
COL 4

TIL e025k
11111111
01111110
01111110
11111111
11111111
11111111
11111111
11111111
COL 4

TIL e025l
00010001
00010011
00010001
11110011
11100001
00000011
01010101
11111110
WAL true
COL 4

TIL e025m
10100100
10110100
10100100
10110100
10100100
10110100
10100100
11001000
COL 4

TIL e025n
00100101
00101101
00100101
00101101
00100101
00101101
00100101
00010011
COL 4

TIL e025o
00000000
00000000
11111111
00001111
00010100
00010100
00101010
00110110
>
00000000
00000000
11111111
00001110
00010101
00010100
00101010
00110110
COL 4

TIL e025p
10000000
11100000
10011111
10000000
10000000
10001110
10011100
10010100
>
10000000
11100000
10011111
10000000
10001000
10010100
10011100
10010100
COL 4

TIL e025q
00000001
00000111
11111001
00100001
00110001
00101001
00111001
00101001
>
00000001
00000111
11111001
00000001
00001101
00011001
00111001
00101001
COL 4

TIL e025r
01011111
01000001
01000001
01000001
10000001
10000001
10111101
10000001
>
01011111
01000001
01000001
01000001
10000001
10011001
10100101
10000001
COL 4

TIL e025s
01111110
11000011
10000001
10000001
10000001
10000001
10000001
11111111
WAL true

TIL e015j
00000000
11111111
00000000
11111011
10111011
10111111
00000000
11111111
WAL true

TIL e015k
00000000
11111100
00000010
11111010
10111010
10111010
00000010
11111100
WAL true

TIL e015l
00101010
11101001
11111100
11101111
00000001
11011111
11011100
11111001
WAL true

TIL e015m
00000000
00111111
01000000
01011011
01011011
01011111
01000000
00111111
WAL true

TIL e015n
01010100
10010111
00111111
11110111
10100000
10111011
00111011
10011111
WAL true

TIL e015p
10111101
10111101
10101101
10000001
10111101
10111101
10000001
10110101
WAL true

TIL e015q
00000000
01111111
10000000
10111011
10111011
10111111
10000000
10110101
WAL true

TIL e015r
10111101
00101100
01000010
11111111
01001000
11111111
01110110
11111111
WAL true

TIL d015j
10000000
11000000
11100000
11110000
00001000
11111100
11111010
10101011
WAL true

TIL d015k
00000001
00000011
00000111
00001111
00010000
00111011
01011011
11010101
WAL true

TIL d015l
00000000
11111001
11111001
11110110
00000100
00110100
01001000
01000000
NAME ruin 06
COL 3

TIL d015m
00000000
11000011
00110100
00001000
00000000
00000100
00000000
00000000
NAME ruin 07
WAL true
COL 3

TIL d015n
00000000
11011001
00100011
00011001
00000100
00000101
00001001
00001011
NAME ruin 08
COL 3

TIL d015o
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME bar
WAL true
COL 3

TIL d015p
00000000
11110011
01111011
00111001
10000000
00110000
00010110
00000100
COL 3

TIL d015q
00100001
00100010
00100100
00101000
00100000
10101111
10101111
00100000
COL 3

TIL d015r
00100000
00100000
00100000
00100000
00100000
00100000
00100000
00100000
COL 3

TIL d015s
00000000
00000000
00000000
00000000
00000000
11111111
11111111
00000000
COL 3

TIL d015t
00000001
00000010
00000100
00001000
00010000
00100000
01000000
10000000
COL 3

TIL d015u
01000000
01000000
01000000
00100000
00110000
11001000
11001000
10000111
NAME ruin 01
COL 3

TIL d015v
00000000
00000000
00000000
00000100
00000100
00001000
00111100
11000011
NAME ruin 05
COL 3

TIL d015w
00000000
00000000
00000000
00000001
00000001
00011110
01100000
10001110
NAME ruin 04
COL 3

TIL d015x
00000111
00001001
00010001
00100001
01001101
01010010
01100000
10000000
NAME ruin 03
WAL true
COL 3

TIL d015y
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
WAL true

TIL d015z
01000010
01001010
01011010
01011010
01000010
01011010
01011010
01001010
WAL true

TIL ccc5j
00000000
11111000
00000000
11111100
11111100
00000000
11101110
11101111
NAME balcony top
WAL true
COL 4

TIL ccc5k
00000000
11111111
00000000
11111111
11111111
00000000
11101111
11101111
NAME balcony top middle
WAL true
COL 4

TIL ccc5l
00000000
00011111
00000000
00111111
00111111
00000000
01110111
11110111
NAME balcony top l
WAL true
COL 4

TIL ccc5o
01000000
10100100
01001010
00100100
01111110
00111100
00111100
00011000
NAME flowerpot
WAL true

TIL ccc5p
00111100
01100110
01000010
01000010
01000010
01000010
00111100
00011000
NAME lantern but wall
WAL true

TIL ccc5q
00000000
00000000
00000000
00000000
01111110
00111100
00111100
00011000
NAME empty-flowerpot
WAL true

TIL c025j
00001000
01111110
01111110
00101010
01010100
00101010
00000000
11111111
NAME bg pillar03_tgnm
WAL false
COL 3

TIL c025k
00000000
11111111
00000000
01010100
00101010
00000000
01111110
01111110
NAME bg pillar01_tgnm
WAL false
COL 3

TIL c025l
00001000
01111110
01111110
01111110
01111110
00101000
01111110
01111110
NAME bg pillar02_tgnm
WAL false
COL 3

TIL c025m
00010000
00101000
01000100
01000100
01000100
01000100
01000100
01000100
NAME window 1_tgnm

TIL c025n
01000100
01000100
01000100
01000100
01111100
00000000
00000001
11111111
NAME window 2_tgnm

TIL c025o
01000010
01000010
11100111
10110001
01000000
11100000
10110000
01100000
NAME ladder_broke

TIL c025p
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00011000
00111100
00101000
00111100
00011100
00001100
00011000
00100000
NAME tgnm_ghost3
COL 2

TIL c025q
00011000
00111100
00010100
00111100
00111000
00110000
00011000
00000100
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME tgnm_ghost4
COL 2

TIL c015j
11111111
11111111
01111111
01111111
01111111
00111111
00011111
00001000
NAME enui_tub1
WAL true

TIL c015k
11111111
11111111
11111110
11111110
11111110
11111100
11111000
00010000
NAME enui_tub2
WAL true

TIL c015l
11111111
11111111
11111111
11111111
11111111
11111111
11111111
00000000
NAME enui_tub3
WAL true

TIL c015m
01111111
00111010
00111110
00111010
00111010
00111010
00111010
00111110
NAME enui_pipe

TIL c015n
00000100
00001010
00000100
00000000
01000000
10100000
01000000
00000000
NAME enui_wallpaper
COL 3

TIL c015o
00000000
01101101
11111110
11101111
00000010
11011111
11011001
11111111
NAME enui_brick_nowall
WAL false

TIL c015p
00000000
00000000
11100000
00010000
00001000
00001000
00001000
00111110

TIL bbb5j
00000000
01011110
00000000
01111010
01111110
00000000
01011110
00000000
WAL true
COL 3

TIL bbb5k
11100000
00000011
01110011
11111000
01110110
00000110
01100110
00000000
WAL true
COL 3

TIL a025j
00000000
00000001
00011011
00111011
00000000
00000111
00011111
11011111

TIL a025k
01001000
00110000
00110000
00000010
01111001
10110101
00110001
00111110
>
01001000
00110000
00110000
00000001
11111001
00110101
00110001
00111110
NAME medusa
COL 2

TIL a025l
01011011
01011011
01011011
01011000
01011011
01011011
01011011
01011011
NAME vertical_platform_1
WAL true
COL 4

TIL a025m
11011010
11011010
11011010
11011010
00011010
11011010
11011010
11011010
NAME vertical_platform_2
WAL true
COL 4

TIL a025n
11100000
11000000
10000000
00000000
00000000
00000000
00000000
00000000
NAME extracorner
COL 3

TIL a015j
00000000
00000000
10000000
01000000
01000000
00000000
00000000
00000000
NAME brokenplatform1
WAL true

TIL a015k
00000000
00000000
00000001
00000010
00000100
00000000
00000000
00000000
NAME brokenplatform2
WAL true

TIL a015l
11111111
00111111
10111111
11111111
00111111
10111111
11111111
00111111
>
00111111
10111111
11111111
00111111
10111111
11111111
00111111
10111111
NAME gear1
WAL true

TIL a015m
00000000
00000011
00000010
00010011
00011111
01001111
01111111
10111111
>
00000001
00000001
00001001
00001111
00100111
00111111
01011111
01111111
NAME gear2
WAL true

TIL a015n
01101101
01001001
11111111
11111111
11111111
11111111
11111111
11111111
>
10110110
00100100
11111111
11111111
11111111
11111111
11111111
11111111
NAME gear3
WAL true

TIL a015o
10000000
01100000
01000000
11011000
11110000
11110000
11111110
11111010
>
00000000
11000000
10110000
11100000
11101100
11111000
11111000
11111111
NAME gear4
WAL true

TIL a015p
11111100
11111111
11111101
11111100
11111111
11111101
11111100
11111111
>
11111101
11111100
11111111
11111101
11111100
11111111
11111101
11111100
NAME gear5
WAL true

TIL a015q
11111001
11111110
11110010
11111000
11001000
01000000
11000000
00000000
>
11111111
11111001
11111100
11100100
11110000
10010000
10000000
10000000
NAME gear6
WAL true

TIL a015r
11111111
11111111
11111111
11111111
11111111
11111111
10010010
10110110
>
11111111
11111111
11111111
11111111
11111111
11111111
00100100
01101101
NAME gear7
WAL true

TIL a015s
01011111
01111111
00001111
00001111
00011011
00000010
00000110
00000001
>
11111111
00011111
00011111
00110111
00000111
00001101
00000011
00000000
NAME gear8
WAL true

TIL a015t
00000000
00000000
00000000
11111111
11111111
11111111
11111111
11111111
>
00000000
01110000
01100000
01111111
01111111
01111111
01111111
01111111
NAME rightshaft1

TIL a015u
00000000
11100000
11000000
11111111
11111111
11111111
11111111
11111111
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME rightshaft2

TIL a015v
00000000
00000000
00000000
11111111
11111111
11111111
11111111
11111111
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME rightshaft3

TIL a015w
10000001
11000011
11100111
11100111
11100111
11100111
11100111
11100111
NAME hourglass1
COL 4

TIL a015x
11100111
11100111
11100111
11100111
11100111
11100111
11000011
10000001
NAME hourglass2
COL 4

TIL a015y
10101111
11111110
11111100
11111100
11111000
11111000
11111000
11110000
NAME brokenbell1
WAL true
COL 4

TIL a015z
11111111
11111111
01111111
00111111
00011111
00101111
00110011
00011100
NAME brokenbell2
WAL true
COL 4

TIL a0160
00000000
00000000
00000011
00000111
01101111
11011110
11111101
11111011
NAME brokenbell3
WAL true
COL 4

TIL a0161
00000110
01111000
01111101
01111110
01111111
10111111
11011111
11011111
NAME brokenbell4
WAL true
COL 4

TIL a0163
00111100
11100010
11010001
11111111
11111111
11111111
11111111
11111111
>
00111100
01000010
10010001
10010001
10010001
10001001
01000010
00111100
NAME rightshaftitem

TIL a0164
00111100
00100100
00111100
00011000
00111100
00100100
00111100
00011000
NAME chaintile1

TIL a0165
00111100
00100100
00111100
00011000
00111100
00100100
00000100
00000000
NAME chaintile2

TIL f015p
00000000
11011111
11011111
11011111
00000000
11111101
11111101
11111101
NAME light brick 0x wall
WAL false
COL 4

TIL f015q
00000000
11111111
00110001
00011000
00001100
00000110
00000011
00000001
NAME bg bar 0X wall
WAL true
COL 3

TIL f015r
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME bg bar 0X2 wall
WAL true
COL 3

TIL f015s
01111110
11111111
11000010
11001010
11011010
11000010
11111110
01000000
NAME block

TIL f015t
01111111
11000000
10000000
10000011
10000111
10001111
10001111
10011111
NAME big door 01

TIL f015u
11111110
00000011
00000001
11000001
11100001
11110001
11110001
11111001
NAME big door 02

TIL f015v
11111001
11111001
11111001
11111001
11111001
11111001
11111001
00000001
NAME big door 03

TIL f015w
10011111
10011111
10011111
10011111
10011111
10011111
10011111
10000000
NAME big door 04

TIL f015x
11111011
11110101
11111011
11111111
10111111
01011111
10111111
11111111
NAME solid wallpaper
WAL true
COL 3

TIL f015y
00000000
11111111
00000000
01010100
00101010
00000000
01111110
01111110
NAME bg pillar solid
WAL false
COL 3

TIL f015z
00000000
01110001
11111011
11111011
00000000
10011111
11011111
11011111
NAME bg brick solid
WAL true
COL 3

TIL f0160
00000000
00000000
00000000
00000011
00001111
00001111
00011111
00011111
>
00000000
00000000
00000000
00000011
00001111
00001111
00011111
00011111
NAME moon 01

TIL f0161
00000000
00000000
00000000
11000000
11110000
10001000
00000000
00000000
>
00000000
00000000
00000000
11000000
11110000
10001000
00000000
00000000
NAME moon 02

TIL f0162
00010111
00011011
00001111
00001111
00000011
00000000
00000000
00000000
>
00011111
00011111
00001101
00001110
00000011
00000000
00000000
00000000
NAME moon 03

TIL f0163
00000000
00000000
10001000
11110000
11000000
00000000
00000000
00000000
NAME moon 04

TIL f0164
00000000
11111111
00000000
00000000
00000000
00000001
00000011
00000111
NAME bg bar corner
COL 3

SPR A
00011000
00011000
00111100
01111110
01111110
00111110
00111100
00100100
>
00011000
00011000
00111100
01111110
01111110
01111100
00111100
00100100
POS 1 7,14

SPR a
00000000
00000000
01010001
01110001
01110010
01111100
00111100
00100100
DLG SPR_0
POS 0 12,13

SPR b
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME explanation 01
DLG SPR_1
POS 3 2,14

SPR c
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME explanation 02
DLG SPR_2
POS 3 2,10

SPR d
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME explanation 03
DLG SPR_3
POS 3 13,6

SPR e
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME explanation 04
DLG SPR_4
POS 3 13,10

SPR f
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME explanation 05
DLG SPR_5
POS 3 2,6

SPR g
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME explanation 06
DLG SPR_6
POS 3 8,2

SPR h
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME explanation 06
DLG SPR_7
POS 4 9,8

SPR i
00111100
01000110
10001111
10011101
10111001
11110001
01100010
00111100
NAME DO NOT DELETE

SPR f01j
00011100
00011100
00001000
00100010
00101010
01011101
00000000
00010100
>
00000000
00011100
00011100
00001000
00100010
01011101
00000000
00010100
NAME sticks
DLG SPR_f018
POS f016 7,1

SPR f01k
00011100
00011100
00001000
00100010
00101010
01011101
00000000
00010100
>
00000000
00011100
00011100
01001001
00100010
00011100
00000000
00010100
NAME sticksparty
DLG SPR_f019
POS f01c 3,8

SPR f01l
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME pleasedont
DLG SPR_f01a
POS f018 15,1

SPR b01j
00011000
00100100
01100110
01000010
01100110
10100101
10111101
00111100
NAME cultist party
DLG SPR_b018
POS f01a 12,4

SPR b01k
10000001
11111111
01011010
10011001
01100110
10000001
11000011
01111110
DLG SPR_b019
POS b010 1,13

SPR a03j
00000000
00000000
00000100
00001010
00000100
00000100
00001010
00011111
NAME switch
DLG SPR_a03a
POS a033 1,7

SPR a03l
00000000
00101000
00111000
10111010
11111110
11101110
01010100
00101000
>
00000000
00101000
00111000
01111100
01111100
01101100
01010100
00101000
NAME bouncer bat
DLG SPR_a038
POS a033 4,10

SPR a03m
00000000
00101000
00111000
10111010
11111110
11101110
01010100
00101000
>
00000000
00101000
00111000
01111100
01111100
01101100
01010100
00101000
NAME party bat
DLG SPR_a039
POS f01c 9,10

SPR d02j
00111010
01101100
11111110
11110111
11100111
10001111
00011111
01110011
>
00000100
00111100
01101110
11111111
11110111
11101111
10011111
01110011
NAME party hound
DLG SPR_d02a
POS f01c 10,14

SPR d02k
00111010
01101100
11111110
11110111
11100111
10001111
00011111
01110011
>
00000100
00111100
01101110
11111111
11110111
11101111
10011111
01110011
NAME sewer hound
DLG SPR_d028
POS d025 11,12

SPR e02j
00000000
00111100
01000010
01000010
01110010
01000010
00111100
00000000
>
00000000
00111100
01000010
01000010
01001110
01000010
00111100
00000000
DLG SPR_e028
POS e025 3,2

SPR e02r
00000000
00111100
01000010
01000010
01110010
01000010
00111100
00000000
>
00000000
00111100
01000010
01000010
01001110
01000010
00111100
00000000
DLG SPR_e029
POS e026 3,2

SPR e02s
00000000
00111100
01000010
01011010
01011010
01000010
00111100
00000000
>
00000000
00111100
01000010
01000010
01011010
01000010
00111100
00000000
DLG SPR_e02a
POS e027 3,2

SPR e02t
00000000
00000000
00000000
00000000
01100000
01100000
01100000
00000000
NAME book_eo2_ceph
DLG SPR_e02e
POS e025 14,7

SPR e02u
00000000
00000000
00000000
00000000
01100000
01100000
01100000
00000000
NAME book_eo2_saucy
DLG SPR_e02d
POS e025 1,5

SPR e02v
00000000
00000000
00000000
00000000
01100000
01100000
01100000
00000000
NAME book_eo2_Squid
DLG SPR_e02c
POS e025 11,9

SPR e02w
00000000
00000000
00000000
00000000
00000100
00000100
00000100
00000000
NAME book_eo2_sushi
DLG SPR_e02b
POS e025 4,5

SPR e02x
00111100
01100110
00111100
00011000
00011000
00011000
00011000
00000000
DLG SPR_e02f
POS e025 5,2

SPR e02y
00111100
01100110
00111100
00011000
00011000
00011000
00011000
00000000
DLG SPR_e02g
POS e027 5,2

SPR e02z
00111100
01100110
00111100
00011000
00011000
00011000
00011000
00000000
DLG SPR_e02h
POS e026 5,2

SPR e030
00000000
01011010
00100100
01100110
11011011
01000010
00111100
10000001
>
10011001
00100100
01011010
11001011
01011010
01000010
10111101
00000000
NAME tyedye party
DLG SPR_e02i
POS f01c 2,13

SPR e01j
00000000
00000000
00011100
00111110
01101010
01111111
11100011
11111111
NAME slime party
DLG SPR_e018
POS f01a 10,14

SPR d01j
00000000
00000000
00000000
00000000
00000000
11111111
10111101
01000010
DLG SPR_d018
POS d013 3,7

SPR d01k
00000000
00000110
01100100
01111100
00111000
01111000
00111000
00101100
>
00000000
10000000
11100000
01111000
00111000
01111000
00111000
00101100
DLG SPR_d019
POS d013 14,7

SPR d01l
00000000
01111110
10000001
10100101
10110101
11000011
01111110
00000000
DLG SPR_d01a
POS d013 6,13

SPR d01m
00000000
00000110
01100100
01111100
00111000
01111000
00111000
00101100
>
00000000
10000000
11100000
01111000
00111000
01111000
00111000
00101100
NAME builder party
DLG SPR_d01b
POS f01d 6,8

SPR cccj
00000000
00000110
00000110
00001100
00001111
00001100
00001100
00111100
>
00000000
00000110
00000110
00001100
00001110
00001101
00001100
00111100
DLG SPR_ccc8
POS ccc3 13,14

SPR ccck
00000000
00011000
00011000
00111100
01111110
10111101
00111100
00100100
DLG SPR_ccc9
POS ccc5 3,5

SPR cccl
00100010
00100001
00000000
00000000
00000000
00000000
00000000
00000000
>
00010100
00001100
00000000
00000000
00000000
00000000
00000000
00000000
POS ccc5 3,6

SPR cccm
00000000
00000000
00000000
00000000
00000000
00011000
00011000
00011000
NAME candle unlit l
DLG SPR_cccd
POS ccc3 5,10

SPR cccn
00000000
00000000
00000000
00000000
00000000
00011000
00011000
00011000
NAME candle unlit r
DLG SPR_cccc
POS ccc3 10,10

SPR ccco
00000000
00000000
00010000
00011000
00000000
00011000
00011000
00011000
>
00000000
00000100
00001000
00011000
00000000
00011000
00011000
00011000
NAME candle lit l
DLG SPR_cccb
POS ccc5 5,10

SPR cccp
00000000
00000000
00010000
00011000
00000000
00011000
00011000
00011000
>
00000000
00000100
00001000
00011000
00000000
00011000
00011000
00011000
NAME candle lit r
DLG SPR_ccca
POS ccc5 10,10

SPR cccq
01000000
10100100
01001010
00100100
01111110
00111100
00111100
00011000
NAME some nice flowers for a party
DLG SPR_ccce
POS f01a 3,8

SPR c02j
00111000
01111100
00101000
00011100
00111000
01000100
00111000
00101000
>
00111000
01111100
00101000
00011100
00111000
01000100
00111000
00101000
NAME tgnm_dreamon
DLG SPR_c029
POS c026 0,5

SPR c02k
00000000
00111100
00101000
00011100
00111000
01010100
00111000
00101000
>
00000000
01111000
00101000
01110000
00111000
01010100
00111000
00101000
NAME tgnm_bones

SPR c02l
00011100
10011100
00111001
00111000
00011000
00110000
00001000
00010000
>
00111000
00111001
10011100
00011100
00110000
00011000
00100000
00010000
NAME tgnm_ghost2
POS c026 1,13

SPR c02m
00001110
00010100
00011110
01111100
00101100
00111100
01000100
00000100
>
01110000
00101000
01111000
00111110
00110100
00111100
00100010
00100000
NAME tgnm_dancer
DLG SPR_c028
POS c026 8,3

SPR c02n
00000000
00001110
00011110
00010100
00011110
00111100
01011100
01010100
NAME tgnm_oldman
DLG SPR_c02a
POS c02a 7,13

SPR c02o
00011000
00111100
00101000
00111100
00011100
00011000
00110000
00100000
>
00011000
00111100
00101000
00111100
00011100
00001100
00011000
00100000
NAME tgnm_ghost

SPR c02p
00111000
00111000
00110000
00011101
01001000
00010100
00010100
00010010
>
00011100
00011100
00001100
10111000
00010010
00101000
00101000
01001000
NAME tgnm_skelly party
DLG SPR_c02d
POS f01b 5,8

SPR c02q
00011100
00111110
00010100
00111000
00011100
01000010
00011100
00010100
>
00011100
00111110
00010100
00111000
00011101
00100000
00011100
00010100
DLG SPR_c02b
POS c026 14,11

SPR c02r
00111000
01111100
00101000
00011100
00111000
01000100
00111000
00101000
>
00011100
00111110
00010100
00001110
00011000
00100010
00111000
01000100
DLG SPR_c02c
POS c026 5,8

SPR c01j
00011110
00011001
00111100
01011010
00111100
01111110
01111110
11111111
>
00011100
00011010
00111101
01011010
00111100
01111110
01111110
11111111
NAME enui party
DLG SPR_c018
POS f01b 1,8

SPR c01k
00000001
00000001
10000010
11000110
01101100
00111000
00011100
00001110
>
00000000
00000000
00000100
10001100
11011001
01110001
00111100
00001110
NAME enui_mermaid2
DLG SPR_c019
POS c013 3,2

SPR c01l
00000000
00000000
00000000
00000000
00000000
10000000
10000000
00000000
>
00000000
00000000
00000000
00000000
00000000
01000000
10000000
00000000
NAME enui_mermaid1
DLG SPR_c01a
POS c013 5,2

SPR c01m
00000000
10011000
11111100
01111100
00011000
00111100
01111100
10111011
>
00000000
00011000
01111100
11111100
10011000
00111100
01111100
10111011
NAME enui_mermaid3
POS c013 4,2

SPR c01n
00111000
01111100
01111100
01101100
01101100
01101100
00101000
00001000
>
00111000
01111100
01111100
01101100
01101100
01101100
00101000
00100000
NAME enui_mermaid_dry1
DLG SPR_c01b
POS c015 5,3

SPR c01o
00000000
10011000
11111100
01111100
00011000
00111100
01111100
10111011
>
00000000
00011000
01111100
11111100
10011000
00111100
01111100
10111011
NAME enui_mermaid_dry2
POS c015 5,2

SPR bbbj
00000000
00000000
00011110
01111010
01111111
00001111
01111110
00000000
>
00000000
00000000
00011110
00011010
01111111
01111111
01111110
00000000
DLG SPR_bbb8
POS bbb5 1,11

SPR bbbk
00000000
00000000
00000000
01111110
11111111
11000011
00000000
00000000
>
00000000
00000000
00000000
01111100
11111110
11000111
00000001
00000000
POS bbb5 2,11

SPR bbbl
00000000
00000000
00000000
00100000
01100000
11000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
10000000
11000000
01000000
POS bbb5 3,11

SPR bbbm
00000000
00000000
00111000
01101110
01111000
00111110
00010000
00111000
>
00000000
00000000
00111000
01101000
01111110
00111110
00010000
00111000
DLG SPR_bbb9
POS bbb5 7,7

SPR bbbn
00000000
00000000
00100000
00011000
00111100
01011010
01111110
00111100
>
00000000
00100000
00011000
00111100
01011010
01111110
00111100
00000000
NAME onion party
DLG SPR_bbba
POS f01a 5,8

SPR bbbo
00000100
00001000
00011000
00111100
01011010
01111110
00111100
01100110
>
00000010
00000100
00001100
00011110
00101101
00111111
00011110
00110011
NAME pear party
DLG SPR_bbbd
POS f01a 2,8

SPR bbbp
00000000
00000000
00100000
00011000
00111100
01011010
01111110
00111100
>
00000000
00100000
00011000
00111100
01011010
01111110
00111100
00000000
NAME onion
DLG SPR_bbbb
POS bbb6 11,13

SPR bbbq
00000000
00011100
00111110
00101010
00111110
00011100
00011100
00000000
>
00000000
00000000
00011100
00111110
00101010
00111110
00011100
00011100
DLG SPR_bbbe
POS bbb6 9,13

SPR bbbr
00000000
00011000
00111100
01110110
01111100
00111110
00010100
00010100
>
00000000
00000000
00011000
00111100
01110100
01111110
00111110
00010100
DLG SPR_bbbf
POS bbb6 7,11

SPR bbbs
00000000
00000000
00000000
00000111
00011101
00000111
00011111
00000000
>
00000000
00000000
00000000
00000111
00011101
00011111
00000111
00000000
DLG SPR_bbbc
POS bbb6 15,6

SPR bbbt
00000100
00001000
00011000
00111100
01011010
01111110
00111100
01100110
>
00000010
00000100
00001100
00011110
00101101
00111111
00011110
00110011
DLG SPR_bbbg

SPR a02j
00010010
00001100
00001100
01000000
10011110
10101101
10001100
01111100
>
00010010
00001100
00001100
10000000
10011111
10101100
10001100
01111100
NAME emma party
DLG SPR_a028
POS f01b 11,8

SPR a01j
00011100
01111110
00001110
01101110
01111110
00001110
00001110
00011111
NAME the_curator party
DLG SPR_a01b
POS f01d 10,8

SPR a01k
00000000
00110000
00110000
10010000
01110100
00110100
01011100
11010100
>
00000000
00110000
00110000
10010000
01110100
00110100
01011100
11010100
>
00000000
00110000
00110000
10010000
01110100
00110100
01011100
11010100
>
01100000
01100000
10100000
01100000
00100100
00100100
00111100
01110100
>
01100000
01100000
10100000
01100000
00100100
00100100
00111100
01110100
>
01100000
01100000
10100000
01100000
00100100
00100100
00111100
01110100
>
11000000
11000000
10100000
11000000
10000100
10000100
10011100
11010100
>
11000000
11000000
10100000
11000000
10000100
10000100
10011100
11010100
>
11000000
11000000
10100000
11000000
10000100
10000100
10011100
11010100
NAME the_riddler
DLG SPR_a019
POS a015 15,7

SPR f01m
00011000
00011000
00111100
01111110
01111110
01111100
00111100
00100100
>
00011000
00011000
00111100
01111110
01111110
00111110
00111100
00100100
DLG SPR_9
POS f01d 7,3

ITM 1
11111111
11111111
01110010
00000000
00000000
00000000
00000000
00000000
>
11111111
01111111
01110010
00000010
00000000
00000000
00000000
00000000
>
11111111
01111111
01110010
01000010
00000010
00000000
00000000
00000000
>
11111111
11111111
01110010
01000010
00000000
00000010
00000000
00000000
>
11111111
11111111
01110010
00000000
01000000
00000000
00000000
00000010
>
11111111
11111111
01110010
00000000
00000000
00000000
01000000
00000000
NAME main drip 01 PERMANENT
COL 1

ITM 2
11111111
11111111
01111111
00111001
00000000
00000000
00000000
00000000
>
11111111
11111111
01111111
00111001
00001001
00000000
00000000
00000000
>
11111111
11111111
01111111
00111011
00000001
00001101
00000000
00000000
>
11111111
11111111
01111011
00111011
00000010
00000001
00000000
00001000
>
11111111
11111111
01111011
00111001
00000010
00000000
00000000
00000001
>
11111111
11111111
01111011
00111001
00000000
00000000
00000010
00000000
NAME main drip 02 PERMANENT
COL 1

ITM 3
00000000
00000000
00000000
00000000
00000000
00000000
01111100
11111110
>
00000000
00000000
00000000
00000000
00000000
00000000
00001110
01111111
>
00000000
00000000
00000000
00000000
00000000
00000000
00111000
01111110
NAME main pour 01 PERMANENT
COL 1

ITM 4
11111111
01110101
01010101
00010101
01010100
01010001
00010100
00000100
>
11111111
11111111
01110101
01010101
01010101
00010101
01010101
01010000
>
11111111
01110101
01110001
01010100
01010101
01010101
00010101
00010101
>
11111111
11011111
00010111
01000101
01010001
01010000
00010101
01010001
>
11111111
11011111
01010101
00010001
00010101
01000101
01010100
01010000
NAME main pour 02 PERMANENT
COL 1

ITM 5
00010101
01010101
01010001
00010101
01010101
01000100
01010101
01010101
>
01010101
01000101
00010101
01010101
01010001
00010100
01010101
01000100
>
01000101
01010100
01010101
01000101
00010101
01010101
01010000
00010101
NAME main pour 03 PERMANENT
COL 1

ITM 6
00000000
00000000
00000000
00000010
00000000
00010001
00000001
00001011
>
00000000
00000100
00000000
00000000
00100010
00000000
00010010
00000001
>
00000000
00001000
00000000
00000100
00100000
01000000
00010001
00000011
>
00000000
00000000
00010000
00001000
00000000
01000000
00000001
10100111
>
00000000
00000000
00000000
00000000
00100001
00000101
01001000
00000011
NAME main spatter 01 PERMANENT
COL 1

ITM 7
00000000
00000000
00000000
00010000
00100000
00000000
10010000
11000000
>
00000000
00000000
00000000
00001100
01000000
10000000
10100000
11000100
>
00000000
00000000
00100000
00000000
00000010
00001001
01000000
10000000
>
00000000
00010000
00100000
00000000
00010000
10000000
10000001
11000101
>
00000000
00001000
00000100
00000000
00000100
00000000
01000000
11000000
>
00000000
00000000
00000000
00000010
00000010
00100000
10000001
10100000
NAME main spatter 02 PERMANENT
COL 1

ITM 8
11111111
11111111
01110010
00000000
00000000
00000000
00000000
00000000
>
11111111
01111111
01110010
00000010
00000000
00000000
00000000
00000000
>
11111111
01111111
01110010
01000010
00000010
00000000
00000000
00000000
>
11111111
11111111
01110010
01000010
00000000
00000010
00000000
00000000
>
11111111
11111111
01110010
00000000
01000000
00000000
00000000
00000010
>
11111111
11111111
01110010
00000000
00000000
00000000
01000000
00000000
NAME light drip 01 PERMANENT
COL 4

ITM 9
11111111
11111111
01111111
00111001
00000000
00000000
00000000
00000000
>
11111111
11111111
01111111
00111001
00001001
00000000
00000000
00000000
>
11111111
11111111
01111111
00111011
00000001
00001101
00000000
00000000
>
11111111
11111111
01111011
00111011
00000010
00000001
00000000
00001000
>
11111111
11111111
01111011
00111001
00000010
00000000
00000000
00000001
>
11111111
11111111
01111011
00111001
00000000
00000000
00000010
00000000
NAME light drip 02 PERMANENT
COL 4

ITM 10
00000000
00001000
00011000
00111100
00100100
00011000
00000000
00000000
>
00010000
00111000
00111100
00111100
00100100
00011000
00000000
00000000
>
00000000
00010000
00011000
00111000
00100100
00011000
00000000
00000000
>
00000000
00011000
00111100
00111100
00100100
00011000
00000000
00000000
NAME flame 01 PERMANENT

ITM 11
00000000
00000000
00000000
00000000
00000000
00000100
00001000
00011000
>
00000000
00000000
00000000
00000000
00000000
00000000
00010000
00011000
NAME flame 02 PERMANENT

ITM 12
00000000
00000000
00000000
00000000
00000000
00000000
01000000
01100000
>
00000000
00000000
00000000
00000000
00000000
00000000
00110000
01100000
NAME flame 03 PERMANENT

ITM 13
00000000
00000000
00000000
00000000
00000000
00000000
00000100
00000110
>
00000000
00000000
00000000
00000000
00000000
00000000
00000010
00000110
NAME flame 04 PERMANENT

ITM 14
00000000
00000000
01000000
01100000
00000000
00000000
00000000
00000000
>
00000000
00000000
00110000
01100000
00000000
00000000
00000000
00000000
NAME flame 05 PERMANENT

ITM 15
00000000
00000000
00000100
00000110
00000000
00000000
00000000
00000000
>
00000000
00000000
00000001
00000110
00000000
00000000
00000000
00000000
NAME flame 06 PERMANENT

ITM 16
00000100
00001010
00000100
00000000
01000000
10100000
01000000
00000000
NAME wallpaper 01 PERMANENT
COL 1

ITM 17
00000110
01111010
01010110
00000000
00000000
00000000
00000000
00000000
NAME key

ITM 18
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME SOLID BLOCKER

ITM 19
00111100
01000110
10001111
10011101
10111001
11110001
01100010
00111100
NAME DO NOT DELETE

ITM a
00000000
00000000
00000000
00000000
00000000
00000000
01111100
11111110
>
00000000
00000000
00000000
00000000
00000000
00000000
00001110
01111111
>
00000000
00000000
00000000
00000000
00000000
00000000
00111000
01111110
NAME light pour 01 PERMANENT
COL 4

ITM b
11111111
01110101
01010101
00010101
01010100
01010001
00010100
00000100
>
11111111
11111111
01110101
01010101
01010101
00010101
01010101
01010000
>
11111111
01110101
01110001
01010100
01010101
01010101
00010101
00010101
>
11111111
11011111
00010111
01000101
01010001
01010000
00010101
01010001
>
11111111
11011111
01010101
00010001
00010101
01000101
01010100
01010000
NAME light pour 02 PERMANENT
COL 4

ITM c
00010101
01010101
01010001
00010101
01010101
01000100
01010101
01010101
>
01010101
01000101
00010101
01010101
01010001
00010100
01010101
01000100
>
01000101
01010100
01010101
01000101
00010101
01010101
01010000
00010101
NAME light pour 03 PERMANENT
COL 4

ITM d
00000000
00000000
00000000
00000010
00000000
00010001
00000001
00001011
>
00000000
00000100
00000000
00000000
00100010
00000000
00010010
00000001
>
00000000
00001000
00000000
00000100
00100000
01000000
00010001
00000011
>
00000000
00000000
00010000
00001000
00000000
01000000
00000001
10100111
>
00000000
00000000
00000000
00000000
00100001
00000101
01001000
00000011
NAME light spatter 01 PERMANENT
COL 4

ITM e
00000000
00000000
00000000
00010000
00100000
00000000
10010000
11000000
>
00000000
00000000
00000000
00001100
01000000
10000000
10100000
11000100
>
00000000
00000000
00100000
00000000
00000010
00001001
01000000
10000000
>
00000000
00010000
00100000
00000000
00010000
10000000
10000001
11000101
>
00000000
00001000
00000100
00000000
00000100
00000000
01000000
11000000
>
00000000
00000000
00000000
00000010
00000010
00100000
10000001
10100000
NAME light spatter 02 PERMANENT
COL 4

ITM f
00000000
00000000
00000000
00011000
00111100
00100100
00111100
00011000
NAME main chain 01 PERMANENT
COL 1

ITM g
00111100
00100100
00111100
00011000
00111100
00100100
00111100
00011000
NAME main chain 02 PERMANENT
COL 1

ITM h
00111100
00100100
00111100
00011000
00111100
00100100
00000100
00000000
NAME main chain 03 PERMANENT
COL 1

ITM i
00000000
00000000
00000000
00011000
00111100
00100100
00111100
00011000
NAME light chain 01 PERMANENT
COL 4

ITM j
00111100
00100100
00111100
00011000
00111100
00100100
00111100
00011000
NAME light chain 02 PERMANENT
COL 4

ITM k
00111100
00100100
00111100
00011000
00111100
00100100
00000100
00000000
NAME light chain 03 PERMANENT
COL 4

ITM l
00000000
00000000
00000000
00011000
00111100
00100100
00111100
00011000
NAME bg chain 01 PERMANENT
COL 3

ITM m
00111100
00100100
00111100
00011000
00111100
00100100
00111100
00011000
NAME bg chain 02 PERMANENT
COL 3

ITM n
00111100
00100100
00111100
00011000
00111100
00100100
00000100
00000000
NAME bg chain 03 PERMANENT
COL 3

ITM o
00010000
00011000
00011000
00110000
00110000
00011000
00011000
00010000
NAME main vine 01 PERMANENT
COL 1

ITM p
00011000
00011000
00001100
00001000
00011000
00001000
00011000
00010000
NAME main vine 02 PERMANENT
COL 1

ITM q
00011000
00010000
00010000
00101000
00000100
00000100
00000000
00000000
NAME main vine 03 PERMANENT
COL 1

ITM r
00010000
00011000
00011000
00110000
00110000
00011000
00011000
00010000
NAME bg vine 01 PERMANENT
COL 3

ITM s
00011000
00011000
00001100
00001000
00011000
00001000
00011000
00010000
NAME bg vine 02 PERMANENT
COL 3

ITM t
00011000
00010000
00010000
00101000
00000100
00000100
00000000
00000000
NAME bg vine 03 PERMANENT
COL 3

ITM u
00010000
00011000
00011000
00110000
00110000
00011000
00011000
00010000
NAME light vine 01 PERMANENT
COL 4

ITM v
00011000
00011000
00001100
00001000
00011000
00001000
00011000
00010000
NAME light vine 02 PERMANENT
COL 4

ITM w
00011000
00010000
00010000
00101000
00000100
00000100
00000000
00000000
NAME light vine 03 PERMANENT
COL 4

ITM x
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME main bar 01 PERMANENT
COL 1

ITM y
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME light bar 01 PERMANENT
COL 4

ITM z
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME bg bar 01 PERMANENT
COL 3

ITM f011a
00000000
00000000
00000000
00000000
00000000
00101000
00111000
00110000
NAME catpiece1
DLG ITM_f010

ITM f011b
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00111000
NAME catpiece2
DLG ITM_f011

ITM f011c
00000000
00000000
00000000
00000000
00000000
00100000
00000000
01000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00010000
01000000
NAME catpiece3
DLG ITM_f012

ITM f011d
00000000
00000000
00000000
00000000
00000000
00000000
00100000
01000000
NAME catpiece4
DLG ITM_f015

ITM f011e
00000000
00000000
00000000
00000000
00000000
00000000
00010000
00001000
NAME catpiece5
DLG ITM_f016

ITM f011f
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME catsign1 PERMANENT
DLG ITM_f013

ITM f011g
00000000
00000000
00000000
01111110
01010010
01111110
00011000
00011000
NAME catsign2 PERMANENT
DLG ITM_f014

ITM f011h
00000000
01110000
01110000
00100000
00000000
00000000
00000000
00000000
NAME PERMANENT skull1
COL 1

ITM f011i
00000000
00000000
00000000
00000000
00000000
00011100
00011100
00001000
NAME PERMANENT skull2
COL 1

ITM f011j
00011100
00011100
00001000
00100010
00101010
01011101
00000000
00010100
>
00000000
00011100
00011100
01001001
00100010
00011100
00000000
00010100
NAME sticks PERMANENT
DLG ITM_f017

ITM f011k
00000000
00000000
10001010
00001110
01000110
00111000
00101000
01000100
>
00000000
00000000
01001010
00001110
01000110
00111000
00101000
01000100
NAME pointy PERMANENT
DLG ITM_f018

ITM b011a
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME jump1
DLG ITM_b010

ITM b011b
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME jump2
DLG ITM_b011

ITM a03z
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME bg bar 01 PERMANENT
COL 3

ITM a031a
00000100
00001010
00000100
00000000
00000000
00000000
00000000
00000000
NAME wallpaper mod PERMANENT
COL 1

ITM a031b
00000000
00000000
00000100
00001010
00001100
00110000
01010000
11111000
COL 4

ITM a031c
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME bar SOLID
COL 1

ITM a031d
00000000
11111111
00000000
00000000
00000000
00000000
00000000
00000000
NAME bar
COL 1

ITM a031e
00000000
00000000
00000000
00000010
00000000
00100110
00010110
00000000
>
00000000
00000000
00000100
00000010
00000000
00000110
00010110
00000000
NAME SOLID

ITM a031f
00000000
00000000
00100000
01000000
00000000
01100000
01101000
00000000
>
00000000
00000000
00000000
01000000
00000000
01100100
01101000
00000000
NAME SOLID

ITM a031g
00000000
00000000
00100000
01010000
00110000
00001100
00001010
00011111
NAME SOLID
COL 4

ITM a031h
00000000
00000001
00001110
00010000
00001000
00011000
00000000
00000000
>
00000000
00001110
00010001
00001000
00010000
00011000
00000000
00000000
NAME zap SOLID

ITM a031i
00000000
00000000
11010000
00101000
00001000
00011000
00000000
00000000
>
00000000
00010000
00101000
11010000
00010000
00011000
00000000
00000000
NAME zap SOLID

ITM a031j
00000000
00000000
10001111
01110000
00000000
00000000
00000000
00000000
>
00000000
11000000
00100001
00010110
00001000
00000000
00000000
00000000
NAME zap SOLID

ITM a031k
00000000
00000111
00011111
00111110
01111110
00111110
00011111
00000111
NAME eye

ITM a031l
00000000
11100000
11111000
01111100
01111110
01111100
11111000
11100000
NAME eye

ITM a031m
00000000
00101000
01010100
11101110
11111110
10111010
00010000
00000000
>
00000000
00101000
01010100
01101100
01111100
01111100
01010100
00000000

ITM a031n
00000000
00001100
00001110
00000011
00000011
00100101
01011011
10101111

ITM a031o
01000011
10110011
00111100
01100010
01100011
10010000
10010000
10010000
>
00110110
01111110
10101100
01000100
01000100
11110010
10001000
01001000

ITM a031p
00000000
00000000
00000000
00000000
00000000
00000000
00110011
11111111

ITM e021b
00000000
00000000
00000000
00000000
01100000
01100000
01100000
00000000
NAME book_eo2_SquidNow
DLG ITM_e021

ITM e021c
00000000
00000000
00000000
00000000
00000100
00000100
00000100
00000000
NAME book_eo2_Sushi
DLG ITM_e022

ITM e021d
00000000
00000000
00000000
00000000
01100000
01100000
01100000
00000000
NAME book_eo2_Saucy
DLG ITM_e023

ITM e021e
00000000
00000000
00000000
00000000
01100000
01100000
01100000
00000000
NAME book_eo2_Ceph
DLG ITM_e024

ITM e021g
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME ending_eo2
DLG ITM_e026

ITM 1a
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME slimetalk
DLG ITM_e011

ITM 1b
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME up PERMANENT
DLG ITM_e012

ITM 1c
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME down PERMANENT
DLG ITM_e016

ITM 1d
00000000
00000000
00011100
00111110
01101010
01111111
11100011
11111111
NAME slime SOLID
DLG ITM_e019
COL 4

ITM 1e
00000100
00001000
00011000
00111100
01011010
01111110
00111100
01100110
>
00000010
00000100
00001100
00011110
00101101
00111111
00011110
00110011
NAME pear SOLID
DLG ITM_e015
COL 4

ITM 1f
00000000
00000000
00000000
00001000
00000000
00000000
00000000
00000000
NAME machine SOLID
DLG ITM_e014

ITM 1g
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME leave
DLG ITM_e013

ITM 1i
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME bye
DLG ITM_e017

ITM 1j
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME dive
DLG ITM_e018

ITM 1k
00000000
10110000
11101000
01111100
01111110
11101001
10110000
00000000
>
00000000
00000000
10110000
11101000
01111100
01111110
11101001
10110000
NAME pear2
COL 1

ITM e0117
00000110
01111010
01010110
00000000
00000000
00000000
00000000
00000000
NAME em key
DLG ITM_e010

ITM d011a
00000000
01000000
00100000
00010000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00001000
00000100
00000010
00000000
>
10000000
01000000
00000000
00000000
00000000
00000000
00000000
00000001
NAME rain PERMANENT
COL 4

ITM d011b
00000000
01000000
00100000
00010000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00001000
00000100
00000001
00000010
>
10000000
01000000
00000000
00000000
00000000
00000100
00000010
00001000
NAME rain 02 PERMANENT
COL 4

ITM ccc1b
00011100
00011110
00001110
00000110
00000000
00000000
00000000
00000000
NAME moon sw PERMANENT
COL 4

ITM ccc1c
00000000
00011000
01110000
01100000
00000000
00000000
00000000
00000000
NAME moon se PERMANENT
COL 4

ITM ccc1d
00000000
00000000
00000000
00000110
00001110
00011110
00011100
00000000
NAME moon nw SOLID
COL 4

ITM ccc1e
00000000
00000000
00000000
01100000
01110000
00011000
00000000
00000000
NAME moon ne SOLID
COL 4

ITM ccc1f
00000010
00000101
00100010
01010110
00100011
10101010
01110010
00100110
NAME flowers PERMANENT

ITM ccc1g
00010000
00101000
00010010
00001010
01001100
00101000
00010000
00010000
NAME flower 2 PERMANENT

ITM ccc1h
00001000
00010100
00001000
00010000
00010010
01001010
00101100
00011000
NAME flower 3 PERMANENT

ITM ccc1i
00000000
00000000
00000000
00000000
00000000
00001110
00001110
00000000
NAME tinderbox
DLG ITM_ccc4

ITM ccc1l
00010000
00011000
00011000
00110000
00110000
00011000
00011000
00010000
NAME deathvine 1 PERMANENT
DLG ITM_ccc3
COL 3

ITM ccc1m
00011000
00011000
00001100
00001000
00011000
00001000
00011000
00010000
NAME deathvine 2 PERMANENT
DLG ITM_ccc3
COL 3

ITM ccc1n
00011000
00010000
00010000
00101000
00000100
00000100
00000000
00000000
NAME deathvine 3 PERMANENT
DLG ITM_ccc3
COL 3

ITM ccc1o
01000000
10100100
01001010
00100100
00000000
00000000
00000000
00000000
NAME short flower PERMANENT

ITM ccc1p
00000000
00000000
00011000
01111101
10111101
10111101
01111110
00111100
NAME watering can
DLG ITM_ccc1

ITM ccc1q
00000000
00000000
00000000
00000000
00000000
01000000
10110001
01001010
NAME dead flowers 1 PERMANENT
COL 1

ITM ccc1r
00000000
00000000
00000000
00000000
00000000
00000100
00011010
10100100
NAME dead flowers 2 PERMANENT
COL 1

ITM ccc1s
00000000
00000000
00000000
00000000
00000000
00000100
00111010
01000100
NAME dead flowers 3 PERMANENT
COL 1

ITM c021d
00111000
00111000
00110001
00011100
01001000
00010100
00010100
00010010
>
00011100
00011100
10001100
00111000
00010010
00101000
00101000
01001000

ITM c021e
00011100
00011100
10001100
00111000
00010010
00101000
00101000
01001000
>
00111000
00111000
00110001
00011100
01001000
00010100
00010100
00010010

ITM c011a
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00010000
NAME enui_pearls
DLG ITM_c010

ITM c011d
00000000
00000000
00000000
00010000
00100000
00000000
10010000
11000000
>
00000000
00000000
00000000
00001100
01000000
10000000
10100000
11000100
>
00000000
00000000
00100000
00000000
00000010
00001001
01000000
10000000
>
00000000
00010000
00100000
00000000
00010000
10000000
10000001
11000101
>
00000000
00001000
00000100
00000000
00000100
00000000
01000000
11000000
>
00000000
00000000
00000000
00000010
00000010
00100000
10000001
10100000
NAME enui_wet1
DLG ITM_c012
COL 4

ITM c011e
00000000
00000000
00000000
00000000
00000000
00000000
01111100
11111110
>
00000000
00000000
00000000
00000000
00000000
00000000
00001110
01111111
>
00000000
00000000
00000000
00000000
00000000
00000000
00111000
01111110
NAME enui_puddle
DLG ITM_c013
COL 4

ITM c011f
00000000
00000000
00000000
00000010
00000000
00010001
00000001
00001011
>
00000000
00000100
00000000
00000000
00100010
00000000
00010010
00000001
>
00000000
00001000
00000000
00000100
00100000
01000000
00010001
00000011
>
00000000
00000000
00010000
00001000
00000000
01000000
00000001
10100111
>
00000000
00000000
00000000
00000000
00100001
00000101
01001000
00000011
NAME enui_wet2
DLG ITM_c014
COL 4

ITM c011g
00010101
01010101
01010001
00010101
01010101
01000100
01010101
01010101
>
01010101
01000101
00010101
01010101
01010001
00010100
01010101
01000100
>
01000101
01010100
01010101
01000101
00010101
01010101
01010000
00010101
NAME enui_water
DLG ITM_c011
COL 4

ITM c011h
11111111
11111111
01111111
00111001
00000000
00000000
00000000
00000000
>
11111111
11111111
01111111
00111001
00001001
00000000
00000000
00000000
>
11111111
11111111
01111111
00111011
00000001
00001101
00000000
00000000
>
11111111
11111111
01111011
00111011
00000010
00000001
00000000
00001000
>
11111111
11111111
01111011
00111001
00000010
00000000
00000000
00000001
>
11111111
11111111
01111011
00111001
00000000
00000000
00000010
00000000
NAME enui_drip
DLG ITM_c015
COL 4

ITM c011i
00110000
00110000
11111111
01000010
00100100
00011000
00011000
00100100
NAME enui_table PERMANENT

ITM c011j
10000000
01000000
01000000
01000000
01111000
01111100
01000100
01000100
NAME enui chair PERMANENT
DLG ITM_c016

ITM c011k
00000000
00000000
00000000
00000000
00000000
00000000
01111100
11111110
>
00000000
00000000
00000000
00000000
00000000
00000000
00001110
01111111
>
00000000
00000000
00000000
00000000
00000000
00000000
00111000
01111110
NAME enui_dry_puddle
DLG ITM_c017
COL 4

ITM c011l
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME enui_dialog1
DLG ITM_c018

ITM c011m
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME enui_dialog2
DLG ITM_c019

ITM c011n
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME enui_dialog3
DLG ITM_c01a

ITM bbb1a
00000000
00000000
01100000
00110000
00011110
00001010
00001110
00000000
>
00000000
00000000
01100000
00110000
00011110
00001010
00001110
00000000
DLG ITM_bbb0

ITM bbb1b
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME nastyfallPERMANENT
DLG ITM_bbb1

ITM a021a
10000001
11000011
10000001
10111101
01111110
01111110
00111100
01000010
>
11000011
11000011
10000001
10111101
01111110
01111110
00111100
01000010
NAME CRAB1
DLG ITM_a024

ITM a021b
00000000
00000000
10100000
01000101
01000010
00111100
00111100
00100100
>
00000000
00000000
00000101
10100010
01000010
00111100
00111100
00100100
NAME CRAB2
DLG ITM_a023

ITM a021c
00000000
00000000
00000000
01000010
01100110
01011010
00111100
00100100
>
00000000
00000000
00000000
00000000
01100110
01011010
00111100
00100100
NAME CRAB3
DLG ITM_a025

ITM a021e
00000000
11000011
11000011
10000001
10111101
01111110
01111110
00100010
>
00000000
10000001
11000011
10000001
10111101
01111110
01111110
01000100
NAME CRAB4
DLG ITM_a026

ITM a021f
00000000
00000000
10100101
01000010
01000010
00111100
00111100
01000010
>
00000000
00000000
00000000
10100101
01000010
01000010
00111100
01111110
NAME CRAB5
DLG ITM_a027

ITM a021g
00000000
10000001
11000011
10000001
10111101
01111110
01111110
01111110
>
10000001
11000011
10000001
10111101
01111110
01111110
00111100
01000010
NAME CRAB6
DLG ITM_a028

ITM a021h
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME CONVO1
DLG ITM_a020

ITM a021i
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME CONVO2
DLG ITM_a021

ITM a021j
00010101
01010101
01010001
00010101
01010101
01000100
01010101
01010101
>
01010101
01000101
00010101
01010101
01010001
00010100
01010101
01000100
>
01000101
01010100
01010101
01000101
00010101
01010101
01010000
00010101
NAME slime PERMANENT
DLG ITM_a022
COL 1

ITM a021k
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME CONVO3
DLG ITM_a029

ITM a021l
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME CONVO4
DLG ITM_a02a

ITM a021m
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME CONVO5
DLG ITM_a02b

ITM a021n
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME CONVO6
DLG ITM_a02c

ITM a011a
00000000
00011000
00111100
01111110
01111110
00111100
00011000
00000000
NAME gearshaft
COL 3

ITM a011b
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME falldeath1PERMANENT
DLG ITM_a010

ITM a011c
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00011000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME sand1
COL 3

ITM a011d
00111100
00111100
00011000
00011000
00011000
00011000
00011000
00011000
>
00100000
00110100
00011000
00011000
00011000
00011000
00011000
00011000
>
00000000
00000000
00001000
00011000
00011000
00011000
00011000
00011000
>
00000000
00000000
00000000
00000000
00010000
00011000
00011000
00011000
NAME sand2
COL 3

ITM a011e
00011000
00011000
00011000
00011000
00011000
00011000
00011000
00001000
>
00011000
00011000
00011000
00011000
00011000
00011000
00010000
00010000
NAME sand3
COL 3

ITM a011f
00000000
00010000
00000000
00000000
00001000
00010000
00000000
00100000
>
00010000
00001000
00000000
00010000
00000000
00000000
00001000
00000000
NAME sand4
COL 3

ITM a011g
00000000
00100000
00000000
00010000
00000000
00000000
00010000
00011000
>
00000000
00001000
00000000
00010000
00001000
00000000
00001000
00011100
>
00010000
00000000
00001000
00000000
00000000
00010000
00011000
00111100
>
00001000
00010000
00000000
00001000
00000000
00011000
00011100
00111110
NAME sand5
COL 3

ITM a011h
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME clockquestPERMANENT
DLG ITM_a01b

ITM a011i
11000000
01100000
00100000
00000000
00010000
00000000
00000000
00000000
>
11000000
01100000
00100000
00010000
00000000
00000000
00010000
00000000
NAME greasepile1PERMANENT
COL 5

ITM a011j
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00001010
00100111
00101101
11011111
00110011
11011111
10101111
01111111
>
00001010
00101011
00101101
01011111
10110011
11011111
10101111
01111111
>
00011010
00100111
01101101
01011111
00110011
11011111
10101111
01111111
>
00001010
00100111
00101101
11011111
00110011
11011111
10101111
01111111
NAME dark1PERMANENT
COL 5

ITM a011k
00000000
00001000
00011000
00111100
00100100
00011000
00000000
00000000
>
00010000
00111000
00111100
00111100
00100100
00011000
00000000
00000000
>
00000000
00010000
00011000
00111000
00100100
00011000
00000000
00000000
>
00000000
00011000
00111100
00111100
00100100
00011000
00000000
00000000
NAME laternlight1
DLG ITM_a011

ITM a011l
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME firecountPERMANENT
DLG ITM_a012

ITM a011m
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
01101000
11010000
10101100
11111011
11011101
11110110
11101001
11111111
>
01101000
11010000
10100110
11111011
11010101
11110110
11101001
11111111
>
01100000
11011000
10101100
11101010
11011101
11110110
11101001
11111111
>
01101000
11001100
10101110
11111011
11011101
11110110
11101001
11111111
NAME dark2PERMANENT
COL 5

ITM a011n
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
11011111
10110111
01101111
11011101
10101110
01111010
00101111
00010101
>
11011111
10110111
01101111
01011101
11101110
00111010
00101111
00010101
>
11011111
10110111
01101111
11011101
10101110
01011010
00110111
00010101
>
11011111
10110111
01101111
11011101
11101110
01110010
00101111
00010101
NAME dark3PERMANENT
COL 5

ITM a011o
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
11111101
11110101
11111111
11011010
11111111
01101110
10111000
11101000
>
11111101
11110101
11111111
11011010
11111011
01101111
10110100
11101000
>
11111101
11110101
11111111
11011010
11111111
01101111
10101000
11101000
>
11111101
11110101
11111111
11011010
11111111
01101110
10111100
11101000
NAME dark4PERMANENT
COL 5

ITM a011p
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
10111011
01011101
10111110
01111101
10111111
11011101
10101110
01110101
>
10111101
01011101
10011110
01111011
10111101
01011111
10101110
01110111
>
10111011
01011100
00111111
11111101
10111101
11011111
10111110
01110111
>
11111011
01110101
10111110
01111101
11111111
11011101
11101100
01111101
NAME dark5PERMANENT
COL 5

ITM a011q
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME darkentrance
DLG ITM_a013

ITM a011r
00000000
00010000
00000000
00000000
00001000
00010000
00000000
00000000
>
00010000
00000000
00000000
00010000
00000000
00000000
00001000
00000000
NAME grease1PERMANENT
DLG ITM_a014
COL 5

ITM a011s
01111110
00111100
00000000
00010000
00010000
00000000
00010000
00010000
>
01111110
00111100
00010000
00000000
00010000
00010000
00000000
00010000
NAME grease2PERMANENT
DLG ITM_a015
COL 5

ITM a011t
00000000
00000000
00000000
00000000
01111110
00111100
00111100
00111100
NAME water_bucketPERMANENT
DLG ITM_a01d
COL 6

ITM a011u
00000001
00000011
00000111
10001110
01011100
00110000
01010000
10001000
NAME alucartblade
DLG ITM_a016

ITM a011v
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME swordshatterPERMANENT
DLG ITM_a017

ITM a011w
00000000
00000000
00100000
00011000
00111100
01111110
00000000
00000000
NAME rope
DLG ITM_a01c
COL 3

ITM a011x
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00001010
00100111
00101101
11011111
00110011
11011111
10101111
01111111
>
00001010
00101011
00101101
01011111
10110011
11011111
10101111
01111111
>
00011010
00100111
01101101
01011111
00110011
11011111
10101111
01111111
>
00001010
00100111
00101101
11011111
00110011
11011111
10101111
01111111
>
00011010
00100111
01101101
01011111
00110011
11011111
10101111
01111111
>
00001010
00100111
00101101
11011111
00110011
11011111
10101111
01111111
NAME dark2-1PERMANENT
COL 5

ITM a011y
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
01101000
11010000
10101100
11111011
11011101
11110110
11101001
11111111
>
01101000
11010000
10100110
11111011
11010101
11110110
11101001
11111111
>
01100000
11011000
10101100
11101010
11011101
11110110
11101001
11111111
>
01101000
11001100
10101110
11111011
11011101
11110110
11101001
11111111
>
01100000
11011000
10101100
11101010
11011101
11110110
11101001
11111111
>
01101000
11010000
10101100
11111011
11011101
11110110
11101001
11111111
NAME dark2-2PERMANENT
COL 5

ITM a011z
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
11011111
10110111
01101111
11011101
10101110
01111010
00101111
00010101
>
11011111
10110111
01101111
01011101
11101110
00111010
00101111
00010101
>
11011111
10110111
01101111
11011101
10101110
01011010
00110111
00010101
>
11011111
10110111
01101111
11011101
11101110
01110010
00101111
00010101
>
11011111
10110111
01101111
11011101
10101110
01011010
00110111
00010101
>
11011111
10110111
01101111
11011101
10101110
01111010
00101111
00010101
NAME dark2-3PERMANENT
COL 5

ITM a0120
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
11111101
11110101
11111111
11011010
11111111
01101110
10111000
11101000
>
11111101
11110101
11111111
11011010
11111011
01101111
10110100
11101000
>
11111101
11110101
11111111
11011010
11111111
01101111
10101000
11101000
>
11111101
11110101
11111111
11011010
11111111
01101110
10111100
11101000
>
11111101
11110101
11111111
11011010
11111011
01101111
10110100
11101000
>
11111101
11110101
11111111
11011010
11111111
01101110
10111000
11101000
NAME dark2-4PERMANENT
COL 5

ITM a0121
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
>
11111111
01111101
11111111
11111110
11111111
11111111
11111111
11101111
>
11110111
11111111
11011110
11111111
01111111
11111111
11101111
11111111
>
11110111
11111111
11111101
11111111
11111111
11011101
11111111
11111111
>
11111111
11011111
11111111
11111111
11111111
10111111
11111110
11101111
>
11111011
11111111
11111110
10111111
11111111
11111111
11111111
11110111
>
11110111
11111111
11111111
11111111
11111111
01111110
11111111
11111011
NAME dark2-5PERMANENT
COL 5

ITM a0122
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME crossgap1SOLID
DLG ITM_a018

ITM a0123
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME crossgap2SOLID
DLG ITM_a019

ITM a0124
01100000
11110000
11111100
11111100
11110000
01111000
01110000
01010000
NAME hunchback
DLG ITM_a01a

ITM f011l
00000000
00000000
00000000
00000000
00000000
00011100
00011100
00000000
>
00000000
00000000
00000000
00000000
00000000
00011100
00011100
00000000
NAME game start
DLG ITM_0

ITM f011n
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME nxt trigger
DLG ITM_1

ITM f011o
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME continue trigger
DLG ITM_2

ITM f011p
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME nasty fall party PERMANENT
DLG ITM_3

ITM f011q
11111111
01110101
01010101
00010101
01010100
01010001
00010100
00000100
>
11111111
11111111
01110101
01010101
01010101
00010101
01010101
01010000
>
11111111
01110101
01110001
01010100
01010101
01010101
00010101
00010101
>
11111111
11011111
00010111
01000101
01010001
01010000
00010101
01010001
>
11111111
11011111
01010101
00010001
00010101
01000101
01010100
01010000
NAME fountain SOLID
DLG ITM_4
COL 1

ITM f011r
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
NAME glitch PERMANENT
DLG ITM_5

DLG SPR_0
DON'T DELETE ROOM 0

DLG SPR_1
This is a sample floor! To the left is the entrance tile, and at the top is the exit tile.

DLG SPR_2
Click 'Walls' under rooms tools to see how the area the player can walk has been blocked out!

DLG SPR_3
The room 'Asset Display' has all of the base tiles / items in it.

DLG SPR_4
Your floor can be larger than 1 room, but don't go overboard!

DLG SPR_5
Remember, to see solid / permanent / transparent items take affect, you'll need to add hacks before running the file in the browser.

DLG SPR_6
Ahead is the exit tile. Don't worry about adding exits over the exit + entrance tiles. They just mark where they'll be.

DLG SPR_7
Put the Sprite you want to attend the Halloween party at the top of the tower in this room!

DLG ITM_f010
"""
{
  - caeask == 1 ?
    {clr3}Pointy{clr3}: {wvy}mrooow{wvy}
    
    You found Pointy's head!{caecat = caecat + 1}
  - else ?
    {clr3}Cat{clr3}: {wvy}mrooow{wvy}
    
    You found a cat's head!{caecat = caecat + 1}
}
"""

DLG ITM_f011
"""
{
  - caeask == 1 ?
    It looks like Pointy's ribcage?{caecat = caecat + 1}
  - else ?
    Ah yes, cat ribcage.{caecat = caecat + 1}
}
"""

DLG ITM_f012
"""
{
  - caeask == 1 ?
    This appears to be Pointy's tail.{caecat = caecat + 1}
  - else ?
    This appears to be a cat's tail.{caecat = caecat + 1}
}
"""

DLG SPR_f018
"""
{
  - caecat == 5 ?
    {
      - caeask == 1 ?
        {clr3}Sticks:{clr3} You found all the parts of my cat! Give me a second while I put her back together.
        
        {shk}*klunk*{shk} *click* {wvy}*shuff shuff*{wvy} {shk}*k-chunk*{shk}(exitNow "catacombleave,8,1")
        {clr3}Sticks:{clr3} Good as new! Oh, I suppose you'll want to walk past me now, go ahead!
      - else ?
        {clr3}Sticks:{clr3} You found my entire cat, even without me asking! You're a truly good person. Let me put her back together.
        {shk}*klunk*{shk} *click* {wvy}*shuff shuff*{wvy} {shk}*k-chunk*{shk}(exitNow "catacombleave,8,1")
        {clr3}Sticks:{clr3} Good as new! Oh, I suppose you'll want to walk past me now, go ahead!
    }
  - caeask == 1 ?
    {clr3}Sticks:{clr3} Looks like you have {print caecat}/5 of my cat.
    {clr3}Sticks:{clr3} Please, keep looking!
  - else ?
    {clr3}Sticks:{clr3} {wvy}Waaaaaaah ablooo bloo bloo!{wvy}
    {clr3}Sticks:{clr3} I lost my skelecat, Pointy, in the catacombs. Can you help me find her? Please, she's my bestest friend and the pointiest cat around.{caeask = 1}
}
"""

DLG ITM_f013
Catacombs --->

DLG ITM_f014
Catacombs --->

DLG ITM_f015
"""
{
  - caeask == 1 ?
    It's a couple of Pointy's legs.{caecat = caecat + 1}
  - else ?
    It's a couple of... kitty legs?{caecat = caecat + 1}
}
"""

DLG ITM_f016
"""
{
  - caeask == 1 ?
    It's a couple of Pointy's legs.{caecat = caecat + 1}
  - else ?
    It's a couple of... kitty legs?{caecat = caecat + 1}
}
"""

DLG ITM_f017
{clr3}Sticks:{clr3} Thanks again for all your help!

DLG ITM_f018
{clr3}Pointy:{clr3} {wvy}purrrrrrr{wvy}

DLG SPR_f019
"""
{shuffle
  - {clr3}Sticks:{clr3} I love to party!
  - {clr3}Sticks:{clr3} Pointy isn't here because she gets overstimulated from being at parties.
  - {clr3}Sticks:{clr3} It's a known fact that skeletons are the best at partying. Couldn't say why.
  - {clr3}Sticks:{clr3} Skeletons come in lots of colors, you know!
}
"""

DLG SPR_f01a
{clr3}Sticks:{clr3} Hey, where are you going? The exit is this way!

DLG SPR_b010
DON'T DELETE ROOM 0

DLG SPR_b011
This is a sample floor! To the left is the entrance tile, and at the top is the exit tile.

DLG SPR_b012
Click 'Walls' under rooms tools to see how the area the player can walk has been blocked out!

DLG SPR_b013
The room 'Asset Display' has all of the base tiles / items in it.

DLG SPR_b014
Your floor can be larger than 1 room, but don't go overboard!

DLG SPR_b015
Remember, to see solid / permanent / transparent items take affect, you'll need to add hacks before running the file in the browser.

DLG SPR_b016
Ahead is the exit tile. Don't worry about adding exits over the exit + entrance tiles. They just mark where they'll be.

DLG SPR_b017
Put the Sprite you want to attend the Halloween party at the top of the tower in this room!

DLG SPR_b018
{clr3}Cultist:{clr3} May Spirzzal bless this wonderful party!

DLG SPR_b019
"""
{cycle
  - {clr2}Goblin Guard{clr2}: Sorry bud, {wvy}cool{wvy} ghouls only!
  - Not cool, nor ghoul enough!
    *Guard pushes you away from the ladder*
    (exit "spookhop,3,13")
}
"""

DLG SPR_a038
"""
bat: {wvy}sSCRrReEeEeEe{shk}EeEeEEEE!!!{wvy}{shk}

{cycle
  - bat: You shouldn't be here! {wvy}LeeEe{shk}EAaAAVE!!!{shk}{wvy}
  - bat: The gate above is not to be opened! {wvy}FLeeEe{shk}EeEeeEEEE!!!{shk}{wvy}
  - bat: Nobody is allowed past! {wvy}NobodyYyY{shk}yyYyYYYY!!!{shk}{wvy}
}
"""

DLG SPR_a039
"""
{clr3}bat:{clr3} {wvy}sSCRrReEeEeEe{shk}EeEeEEEE!!!{wvy}{shk}

{cycle
  - {clr3}bat:{clr3} Hey there! Enjoying the  {wvy}partyYyY{shk}YYyYyYY???{shk}{wvy}
  - {clr3}bat:{clr3} What's your name? Mine's  {wvy}Calliope{shk}EeEeEeeEEE!!!{shk}{wvy}
  - {clr3}bat:{clr3} This place is rockin'! It's a real {wvy}jubile{shk}eEeEeEEEE!!!{shk}{wvy}
}
"""

DLG SPR_a03a
"""
*ker-(exitNow "anim1,2,7"){shk}CHUNK{shk}*{br}{br}*zzz-(exitNow "anim2,2,7"){shk}ZAP{shk}*{br}{br}*{wvy}(exitNow "anim3,2,7")fwww{shk}wWwWWWoOoOOoOOMPHhHHHHHhh{shk}{wvy}*(exitNow "exit room,2,7")

"""

DLG ITM_b010
You jump down to a lower level, pain shooting up your legs.

DLG ITM_b011
You frantically flail as you grapple for the platform, narrowly avoiding slipping off into the abyss.

DLG SPR_d028
"""
{sequence
  - Hellhound : {shk}STOP!
    I AM THE GUARDIAN OF THE... {shk}
    Well... I guard the sewers.
    Why are you here?
    You: I was going to the party, but I think I've made a very wrong turn.
    
    Hellhound: Party? What party?
    {shk}I DEMAND YOU TELL ME ABOUT THE PARTY!{shk}
    Please. No one tells me anything down here.
    
    You: It's upstairs. You live here and you weren't invited?
    Hellhound: They'll have forgotten I'm here again. Day & night, guarding these sewers for them and they can't even remember to invite me to a party in my own tower. If it wasn't for me, all sorts of things might get in through here, like, uh..
    You : Rats?
    Hellhound: What? No, what's wrong with rats? Some of my best friends are rats. I'm talking {shk}crabs{shk}, {wvy}slime{wvy}, that sort of thing. They can mess the place right up.
    You: Oh don't get me started on that, you wouldn't believe the things I've seen and/or have yet to see today!
    Hellhound: {shk}INDEED I WOULD NOT!{shk}
    So, uh, this party? I can help you out of the sewers if you'll let me tag along?
    You: Sure! Maybe freshen up a bit first? I don't know how long you've been down here, but just standing under this waterfall is making me feel like I need to shower for a week.
    Hellhound: {shk}HAHA! 'WATER' FALL.{shk}
    Yes, I suppose it mostly contains water. I will heed your advice though & shall first attempt to remove some of the more unmentionable odors from my person.
    {shk}THANK YOU FRIEND!{shk}
    You: Nice! I think.
    So, uh, how do we get out?
    Hellhound: Oh, there's a ladder above your head. Just climb up.
    You: Climb up...
    the waterfall... ugh.
    Hellhound: {shk}HAHA! YES, THE 'WATER' FALL!{shk}
    This 'freshening up' might take a while - you head on up and I'll see you at the party. Goodbye, and thanks for dropping by!
  - Hellhound: Just climb right up the waterfall!
    {shk}I'LL SEE YOU AT THE PARTY!{shk}
}
"""

DLG SPR_d02a
"""
{clr3}Hellhound:{clr3} {shk}HELLO AGAIN FRIEND! PEOPLE ARE REMARKING ON MY FRESHNESS & COMPLIMENTING ME ON MY WORK!{shk}
Thank you!
"""

DLG SPR_e028
"""
Squid in a Jar: "Hello there, trespassing through Spook Tower are we?  It's not unheard of, especially during {wvy}this time of the year...{br}
{wvy} Normally I have no love for trespassers in my library, but it seems my caretaker has vanished, and I have run out of reading material.
{br} If you bring me some books that I will grant you safe passage to the next floor!{tye_qProg = tye_qProg + 1}(exit "SquiddingtonStudy1,3,3")
"""

DLG SPR_e029
"""
{
  - tye_BookScore >= 3 ?
    Squid in a Jar: Ohhhh absolutely {wvy}{rbw}splendid!{rbw}{wvy}{br}
    {br}Be on your way.  My caretaker will come back here eventually.(exit "SquiddingtonStudy2,3,3"){tye_qProg = tye_qProg + 1}
  - tye_BookScore >= 1 ?
    Squid in a Jar: That is a good start, you might need to grab another book or two.
  - tye_BookScore <=  tye_badEnd ?
    Squid in a Jar: {shk} THE BOOK OF MAGICAL SUSHI??!{br}HOW DARE YOU!!!!{shk}(end "With a swish, and flick of his tentacle you are transformed into a California roll filed with {shk}IMITATION CRAB?!{shk} Cursed to live the rest of your days as a piece of sushi until the avocado goes bad.{br}{br}{wvy}{rbw}********R.I.P********{rbw}{wvy}")
  - else ?
    Squid in a Jar: Well what are you standing around for? Those books will not collect themselves!
}
"""

DLG ITM_e021
"""
Book: Squid Now? Kid Now?
{tye_BookScore = tye_BookScore + 1}
"""

DLG ITM_e022
The Book of Magical Sushi{tye_BookScore = tye_BookScore - 7}

DLG ITM_e023
Book: Saucy Sea Tales: Beauty and the Squid{tye_BookScore = tye_BookScore + 2}

DLG ITM_e024
"""
Book: Cephalopods Across the Centuries
{tye_BookScore = tye_BookScore + 3}
"""

DLG SPR_e02b
Book: The Magical Book of Sushi, how to properly slice, dice, and disenchant to make: Sorcerous Sashimi, Cantrip Rolls, and Evard's Wriggling Roll

DLG SPR_e02c
Book: Squid Now? Kid Now?, a volume dedicated to solving the greatest philosophical question of the ages.

DLG SPR_e02d
Book: Saucy Sea Tales: Beauty and the Squid. The rest of the book is written in a strange looking language...

DLG SPR_e02e
Book: Cephalopods Across the Centuries, an anthology of notable squids, octopi, and cuttle fishes throughout recorded history!

DLG ITM_e026
"""
{
  - tye_qProg >= 2 ?
    You reach the entrance to the next floor without incident.
  - else ?
    (end "There are few people that are able walk away from an angry magical squid. You are not one of them.{br}{br}{wvy}{rbw}********R.I.P********{rbw}{wvy}")
}
"""

DLG SPR_e02a
Squid in a Jar: {shk}HAAARRRUUUMPH{shk}

DLG SPR_e02f
You reach for the handle on the chain, but side eye from the squid in the jar stop you in your tracks.

DLG SPR_e02g
nothing happens...

DLG SPR_e02h
"""
You pull the lever and a ladder descends from the ceiling.{br}
Squid in a Jar: I see how it is, {shk}go get out of here!!!{shk} (exit "SquiddingtonStudy2,5,3")
"""

DLG SPR_e02i
"""
{sequence
  - {clr3}Dancing Aberration:{clr3} Oh, hello there! Welcome to the party!!!!!{br}....{br}
    Wait, if you made here then you had too pass through Sir Squiddington's library.{br}
    {shk}Oh no, I forgot to bring him different books before coming up here!!
  - {clr3}Dancing Aberration:{clr3} Well, at least you weren't turned into sushi...
}
"""

DLG ITM_e011
"""
{
  - em_path == 0 ?
    {clr3}Slime ghost:{clr3} Hey, are you the mechanic i called?
    Finally! I've been waiting for {shk}hours!!!{shk}
    My slime machine is broken, I can't turn it off.
    Please! You have to help me before it floods the place!
  - em_path == 2 ?

}
"""

DLG ITM_e014
"""
{
  - em_key == 2 ?
    (The slime machine has stopped. It's humming quietly.)
  - em_key == 1 ?
    (You unlock the control panel and push the off switch.)
    (The flood of slime slows down, then stops completely.){em_key = 2}{
      - em_slime == 1 ?
        (exit "slime-4o, 4, 2")
      - else ?
        (exit "slime-3o, 4, 2")
        {em_win = 1}
    }
  - em_path == 1 ?
    The machine's control panel is locked.
    There has to be a key somewhere...{em_path = 2}
  - em_path == 2 ?
    The machine's control panel is locked.
    There has to be a key somewhere...
  - em_path == 4 ?
    The machine's control panel is locked.
    There has to be a key somewhere...
}
"""

DLG ITM_e012
"""
{
  - em_path == 0 ?
    {clr3}Slime ghost:{clr3} Did you see that? The slime is rising! 
    Hurry, before it spills out of the pool!!{em_path = 1}
  - em_path == 12 ?
    {clr3}Slime ghost:{clr3} Oh no, it's almost at the edge! 
    Don't let it flood my basement!{em_path = 13}
}
"""

DLG ITM_e013
"""
{sequence
  - {clr3}Slime ghost:{clr3} Wait, that way's to the next floor!
  - {clr3}Slime ghost:{clr3} You're going to leave without helping me? ok...
  - 
}
"""

DLG ITM_e010
"""
Found a key!{em_key = 1}{
  - em_path == 4 ?
    {em_path = 5} 

  - em_path == 1 ?
    {em_path = 12}(exit "slime-3, 9, 14")
}
"""

DLG ITM_e015
"""
{
  - onion_talk == 1 ?
    {clr3}oh hello! have you been to the spooky skeleton cult room yet? 
    it's not actually finished yet... 
    me and onion were supposed to do that but well we're really behind schedule.. 
    these things happen...
    oh you've seen onion? 
    ha ha they were really grumpy i'm sure.. 
    well i'd better go calm them down a little! 
    it was nice talking to you!{clr3}
  - else ?
    {clr3}oh hello! have you been to the spooky skeleton cult room yet? {pear_talk = 1}
    it's not actually finished yet... 
    me and onion were supposed to do that but well we're really behind schedule.. 
    these things happen...
    it'll be a nice room once we're done.. 
    if you see onion, tell them i'll be right there! 
    i've still got a couple of errands to run! 
    thank you!{clr3}
}
"""

DLG ITM_e016
"""
{
  - em_path == 0 ?
    {clr3}Slime ghost:{clr3} Did you see that? The slime is rising! 
    Hurry, before it spills out of the pool!!{em_path = 1}
  - em_path == 2 ?
    (exit "slime-3, 9, 2"){em_path = 3}
  - em_path == 3 ?
    {clr3}Slime ghost:{clr3} Oh no, it's almost at the edge! 
    Don't let it flood my basement!{em_path = 4}
  - em_path == 5 ?
    (exit "slime-4, 11, 8"){em_path = 6}
    {em_slime = 1}
  - em_path == 6 ?
    {clr3}Slime ghost:{clr3} My basement... Got slimed... {em_path = 7}
}
"""

DLG ITM_e017
"""
{
  - em_slime == 1 ?
    {clr3}Slime ghost:{clr3} Bye bye...
    Thanks for the help...
  - else ?
    {clr3}Slime ghost:{clr3} Thank you so much! Have a good day!
}
"""

DLG ITM_e018
(do you really want to dive into the slime?)

DLG ITM_e019
"""
{
  - em_key == 2 ?
    {
      - em_slime == 1 ?
        {clr3}Slime ghost:{clr3} Well, you turned it off. Thanks...
        It's gonna take forever to clean up all this slime...
      - else ?
        {clr3}Slime ghost:{clr3} You did it! You're a hero to slime ghosts!!!
    }
  - em_path == 0 ?
    {clr3}Slime ghost:{clr3} Please, you gotta shut this thing off!
    There's a control panel up top.
  - em_path == 1 ?
    {clr3}Slime ghost:{clr3} See, that slime is gonna flood the place!
  - em_path == 4 ?
    {clr3}Slime ghost:{clr3} Please... I believe in you...
  - em_path == 7 ?
    {clr3}Slime ghost:{clr3} There's slime everywhere... oh no.....
  - em_path == 13 ?
    {clr3}Slime ghost:{clr3} Hurry! You can still make it!!
}
"""

DLG SPR_e018
"""
{
  - em_win == 0 ?
    {clr3}Slime ghost:{clr3} Oh hey, I just got here.
    It took a while to clean up all the slime in my basement...
  - else ?
    {clr3}Slime ghost:{clr3} Hey, you made it! 
    
    Thanks for helping me out earlier, you're a life saver!
}
"""

DLG SPR_d018
(you sit a while and admire the rain. the crumbling brick around you slowly erodes away to wash down the tower)

DLG SPR_d019
"""
{cycle
  - Builder : Och aye! They think their crumbl'n castles are so verrah 'romantic' n' 'broodn'' but 'oo keeps the thing from falln' over? old Martha here that's 'oo.
  - Martha : Oi even set oop a propah faintn' couch out there for tha' sensitive types
}
"""

DLG SPR_d01a
Worn Sign : Warning, under renovation 

DLG SPR_d01b
{clr3}Martha{clr3} : a party? me? naw ole Martha here is always fixn' things... though I shant say no if you bring me a lil' tipple....

DLG SPR_ccc8
"""
{sequence
  - This is my sister's garden. 
    
    She left to explore the tower, so I'm keeping it nice for her.
  - She could be back any day, so it's very important.
}
"""

DLG ITM_ccc1
(The watering can still has water in it.)

DLG SPR_ccc9
"""
{sequence
  - Hey, have you seen my brother?
  - He was supposed to stay here while I found a way out...
}
"""

DLG ITM_ccc3
"""
(You hear the vine you're climbing tear out of the wall.
You try to grab for another, but it's too late.)(end "You fall, and then everything goes black.")
"""

DLG ITM_ccc4
(A small tinderbox.)

DLG SPR_ccca
"""
{
  - {item "watering can"} == 1 ?
    WHEN SHADOWS HIDE THE WAY, KEEP FAITH: THE WAY REMAINS
    (You pour a little water onto the candle. The room starts to hiss again...)(exit "garden-dark,10,11")
  - else ?
    (The smoke smells sickly sweet and floral.
    You're starting to feel dizzy. Has the inscription changed?)
    WHEN SHADOWS HIDE THE WAY, KEEP FAITH: THE WAY REMAINS
}
"""

DLG SPR_cccb
"""
{
  - {item "watering can"} == 1 ?
    WHEN SHADOWS HIDE THE WAY, KEEP FAITH: THE WAY REMAINS
    (You pour a little water onto the candle. The room starts to hiss again...)(exit "garden-dark,5,11")
  - else ?
    (The smoke smells sickly sweet and floral.
    You're starting to feel dizzy. Has the inscription changed?)
    WHEN SHADOWS HIDE THE WAY, KEEP FAITH: THE WAY REMAINS
}
"""

DLG SPR_cccc
"""
{
  - {item "tinderbox"} == 1 ?
    IN LUCE VERITAS LUCET
    
    (You strike the tinderbox, and light the candle. 
    A low hissing fills the room, and then...)(exit "garden-light,10,11")
  - else ?
    (There's an inscription around the base of the candlestick.)
    IN LUCE VERITAS LUCET
}
"""

DLG SPR_cccd
"""
{
  - {item "tinderbox"} == 1 ?
    IN LUCE VERITAS LUCET
    
    (You strike the tinderbox, and light the candle. 
    A low hissing fills the room, and then...)(exit "garden-light,5,11")
  - else ?
    (There's an inscription around the base of the candlestick.)
    IN LUCE VERITAS LUCET
}
"""

DLG SPR_ccce
"""
{shuffle
  - Daisies, for patience.
  - Rosemary, for remembrance.
  - Violets, for constancy.
}
"""

DLG SPR_c028
Crazy Guy: I really made it! This party is wonderful!! I can't believe I really made it

DLG SPR_c029
"""
{sequence
  - Dream Demon: {shk}Mleh!{shk} You want to get to the top eh? I can get you there. Come back if you wanna know how!
  - {
      - {tgnm_clue} == 1 ?
        Dream Demon: {shk}hahaha{shk} So you know what I do and who I do it for eh? But do you know who and where you are?! {shk}hahahaha{shk}(end "Your eyes open to another dreary Monday morning. Such a bizarre dream! Your day is uneventful, work was slow. On the drive home you think you see it in the distance. That mountain, the tower. The dream felt so real, but so does reality...but reality is so boring. How can this be all there is. You spend the rest of your days wallowing in existential dread until your final moments.{br}You died. Game over.")
      - else ?
        Dream Demon: You really want an easy way up there eh? {shk}Well try the dumbwaiter! hahahaha{shk}(end "with a wave of his gnarled hands you find yourself cold, wet, and traveling up. a bright light shines as you're greeted giant, hungry eyes. You look across the room. you're in a kitchen. you see the reflection of a chef's knife. Oh no! you're a pineapple, and soon you will be dessert.{br}You died. Game over.")
    }

}
"""

DLG SPR_c02a
"""
{cycle
  - Old Man: I used to be the caretaker of this floor. But those dang dream demons keep doing whatever it is they do to people. Now I just tell people to go home.
  - Old Man: Had to collapse the door to the stairs because they came alive and started eating people. There should be roof access somewhere, maybe a secret passage.
}
"""

DLG SPR_c02b
Dream Demon: {shk}Mlegh!{shk} Wanna go to the party eh? Talk t' the guy up top! {shk}hahahaha!{shk}

DLG SPR_c02c
Dream Demon: {shk}Hahaha!{shk} Don't talk t' me! I'll turn ya into a salmon!

DLG SPR_c02d
"""
{shuffle
  - {clr3}Spooky Skeleton:{clr3} Hope you didn't flood the Slime Ghost's basement!
  - {clr3}Spooky Skeleton:{clr3} I'm surprised anyone made it up here. What with all the renovations, collapsed stairs, monsters, slime, heights, deathtraps...
  - {clr3}Spooky Skeleton:{clr3} Enjoy the food! I would, but y'know.....{br}Stomach issues...{br}Mostly not having one.
  - {clr3}Spooky Skeleton:{clr3} I almost lost a femur on the way up here.
  - {clr3}Spooky Skeleton:{clr3} I really shouldn't be drinking this soda, it goes right through me {wvy}hahaha{wvy}{br}I know it's more a ghost joke, but whatever.
}
"""

DLG SPR_c018
"""
{sequence
  - {clr3}Mermaid{clr3}: I love floofy dresses so much!
    
    {clr3}Mermaid{clr3}: I want to twirl around in this dress all night!
  - And thanks to this metamorphosis necklace, I can even fit in a single tile!
}
"""

DLG SPR_c019
hello

DLG ITM_c010
You found a pearl!

DLG SPR_c01a
"""
{
  - {item "enui_pearls"} == 2 ?
    Well, thanks! It's better than nothing...
  - {item "enui_pearls"} == 5 ?
    Oh that's so helpful! Thank you so much, I was getting bored in here!   (exit "enui dry floor,6,3")
  - {item "enui_pearls"} == 3 ?
    Well, thanks! It's better than nothing...
  - {item "enui_pearls"} == 4 ?
    Thanks! Just one more missing...
  - {item "enui_pearls"} == 1 ?
    You got one already? Thanks!
  - else ?
    You can grab the vines on the wall safely, and the chains too. Don't be afraid to jump!
}
"""

DLG ITM_c012
The floor is wet; you slip, and your head hits the floor, hard. (end "You die.")

DLG ITM_c013
You slip on a puddle, and your head hits the floor, hard. (end "You die.")

DLG ITM_c014
The floor is wet; you slip, and your head hits the floor, hard. (end "You die.")

DLG ITM_c011
Water is pouring over your head; you slip on the wet floor, and hit your head, hard. (end "You die.")

DLG ITM_c015
You try to hold onto the wall but your hands slip. Your head hits the floor below, hard. (end "You die.")

DLG ITM_c016
You sit down to have a nice warm cup of tea. 

DLG SPR_c01c
"""
{sequence
  - Thank you for your help! I was able to turn of the main valve and the water is now draining away from the room.
  - I have to go and fix stuff, and take care of those vines before they gain sentience, but you're welcome to help yourself a cup of tea downstairs!
  - I also need to prepare myself for the party! I love a good party!
}
"""

DLG SPR_c01b
"""
{sequence
  - Thank you for your help! I was able to turn off the main valve, and the water is now draining away from the room.
  - I have to go and fix stuff, and take care of those vines before they gain sentience, but you're welcome to help yourself to a cup of tea downstairs!
  - I also need to prepare myself for the party! I love a good party! I'm going to wear my floofy dress!
}
"""

DLG ITM_c017
The puddles are drying off, you carefully step on one and do not slip.

DLG ITM_c018
Mermaid in a bathtub: Hello! Can you hear me over there? Please come closer!{br}Could you please help me? 

DLG ITM_c019
The necklace that allows me to walk has broken, and the five pearls have scattered around the room.{br}I've been unable to do the maintenance needed and the room is flooding! Be careful not to slip on the wet floor, it's dangerous.

DLG ITM_c01a
Look up, I'm over here!{br}You can probably grab stuff that's on the wall safely, those vines looks pretty sturdy, they're well fed. And the chains, even when wet, are easy to grab. Don't be afraid to jump.{br}

DLG SPR_bbb8
"""
{sequence
  - {clr2}{shk}BOOOOO!!!! 
    SSSSSSCARY SSSSSTUFF!!! 
    TURN BACK!!! 
    DONT COME HERE!!!{shk}
    ...ah heck.. look we never got this floor done...
    its in construction... 
    its very dangerous.... 
    lots of things are unstable.....
    
    just...
    {wvy}do what u want i guess{wvy}....{clr2}
  - {clr2}dont cry to me if you die....{clr2}
}
"""

DLG SPR_bbb9
"""
{sequence
  - {clr2}{shk}AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHHHHHHHHHHHHHHHHHHHHHHHH!!!!!!{shk}{clr2}
  - {shk}{clr2}DONT SNEAK UP ON ME LIKE THAT!!!{clr2}{shk}
}
"""

DLG ITM_bbb0
"""
{sequence
  - WOW! you found a useless key!!
  - ..you do know its useless right?
}
"""

DLG SPR_bbbb
"""
{sequence
  - {clr3}ok boiz! {onion_talk = 1}
    we need to get this floor done!! 
    let's just get to it! 
    chop-chop! 
    we need to clean this mes- {shk}OH NO! you shouldnt be here!!!!!!!{shk} there's signs all over saying DANGER! didn't you see them?!! no?? {shk}BONESKULL!!!!!!{shk}{clr3}
    
    {clr2}y-yes?{clr2}
    
    {shk}{clr3}YOU WERE SUPPOSED TO PUT THE SIGNS EVERY WHERE!!!{clr3}{shk}
    {clr2}o-oh well u never gave me the signs....{clr2}
    {clr3}{shk}DAMMIT!!! I KNEW I FORGOT SOMETHING!!!!!{shk} 
    ALRIGHT WELL JUST BE CAREFUL!!!
    EVERYTHING IS A MESS!! 
    {shk}LEAVE THIS FLOOR!!{shk}{clr3}
  - {
      - pear_talk == 1 ?
        {sequence
          - {clr3}o-oh you've seen pear? they're still running the errands.... dang.. i was hoping they'd be here by now but thanks for letting me know..{clr3}
          - {clr3}well run along- well not literally! 
            there's plenty of ways to die if you're not careful!{clr3}
        }
      - else ?
        {clr3}{shk}I SAID LEAVE THIS FLOOR!!{shk}{clr3}
    }
}
"""

DLG SPR_bbbc
"""
{clr2}..i think i'm stuck in this wall.... oh well.. 
{wvy}that means i dont have to help out!{wvy}{clr2}
"""

DLG SPR_bbbd
"""
{
  - pear_talk == 3 ?
    {clr3}goodness my! onion said so.... 
    well it is true........ my heart belongs only to them.... 
    but i'm sure they meant nothing rude! they can be a bit jealous.. do not worry ur self.. just enjoy the party!{clr3}
  - pear_talk == 2 ?
    {clr3}you just talked to onion?
    oh nice! {onion_talk = 3}
    they weren't too mean i hope! we're just glad you didn't get hurt on our unfinished floor!{clr3}
  - pear_talk == 1 ?
    {clr3}oh hello again! {onion_talk = 2}
    it's nice to see you!
    me and onion still got a lot to finish in terms of that room but well hope you liked a bit of what you saw! we were quite busy this month! just enjoy the party now! its quite a blast!!{clr3}
  - else ?
    {clr3}hello! i dont think i saw u while i was running errands.. its a neat place, isnt it? 
    and now a party! how rad! i hope you enjoy urself!{clr3}
}
"""

DLG SPR_bbbe
"""
{clr2}oh you're trespassing.... 

well just be careful, onion is in a bad mood... 
this was supposed to be finished last week u kno....{clr2}
"""

DLG SPR_bbbf
{clr2}w-what? {shk}im not hiding!!{shk} im.... doing things.. yeah...{clr2}

DLG SPR_bbbg
"""
{
  - onion_talk == 1 ?
    {clr3}oh hello! have you been to the spooky skeleton cult room yet? 
    it's not actually finished yet... 
    me and onion were supposed to do that but well we're really behind schedule.. 
    these things happen...
    oh you've seen onion? 
    ha ha they were really grumpy i'm sure.. 
    well i'd better go calm them down a little! 
    it was nice talking to you!{clr3}
  - else ?
    {clr3}oh hello! have you been to the spooky skeleton cult room yet? {pear_talk = 1}
    it's not actually finished yet... 
    me and onion were supposed to do that but well we're really behind schedule.. 
    these things happen...
    it'll be a nice room once we're done.. 
    if you see onion, tell them i'll be right there! 
    i've still got a couple of errands to run! 
    thank you!{clr3}
}
"""

DLG ITM_bbb1
"""
{sequence
  - {shk}whoa!!{shk}
  - 
}
"""

DLG SPR_bbba
"""
{
  - onion_talk == 3 ?
    {clr3}..pear is too nice.......
    enjoy the party ok! plz! give us some time alone!!!{clr3}
  - onion_talk == 2 ?
    {clr3}you talked to pear?
    well good for u!
    also hands off! i know they are dreamy but!!!{pear_talk = 3}
    they are mine ok!!! go do something else!{clr3}
  - onion_talk == 1 ?
    {clr3}.....hello again.. {pear_talk = 2}
    i cant believe u saw the unfinished floor!!!
    so embarrassing!!!
    but like look.. i didnt have time!! we got called on a case and then i had to race these bad guys.. it was a whole big deal!!! but anyway whatever!! enjoy the party!!{clr3}
  - else ?
    {sequence
      - {clr3}{shk}ugh!!! YOU!!!! YOU WERE ON MY UNFINISHED FLOOR!!!{shk} 
        WELL GOOD OF U NOT TO DIE!!!!!! 
        HONESTLY WHAT WERE U EVEN THINKING!!!{clr3}
      - {clr3}well just.. enjoy the party...
        
        feel lucky u didnt die i guess...{clr3}
    }
}
"""

DLG ITM_a020
"""
{sequence
  - {clr3}Medusa Mae:{clr3} Hey! Hey, up here!!
    Look at me, I turned into a snake person! How cool is that!{br}
    {clr3}Medusa Mae:{clr3} But now you've stumbled into my lair, and have to somehow {wvy}get out!! OOOOH{wvy}
  - {clr3}Medusa Mae:{clr3} It all seems so simple, right? Just walk across the platform...the door is right there...
}
"""

DLG ITM_a021
"""
{
  - {item "slime PERMANENT"} >= 1 ?
    (exitNow "a02-2,10,8")(Your slippery slime feet make you glide effortlessly toward the exit.){br}
    (A trap door opens up in the floor behind you, but you are too fast to fall through.)
  - else ?
    (exitNow "a02-2,8,10")(The platform opens up from underneath you, and you begin to fall.)
}
"""

DLG ITM_a022
"""
It's some slime, pouring out onto the floor.
You splash your feet into it a little...
Now everything is {wvy}very slippery...{wvy}
"""

DLG ITM_a023
(endNow "You land in the pit of crabs and they tickle you to death.{br}{clr3}Medusa Mae:{clr3} What, did you think they were gonna do something gruesome? Crabs are {rbw}nice!!{rbw}")

DLG ITM_a024
(endNow "You land in the pit of crabs and they tickle you to death.{br}{clr3}Medusa Mae:{clr3} What, did you think they were gonna do something gruesome? Crabs are {rbw}nice!!{rbw}")

DLG ITM_a025
(endNow "You land in the pit of crabs and they tickle you to death.{br}{clr3}Medusa Mae:{clr3} What, did you think they were gonna do something gruesome? Crabs are {rbw}nice!!{rbw}")

DLG ITM_a026
(endNow "You land in the pit of crabs and they tickle you to death.{br}{clr3}Medusa Mae:{clr3} What, did you think they were gonna do something gruesome? Crabs are {rbw}nice!!{rbw}")

DLG ITM_a027
(endNow "You land in the pit of crabs and they tickle you to death.{br}{clr3}Medusa Mae:{clr3} What, did you think they were gonna do something gruesome? Crabs are {rbw}nice!!{rbw}")

DLG ITM_a028
(endNow "You land in the pit of crabs and they tickle you to death.{br}{clr3}Medusa Mae:{clr3} What, did you think they were gonna do something gruesome? Crabs are {rbw}nice!!{rbw}")

DLG ITM_a029
"""
{sequence
  - {clr3}Medusa Mae:{clr3} {shk}WHAAAAT?{shk} You were supposed to fall down in the pit!! :({br}
    {clr3}Medusa Mae:{clr3} Now I'm sad...
  - {clr3}Medusa Mae:{clr3} You could still fall down in the pit if you wanted to...there's still time...
  - {clr3}Medusa Mae:{clr3} OKAY {wvy}FIIIINE,{wvy} have it YOUR way. 
    {clr3}Medusa Mae:{clr3} Go up those stairs, why don't you! Don't tease me like this. >:(
}
"""

DLG ITM_a02a
(Even though you made it safely to the other side, you still decide to throw yourself in the pit anyway.)

DLG ITM_a02b
{clr3}Medusa Mae:{clr3} {shk}MWAHAHAHAHAHAHAHA!!!{shk}

DLG ITM_a02c
"""
{clr3}Medusa Mae:{clr3} {shk}RELEASE THE CRABS!!!{shk}{br}
{clr3}Medusa Mae:{clr3} .........{br}
{clr3}Medusa Mae:{clr3} {shk}YEAH, A PIT OF SNAKES WOULD'VE FIT THE THEME BETTER, BUT I LIKE CRABS, SO SHUT UP!!!!!{shk}
"""

DLG SPR_a028
"""
{cycle
  - {clr3}Emma Daues:{clr3} {rbw}Hey!!!{rbw} You made it to the party!!
    {clr3}Emma Daues:{clr3} There are no crabs up here unfortunately. :(
  - {clr3}Emma Daues:{clr3} I didn't really transform into a Medusa. I just made this costume myself!!{br}
    {clr3}Emma Daues:{clr3} Do you like how my pigtail buns are little coiled snakes??
  - {clr3}Emma Daues:{clr3} Ever since I was in {wvy}Kindergarten{wvy} I've been hand-making my own Halloween costumes!!
    {clr3}Emma Daues:{clr3} None of them were ever as elaborate as this one...
  - {clr3}Emma Daues:{clr3} I dressed up as {rbw}Schrodinger's Cat{rbw} one year!! 
    {clr3}Emma Daues:{clr3} I had to explain what I was to all the houses I went trick-or-treating at.{br}
    {clr3}Emma Daues:{clr3} And then they gave me extra candy!!
  - {clr3}Emma Daues:{clr3} {shk}I LOVE CANDY CORN AND I WILL DIE ON THIS HILL{shk}
    (You hear several other party members yell across the room.)
    {clr3}Emma Daues:{clr3} {shk}SHIT I STARTED FOOD DISCOURSE AGAIN DIDN'T I{shk}
  - (Emma downs an entire glass of spiced apple cider.)
  - {clr3}Emma Daues:{clr3} Were you at my birthday bash a couple weeks ago? I think I remember seeing you there...
    {clr3}Emma Daues:{clr3} That was {rbw}wild!!{rbw}
  - {clr3}Emma Daues:{clr3} {wvy}skeletons skeletons skeletons hey{wvy}
}
"""

DLG ITM_a010
"""
{
  -ripple_rope==1?
    (You use the rope to get up and down.)
  -ripple_rope==0?
    You try to simply jump straight down. Without a way to get back up again, you are flattened by a moving shaft.{br} (exitNow "ripple_room2_splash_screen,1,14"){
shuffle
  -{clr2}YOUR TIME HAS RUN OUT{clr2}
  -{clr2}YOUR TIME HAS COME{clr2}
  -{clr2}YOUR TIME IS UP{clr2}
}

}
"""

DLG ITM_a011
"""
(As you walk past the lantern on the ground, you accidentally knock it over. The fire quickly spreads to your grease soaked clothing setting you alight! Quickly, you must put yourself out! Every second counts!!){
ripple_fire_start=1
ripple_fire_steps=ripple_oil
}
"""

DLG ITM_a012
"""
{
  -ripple_fire_start==1?
    {ripple_fire_steps=ripple_fire_steps+1}({ripple_step=ripple_fire_steps-ripple_oil}{print ripple_step} burning step/s){br}
}{
  -ripple_fire_steps>=8?
    Too late! Maybe it was all the grease ({print ripple_oil}), or maybe you were too slow ({ripple_step=ripple_fire_steps-ripple_oil}{print ripple_step} steps), either way you are burnt to cinders...
{br} (exitNow "ripple_room2_splash_screen,1,14"){
shuffle
  -{clr2}YOUR TIME HAS RUN OUT{clr2}
  -{clr2}YOUR TIME HAS COME{clr2}
  -{clr2}YOUR TIME IS UP{clr2}
}
}
"""

DLG ITM_a013
"""
(You feel the sudden rush of cool air past you from some unseen cracks in the walls. 
The candle-light ahead flickers wildly.)
"""

DLG ITM_a014
"""
{
  -ripple_oil==0?
    (From above you feel the splash of liquid dripping down. Too late to get out of the way, you are coated in some oily grease.){
ripple_oil=ripple_oil+1
}
  -ripple_oil>0?
    (You get doused in even MORE grease.){
ripple_oil=ripple_oil+1}}
"""

DLG ITM_a015
"""
{
  -ripple_oil==0?
    (You feel grease splatter on you as it drips from above.){ripple_oil=ripple_oil+6}
  -else?
    (You are coated by even more grease from above.){ripple_oil=ripple_oil+6)
}
"""

DLG SPR_8
(You feel oil splatter on you as it drips from above.){ripple_oil=ripple_oil+1}

DLG ITM_a016
(You equip Alucart's Hell Blade, the highest dps two-handed weapon in the gam- world.){ripple_alucart=1}

DLG ITM_a017
"""
{
  -ripple_alucart==1?
    (A resounding GONG echos through the halls as the Bell tolls once again. 
At the sound, Alucart's Blade just shatters in your hands. Oh well.){ripple_alucart=0}
}
"""

DLG ITM_a018
"""
{
  -ripple_rope==1?
    (You use your rope to swing across.)(exit "ripple_room1_the_barren_belltower,4,12")
  -else?
    (You cannot seem to find a way to cross the gap yet.)
}
"""

DLG ITM_a019
"""
{
  -ripple_rope==1?
    (You use your rope to swing across.)(exit "ripple_room1_the_barren_belltower,7,12")
  -else?
    (You cannot seem to find a way to cross the gap yet.)
}
"""

DLG ITM_a01a
"""
(As you enter into the Bell Tower, the clock strikes an eternal Midnight and begins tolling out the hour in resounding Booms. You stagger to the ground, overwhelmed by the sound. 
Then, from above, a heavily hunched and disfigured person swoops down to try to shield you from the sound. He insistently pushes wads of wax into your hands. You shove the wax into your ears and immediately the sounds of the bell are muted, though still felt throughout your body. 
Before you can thank your benefactor, the hunchback leaps off and away into the darkness of the Bell Tower...)
"""

DLG ITM_a01b
"""
{
  -ripple_riddler_dg==1?
    (Seeing a clock on the wall, you realize it's just the thing to answer the Riddle! You smash the clock and take the pieces with you.){ripple_riddler_dg=2}
}
"""

DLG ITM_a01c
(You pick up a rope.){ripple_rope=1}

DLG ITM_a01d
"""
{
  -ripple_fire_start==0?
    (You see a bucket of wet rags on the ground.)
  -ripple_fire_start==1?
    (You quickly use the wet rags to smother the fire! Phew, that was close!){
ripple_fire_start=0
ripple_fire_steps=0
ripple_oil=0
}

}
"""

DLG SPR_a019
"""
{
  -ripple_riddler_dg==0?
    (Under a web of chains in a cramped little corner appears a fidgety man. Sometimes sitting sometimes standing to pace, all the while furiously writing in a little notebook and muttering wordlessly to himself.
At your approach he holds up his notebook and points at it with wild intensity. It reads: {clr2}'What time is it when the clock strikes Thirteen?'{clr2}
You've heard this one before. You try to tell him the answer but realize that neither speaking nor hearing can be done over the booming tolls of the Bell.){ripple_riddler_dg=1}
  -ripple_riddler_dg==1?
    {clr2}'What time is it when the clock strikes Thirteen?'{clr2}{br}(To answer the man's riddle, you would need to show him the answer.)
  -ripple_riddler_dg==2?
    (You show the man the broken pieces of a clock. 'What time is it when the clock strikes Thirteen? It's time to get a new clock!' {br} The man stares at the pieces, then at you, then begins to chortle, then guffaw, then cackle madly clutching at his sides. He ends up in a heap on the ground, twitching. You guess he liked your answer.){ripple_riddler_dg=3}{ripple_riddle=1}
  -ripple_riddler_dg==3?
   (Before you continue on, you sneak a peak at the final page of his notebook: {clr2}'Struck 8, I cannot wait. Struck 9, the current date. Struck 10, an hour late. Struck 12, I await my fate...'{clr2}{br}Rather than stay and ponder it, you get the foreboding feeling that you don't have the time to waste...
}
"""

DLG SPR_a01a
"""
{
  -ripple_rope==1?
    (You use the rope to get up and down.)
  -ripple_rope==0?
    You try to just jump straight down. Without a way to get back up again, you are flattened by a moving shaft.{br} (exitNow "ripple_room2_splash_screen,1,14"){
shuffle
  -{clr2}YOUR TIME HAS RUN OUT{clr2}
  -{clr2}YOUR TIME HAS COME{clr2}
  -{clr2}YOUR TIME IS UP{clr2}
}

}
"""

DLG SPR_a01b
"""
{
  -ripple_curator_dg==0?
    (You see a strange bent-over humanoid with a beak sticking out from under his dark trailing cloak.)
{clr3}The Curator:{clr3} Ah, we were expecting you. Let's see, The Barren Belltower was it? Dodged the pillars, check, crossed the broken bridge, check, got through the fire, check check, and oh! Navigated the maze of darkness to the end, very good very good. Congratulations, you'll make a FINE monster.{ripple_curator_dg=1}
  -ripple_curator_dg==1?
    {clr3}The Curator:{clr3} Come, join us! Oh, and the Hunchback sends his regards.
{
  -ripple_riddle==1?
    And the Riddler... sends his...something...}
}
"""

DLG ITM_0
"""
A rain-soaked envelope. The invitation inside reads:
There's a party tonight at the top of {shk}SPOOK TOWER!{shk}
You're invited...{wvy}If you can survive!!!{wvy}(jsNow "newGame()")
"""

DLG ITM_1
(jsNow "nextFloor()"){}(exitNow floor_entrance){print floor_title}{br}by {print floor_author}

DLG ITM_2
(jsNow "savedFloor()"){}(exitNow floor_entrance){print floor_title}{br}by {print floor_author}

DLG SPR_9
"""
{sequence
  - {clr3}Ayo:{clr3} You found my invitation!{br}{clr3}You:{clr3} ...the one lying in rain?{br}{clr3}Ayo:{clr3} Yes!{br}{clr3}You:{clr3} Literally right outside the door?{br}{clr3}Ayo:{clr3} Exactly!
  - {clr3}You:{clr3} What are you doing up here?{br}{clr3}Ayo:{clr3} {wvy}*sigh*{wvy} just admiring our tower...
  - {clr3}Ayo:{clr3} I'm glad you could make it all the way to the party.{br}{clr3}You:{clr3} Well, I almost died a lot on the way up, so...{br}{clr3}Ayo:{clr3} You seem fine, though.
  - {clr3}Ayo:{clr3} Anyway, that's pretty much it. That's {shk}SPOOK TOWER{shk}!{br}{clr3}You:{clr3} It was Ok, I guess.{br}{clr3}Ayo:{clr3} {clr2}:|{clr2} ...
  - {clr3}Ayo:{clr3} If you've talked to everyone, you can head on out through that pipe below.
  - {clr3}Ayo:{clr3} But those flowers are creepy, right? They give me the willies.
}
"""

DLG ITM_3
(exitNow "party right,11,8"){}*Yeeowch!*

DLG ITM_4
(the fountain gently bubbles and splashes)

DLG ITM_5
"""
{sequence
  - {clr3}Ayo:{clr3} Hey! Get down from there! You're not supposed to be able to get up there!{br}{clr3}You:{clr3} !!!
  - {clr3}Ayo:{clr3} Quit mucking around up there!
}
"""

END b010
You leap for the ledge above you, missing by a wide gap, and fall into the darkness below.

END a030
(You walk carelessly off the edge, plummetting to your doom.)

END a031
(You fumble on the broken rungs, slip, and fall to your doom.)

END a032
(You hop off the ledge and drop swiftly to your doom.)

END a033
(You drop, misjudge the landing, and tumble to your doom.)

END a034
(You lose your footing in the current and slip to your doom.)

END e010
(You jump into the slime pool, but... you can't swim!)

END c02d
Your foot slips off the broken ladder. You try to catch yourself of the top of another ladder, but only manage to hit yourself with every rung on the way down in an exaggerated, slapstick fashion.{br}Your last thought as you hit the bottom is, "Oh no, my ghost is going to do this for an eternity."{br}You died. Game over.

END c02e
You miscalculate your leap to the rest of the broken ladder. You try to catch yourself, but only manage to hit yourself with every rung on the way down in an exaggerated, slapstick fashion.{br}Your last thought as you hit the bottom is, "Oh no, my ghost is going to do this for an eternity."{br}You died. Game over.

END c02f
The already broken ladder begins to snap and break further, sending you plummeting to the ground.{br}Thankfully the old man broke your fall.{br}Unfortunately, his cane broke your back.{br}Your adventuring days are over. Game over.

END bbbd
oh no...... you're dead...

END bbbe
you walked right into the witch flame.... ur dead buster!

END a010
(You lose your footing along the rain-swept ledge and plummet fourteen floors to the ground. It's a long way to think about how close you came to success.)

END e011
{rbw}You made to the top of the tower!{rbw} Great Job! Thanks for playing!

VAR a
42

VAR caeask
0

VAR caecat
0

VAR tye_qProg
0

VAR tye_BookScore
0

VAR tye_badEnd
-1

VAR em_key
0

VAR em_path
0

VAR em_slime
0

VAR em_win
0

VAR ripple_fire_start
0

VAR ripple_fire_steps
0

VAR ripple_oil
0

VAR ripple_alucart
0

VAR ripple_rope
0

VAR ripple_riddler_dg
0

VAR ripple_curator_dg
0

VAR ripple_riddle
0

VAR onion_talk
0

VAR pear_talk
0

FONT blacksphinx.v2
SIZE 6 8
CHAR 0
000000
000000
000000
000000
000000
000000
000000
000000
CHAR 32
000000
000000
000000
000000
000000
000000
000000
000000
CHAR 33
000100
001100
001100
001100
001000
000000
000100
001100
CHAR 34
011011
011011
011011
010010
000000
000000
000000
000000
CHAR 35
000000
001010
011111
001010
001010
011111
001010
000000
CHAR 36
001000
001110
010000
001100
000010
011100
000100
000000
CHAR 37
011001
011001
000010
000100
001000
010011
010011
000000
CHAR 38
001000
010100
010100
001000
010101
010010
001101
000000
CHAR 39
001100
001100
001000
000000
000000
000000
000000
000000
CHAR 40
000100
001000
001000
001000
001000
001000
000100
000000
CHAR 41
001000
000100
000100
000100
000100
000100
001000
000000
CHAR 42
000000
001010
001110
011111
001110
001010
000000
000000
CHAR 43
000000
000100
000100
011111
000100
000100
000000
000000
CHAR 44
000000
000000
000000
000000
000000
001100
001100
001000
CHAR 45
000000
000000
000000
011111
000000
000000
000000
000000
CHAR 46
000000
000000
000000
000000
000000
000100
001100
000000
CHAR 47
000000
000001
000010
000100
001000
010000
000000
000000
CHAR 48
001110
011011
011011
011111
011011
011011
001110
000000
CHAR 49
000100
001100
011100
001100
001100
001100
001100
001000
CHAR 50
001110
011011
000011
001110
011000
011011
011111
000000
CHAR 51
001110
011011
000011
000110
000011
011011
001110
000000
CHAR 52
000111
001011
011011
011011
011111
000011
000011
000010
CHAR 53
011111
011011
011000
001110
000011
011011
011110
000000
CHAR 54
000110
001011
011000
011110
011011
011011
001110
000000
CHAR 55
011111
011001
000010
000100
001000
011000
011000
010000
CHAR 56
001110
011011
011011
001110
011011
011011
001110
000000
CHAR 57
001110
011011
011011
001111
000011
011010
001100
000000
CHAR 58
000000
000000
000100
001100
000000
000100
001100
000000
CHAR 59
000000
000000
000100
001100
000000
001100
001100
001000
CHAR 60
000010
000100
001000
010000
001000
000100
000010
000000
CHAR 61
000000
000000
011111
000000
000000
011111
000000
000000
CHAR 62
001000
000100
000010
000001
000010
000100
001000
000000
CHAR 63
001110
011011
011011
000011
001110
011000
000000
011000
CHAR 64
001110
010001
010111
010101
010111
010000
001110
000000
CHAR 65
001110
011011
011011
011111
011011
011011
001011
000001
CHAR 66
011110
011011
011011
011110
011011
011011
001110
000100
CHAR 67
011111
011011
011000
011000
011000
011011
001110
000100
CHAR 68
011110
011011
011011
011011
011011
011011
011110
000100
CHAR 69
011110
011011
011000
011100
011000
011011
001110
000100
CHAR 70
011110
011011
011000
011100
011000
011000
011000
001000
CHAR 71
011110
011011
011000
011011
011011
011011
001111
000011
CHAR 72
010010
011011
011011
011111
011011
011011
001011
000001
CHAR 73
011000
001100
001100
001100
001100
001100
001100
000110
CHAR 74
000010
000011
000011
001011
011011
011011
001110
000100
CHAR 75
011011
011011
011010
011100
011010
011011
001011
000001
CHAR 76
001000
011000
011000
011000
011000
011011
011110
001000
CHAR 77
011000
010110
010101
010101
010101
010101
010101
000101
CHAR 78
011010
011111
011011
011011
011011
011011
001011
000001
CHAR 79
001110
011011
011011
011011
011011
011011
001110
000000
CHAR 80
011110
011011
011011
011110
011000
011000
011000
001000
CHAR 81
001110
011011
011011
011011
011011
001110
000011
011110
CHAR 82
011110
011011
011011
011110
011011
011011
001011
000001
CHAR 83
001110
011011
011000
001110
000011
011011
001110
000100
CHAR 84
011111
001100
001100
001100
001100
001100
001100
000100
CHAR 85
011011
011011
011011
011011
011011
011011
001110
000000
CHAR 86
011011
011011
011011
011011
011011
011011
001110
000100
CHAR 87
010101
010101
010101
010101
010101
010101
011010
001000
CHAR 88
011011
011011
001010
000100
001010
011011
001011
000001
CHAR 89
011011
011011
011011
011011
001111
000011
000110
011100
CHAR 90
011111
011011
000110
001100
011000
011011
011111
010000
CHAR 91
001110
001000
001000
001000
001000
001000
001110
000000
CHAR 92
000000
010000
001000
000100
000010
000001
000000
000000
CHAR 93
001110
000010
000010
000010
000010
000010
001110
000000
CHAR 94
000100
001010
010001
000000
000000
000000
000000
000000
CHAR 95
000000
000000
000000
000000
000000
000000
000000
111111
CHAR 96
001100
001100
000100
000000
000000
000000
000000
000000
CHAR 97
000000
010000
001110
000011
011111
011011
001101
000000
CHAR 98
001000
011000
011110
011011
011011
011011
001110
000000
CHAR 99
000000
000000
001110
011011
011000
011011
001110
000000
CHAR 100
011110
100011
001111
011011
011011
011011
001110
000000
CHAR 101
000000
000000
001110
011011
011111
011000
001110
000000
CHAR 102
000111
001100
011110
001100
001100
001100
001100
011000
CHAR 103
000000
000000
001110
011011
011011
001111
100011
011110
CHAR 104
001000
011000
011110
011011
011011
011011
001010
000000
CHAR 105
000000
010000
001000
001100
001100
001100
001100
000110
CHAR 106
000000
000100
000010
000011
000011
000011
011011
001110
CHAR 107
001000
011000
011011
011011
011110
011011
001011
000001
CHAR 108
000100
001100
001100
001100
001100
001100
001100
000110
CHAR 109
000000
000000
010101
011111
010101
010101
010101
000000
CHAR 110
000000
000000
010110
011011
011011
011011
001001
000000
CHAR 111
000000
000000
001110
011011
011011
011011
001110
000000
CHAR 112
000000
000000
001110
011011
011011
011011
011110
011000
CHAR 113
000000
000000
001110
011011
011011
011011
001111
000011
CHAR 114
000000
000000
010110
011011
011000
011000
011000
000000
CHAR 115
000000
000001
001110
011000
011111
000011
011110
000000
CHAR 116
000000
001100
011110
001100
001100
001100
001100
000110
CHAR 117
000000
000000
001010
011011
011011
011011
001110
000000
CHAR 118
000000
000000
011011
011011
011011
001110
000100
000000
CHAR 119
000000
000000
010101
010101
010101
011111
010101
000000
CHAR 120
000000
000000
011011
011011
001110
011011
011011
000000
CHAR 121
000000
000000
011011
011011
011011
001111
100011
011110
CHAR 122
000000
010000
001111
000011
001110
011000
011111
000000
CHAR 123
000110
001000
001000
011000
001000
001000
000110
000000
CHAR 124
000100
000100
000100
000100
000100
000100
000100
000100
CHAR 125
001100
000010
000010
000011
000010
000010
001100
000000
CHAR 126
000000
000000
000000
001010
010100
000000
000000
000000
CHAR 160
000000
000000
000000
000000
000000
000000
000000
000000
CHAR 161
001100
001000
000000
000100
001100
001100
001100
001000
CHAR 162
000000
000100
001110
010000
010000
001110
000100
000000
CHAR 163
000110
001001
001000
011110
001000
001001
010111
000000
CHAR 165
010001
001010
000100
011111
000100
011111
000100
000000
CHAR 167
001110
010001
001100
001010
000110
010001
001110
000000
CHAR 171
000000
000000
001001
010010
001001
000000
000000
000000
CHAR 172
000000
000000
111111
000001
000001
000000
000000
000000
CHAR 177
000000
000100
001110
000100
000000
001110
000000
000000
CHAR 178
011000
000100
001000
011100
000000
000000
000000
000000
CHAR 181
000000
000000
010010
010010
010010
011100
010000
010000
CHAR 182
001111
010101
010101
001101
000101
000101
000101
000000
CHAR 187
000000
000000
010010
001001
010010
000000
000000
000000
CHAR 188
010000
010010
010100
001011
010101
000111
000001
000000
CHAR 189
010000
010010
010100
001110
010001
000010
000111
000000
CHAR 191
000100
000000
000100
001100
010000
010001
001110
000000
CHAR 196
001010
000000
001110
011011
011011
011111
011011
000001
CHAR 197
001110
001010
001110
011011
011011
011111
011011
000001
CHAR 198
001111
011010
011010
011111
011010
011010
001011
000000
CHAR 199
011111
011011
011000
011000
011011
001110
000100
001100
CHAR 201
000011
000000
011111
011001
011100
011001
011111
000000
CHAR 209
001010
010100
000000
010010
011010
010110
010010
000000
CHAR 214
010010
001100
010010
010010
010010
010010
001100
000000
CHAR 220
001010
000000
010010
010010
010010
010010
001100
000000
CHAR 223
000000
011100
010010
011100
010010
010010
011100
010000
CHAR 224
001100
000000
001110
000011
011111
011011
001101
000000
CHAR 225
000110
000000
001110
000011
011111
011011
001101
000000
CHAR 226
001110
000000
001110
000011
011111
011011
001101
000000
CHAR 228
001010
000000
001110
000011
011111
011011
001101
000000
CHAR 229
001110
001010
001110
000011
011111
011011
001101
000000
CHAR 230
000000
010000
001110
000101
011111
010100
001110
000000
CHAR 231
000000
001110
011011
011000
011011
001110
000100
001100
CHAR 232
001100
000000
001110
011011
011111
011000
001110
000000
CHAR 233
000011
000000
001110
011011
011111
011000
001110
000000
CHAR 234
001110
000000
001110
011011
011111
011000
001110
000000
CHAR 235
001010
000000
001110
011011
011111
011000
001110
000000
CHAR 236
001000
000000
001000
001100
001100
001100
001100
000110
CHAR 237
000110
000000
001000
001100
001100
001100
001100
000110
CHAR 238
000100
001010
000000
001100
001100
001100
001100
000110
CHAR 239
001010
000000
001000
001100
001100
001100
001100
000110
CHAR 241
001010
010100
000000
010110
011011
011011
001001
000000
CHAR 242
011000
000000
001110
011011
011011
011011
001110
000000
CHAR 243
000110
000000
001110
011011
011011
011011
001110
000000
CHAR 244
001110
000000
001110
011011
011011
011011
001110
000000
CHAR 246
001010
000000
001110
011011
011011
011011
001110
000000
CHAR 247
001010
000000
001110
011011
011011
011011
011011
001110
CHAR 249
011000
000000
010010
010010
010010
010110
001010
000000
CHAR 250
000110
000000
001010
011011
011011
011011
001110
000000
CHAR 251
001110
000000
001010
011011
011011
011011
001110
000000
CHAR 252
010010
000000
001010
011011
011011
011011
001110
000000
CHAR 255
001010
000000
011011
011011
011011
001111
100011
011110
CHAR 402
000010
000101
000100
001110
000100
000100
010100
001000
CHAR 915
011110
010010
010000
010000
010000
010000
010000
000000
CHAR 920
001100
010010
010010
011110
010010
010010
001100
000000
CHAR 931
011111
010000
001000
000100
001000
010000
011111
000000
CHAR 934
001110
000100
001110
010001
001110
000100
001110
000000
CHAR 937
000000
001110
010001
010001
001010
001010
011011
000000
CHAR 948
001100
010000
001000
000100
001110
010010
001100
000000
CHAR 949
000000
001110
010000
011110
010000
001110
000000
000000
CHAR 960
000000
011111
001010
001010
001010
001010
001010
000000
CHAR 963
000000
000000
001111
010010
010010
001100
000000
000000
CHAR 964
000000
000000
001010
010100
000100
000100
000100
000000
CHAR 966
000000
000100
001110
010101
010101
001110
000100
000000
CHAR 8226
000000
000000
000000
001100
001100
000000
000000
000000
CHAR 8252
001001
011011
011011
010010
000000
001001
011011
000000
CHAR 8592
000000
000100
001000
011111
001000
000100
000000
000000
CHAR 8593
000100
001110
010101
000100
000100
000100
000100
000000
CHAR 8594
000000
000100
000010
011111
000010
000100
000000
000000
CHAR 8595
000100
000100
000100
000100
010101
001110
000100
000000
CHAR 8734
000000
000000
001010
010101
010101
001010
000000
000000
CHAR 8735
000000
000000
000000
010000
010000
010000
011111
000000
CHAR 8801
000000
011110
000000
011110
000000
011110
000000
000000
CHAR 8804
000010
001100
010000
001100
000010
000000
011110
000000
CHAR 8805
010000
001100
000010
001100
010000
000000
011110
000000
CHAR 8962
000100
001110
011011
010001
010001
011111
000000
000000
CHAR 8976
000000
000000
011111
010000
010000
010000
000000
000000
CHAR 9472
000000
000000
000000
111111
000000
000000
000000
000000
CHAR 9474
000100
000100
000100
000100
000100
000100
000100
000100
CHAR 9488
000000
000000
000000
111100
000100
000100
000100
000100
CHAR 9492
000100
000100
000100
000111
000000
000000
000000
000000
CHAR 9500
000100
000100
000100
000111
000100
000100
000100
000100
CHAR 9508
000100
000100
000100
111100
000100
000100
000100
000100
CHAR 9516
000000
000000
000000
111111
000100
000100
000100
000100
CHAR 9524
000100
000100
000100
111111
000000
000000
000000
000000
CHAR 9532
000100
000100
000100
111111
000100
000100
000100
000100
CHAR 9552
000000
111111
000000
111111
000000
000000
000000
000000
CHAR 9553
010100
010100
010100
010100
010100
010100
010100
010100
CHAR 9556
000000
011111
010000
010111
010100
010100
010100
010100
CHAR 9557
000000
111100
000100
111100
000100
000100
000100
000100
CHAR 9558
000000
000000
000000
111100
010100
010100
010100
010100
CHAR 9559
000000
111100
000100
110100
010100
010100
010100
010100
CHAR 9561
010100
010100
010100
011111
000000
000000
000000
000000
CHAR 9562
010100
010111
010000
011111
000000
000000
000000
000000
CHAR 9563
000100
111100
000100
111100
000000
000000
000000
000000
CHAR 9564
010100
010100
010100
111100
000000
000000
000000
000000
CHAR 9565
010100
110100
000100
111100
000000
000000
000000
000000
CHAR 9566
000100
000111
000100
000111
000100
000100
000100
000100
CHAR 9567
010100
010100
010100
010111
010100
010100
010100
010100
CHAR 9568
010100
010111
010000
010111
010100
010100
010100
010100
CHAR 9569
000000
000000
010010
010010
010010
011100
010000
010000
CHAR 9570
010100
010100
010100
110100
010100
010100
010100
010100
CHAR 9571
010100
110100
000100
110100
010100
010100
010100
010100
CHAR 9572
000000
111111
000000
111111
000100
000100
000100
000100
CHAR 9573
000000
000000
000000
111111
010100
010100
010100
010100
CHAR 9574
000000
111111
000000
110111
010100
010100
010100
010100
CHAR 9575
000100
111111
000000
111111
000000
000000
000000
000000
CHAR 9576
010100
010100
010100
111111
000000
000000
000000
000000
CHAR 9577
010100
110111
000000
111111
000000
000000
000000
000000
CHAR 9580
010100
110111
000000
110111
010100
010100
010100
010100
CHAR 9601
000000
000000
000000
000000
000000
000000
000000
111111
CHAR 9602
000000
000000
000000
000000
000000
000000
111111
111111
CHAR 9603
000000
000000
000000
000000
000000
111111
111111
111111
CHAR 9604
000000
000000
000000
000000
111111
111111
111111
111111
CHAR 9605
000000
000000
000000
111111
111111
111111
111111
111111
CHAR 9606
000000
000000
111111
111111
111111
111111
111111
111111
CHAR 9607
000000
111111
111111
111111
111111
111111
111111
111111
CHAR 9608
111111
111111
111111
111111
111111
111111
111111
111111
CHAR 9609
111100
111100
111100
111100
111100
111100
111100
111100
CHAR 9610
111100
111100
111100
111100
111100
111100
111100
111100
CHAR 9611
111000
111000
111000
111000
111000
111000
111000
111000
CHAR 9613
110000
110000
110000
110000
110000
110000
110000
110000
CHAR 9615
100000
100000
100000
100000
100000
100000
100000
100000
CHAR 9617
010101
000000
101010
000000
010101
000000
101010
000000
CHAR 9618
010101
101010
010101
101010
010101
101010
010101
101010
CHAR 9619
101010
111111
010101
111111
101010
111111
010101
111111
CHAR 9644
000000
000000
000000
000000
000000
011110
011110
000000
CHAR 9650
000100
000100
001110
001110
011111
011111
000000
000000
CHAR 9658
001000
001100
001110
001111
001110
001100
001000
000000
CHAR 9660
011111
011111
001110
001110
000100
000100
000000
000000
CHAR 9668
000010
000110
001110
011110
001110
000110
000010
000000
CHAR 9675
000000
000000
011110
010010
010010
011110
000000
000000
CHAR 9688
111111
111111
111111
110011
110011
111111
111111
111111
CHAR 9689
111111
111111
100001
101101
101101
100001
111111
111111
CHAR 9786
001110
010001
011011
010001
010101
010001
001110
000000
CHAR 9787
001110
011111
010101
011111
010001
011111
001110
000000
CHAR 9788
000000
010101
001110
011011
001110
010101
000000
000000
CHAR 9792
001110
010001
010001
001110
000100
001110
000100
000000
CHAR 9794
000000
000111
000011
001101
010010
010010
001100
000000
CHAR 9824
000000
000100
001110
011111
011111
000100
001110
000000
CHAR 9827
000100
001110
001110
000100
011111
011111
000100
000000
CHAR 9829
000000
001010
011111
011111
011111
001110
000100
000000
CHAR 9830
000000
000100
001110
011111
011111
001110
000100
000000
CHAR 9834
000100
000110
000101
000100
001100
011100
011000
000000
CHAR 9835
000011
001101
001011
001101
001011
011011
011000
000000
</script>

<style>
html {
	margin:0px;
	padding:0px;
}

body {
	margin:0px;
	padding:0px;
	overflow:hidden;
	background-image: url(crumble2.png);
}

#game {
	width: 100vw;
	max-width: 100vh;
	margin: auto;
	display:block;
	background: black;

	/* https://caniuse.com/#search=image-render */
  	-ms-interpolation-mode: nearest-neighbor; /* IE */
  	image-rendering: -moz-crisp-edges; /* FF 6.0+ */
  	image-rendering: pixelated; /* Chrome, Safari */
}

@media screen and (min-width: 513px) {
  	#game {
  	  	width: calc(100vw - 40px);
	  	max-width: calc(100vh - 40px);
	  	margin: 20px auto;
	  	box-shadow: 0px 0px 40px black;
  }
}

</style>

<!-- SCRIPTS -->
<script>
function startExportedGame() {
	attachCanvas( document.getElementById("game") );
	load_game( document.getElementById("exportedGameData").text.slice(1) );
}
</script>

<script>
//hex-to-rgb method borrowed from stack overflow
function hexToRgb(hex) {
	// Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
	var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
	hex = hex.replace(shorthandRegex, function(m, r, g, b) {
		return r + r + g + g + b + b;
	});

	var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
	return result ? {
		r: parseInt(result[1], 16),
		g: parseInt(result[2], 16),
		b: parseInt(result[3], 16)
	} : null;
}
function componentToHex(c) {
    var hex = c.toString(16);
    return hex.length == 1 ? "0" + hex : hex;
}
function rgbToHex(r, g, b) {
    return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
}

function hslToHex(h,s,l) {
    var rgbArr = hslToRgb(h,s,l);
    return rgbToHex( Math.floor(rgbArr[0]), Math.floor(rgbArr[1]), Math.floor(rgbArr[2]) );
}

function hexToHsl(hex) {
    var rgb = hexToRgb(hex);
    return rgbToHsl(rgb.r, rgb.g, rgb.b);
}

// really just a vector distance
function colorDistance(a1,b1,c1,a2,b2,c2) {
    return Math.sqrt( Math.pow(a1 - a2, 2) + Math.pow(b1 - b2, 2) + Math.pow(c1 - c2, 2) );
}

function hexColorDistance(hex1,hex2) {
    var color1 = hexToRgb(hex1);
    var color2 = hexToRgb(hex2);
    return rgbColorDistance(color1.r, color1.g, color1.b, color2.r, color2.g, color2.b);
}


// source : http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c
/* accepts parameters
 * h  Object = {h:x, s:y, v:z}
 * OR 
 * h, s, v
*/
function HSVtoRGB(h, s, v) {
    var r, g, b, i, f, p, q, t;
    if (arguments.length === 1) {
        s = h.s, v = h.v, h = h.h;
    }
    i = Math.floor(h * 6);
    f = h * 6 - i;
    p = v * (1 - s);
    q = v * (1 - f * s);
    t = v * (1 - (1 - f) * s);
    switch (i % 6) {
        case 0: r = v, g = t, b = p; break;
        case 1: r = q, g = v, b = p; break;
        case 2: r = p, g = v, b = t; break;
        case 3: r = p, g = q, b = v; break;
        case 4: r = t, g = p, b = v; break;
        case 5: r = v, g = p, b = q; break;
    }
    return {
        r: Math.round(r * 255),
        g: Math.round(g * 255),
        b: Math.round(b * 255)
    };
}

/* accepts parameters
 * r  Object = {r:x, g:y, b:z}
 * OR 
 * r, g, b
*/
function RGBtoHSV(r, g, b) {
    if (arguments.length === 1) {
        g = r.g, b = r.b, r = r.r;
    }
    var max = Math.max(r, g, b), min = Math.min(r, g, b),
        d = max - min,
        h,
        s = (max === 0 ? 0 : d / max),
        v = max / 255;

    switch (max) {
        case min: h = 0; break;
        case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;
        case g: h = (b - r) + d * 2; h /= 6 * d; break;
        case b: h = (r - g) + d * 4; h /= 6 * d; break;
    }

    return {
        h: h,
        s: s,
        v: v
    };
}

// source : https://gist.github.com/mjackson/5311256
/**
 * Converts an HSL color value to RGB. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
 * Assumes h, s, and l are contained in the set [0, 1] and
 * returns r, g, and b in the set [0, 255].
 *
 * @param   Number  h       The hue
 * @param   Number  s       The saturation
 * @param   Number  l       The lightness
 * @return  Array           The RGB representation
 */
function hslToRgb(h, s, l) {
  var r, g, b;

  if (s == 0) {
    r = g = b = l; // achromatic
  } else {
    function hue2rgb(p, q, t) {
      if (t < 0) t += 1;
      if (t > 1) t -= 1;
      if (t < 1/6) return p + (q - p) * 6 * t;
      if (t < 1/2) return q;
      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
      return p;
    }

    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    var p = 2 * l - q;

    r = hue2rgb(p, q, h + 1/3);
    g = hue2rgb(p, q, h);
    b = hue2rgb(p, q, h - 1/3);
  }

  return [ r * 255, g * 255, b * 255 ];
}

/**
 * From: http://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion
 *
 * Converts an RGB color value to HSL. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
 * Assumes r, g, and b are contained in the set [0, 255] and
 * returns h, s, and l in the set [0, 1].
 *
 * @param   {number}  r       The red color value
 * @param   {number}  g       The green color value
 * @param   {number}  b       The blue color value
 * @return  {Array}           The HSL representation
 */
function rgbToHsl(r, g, b){
    r /= 255, g /= 255, b /= 255;
    var max = Math.max(r, g, b), min = Math.min(r, g, b);
    var h, s, l = (max + min) / 2;

    if(max == min){
        h = s = 0; // achromatic
    }else{
        var d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max){
            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
            case g: h = (b - r) / d + 2; break;
            case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
    }

    return [h, s, l];
}
</script>

<script>
/*
TODO:
- untangle local & external resource use in font manager (still more to do here)
*/

function FontManager(useExternalResources) {

if (useExternalResources === undefined || useExternalResources === null) {
	useExternalResources = false;
}

var self = this;

var fontExtension = ".bitsyfont";
this.GetExtension = function() {
	return fontExtension;
}

// place to store font data that is part of the local game data
var localResources = {};

// place to store font data fetched from a server (only used in editor)
var externalResources = null;
if (useExternalResources) {
	externalResources = new ResourceLoader();// NOTE : this class doesn't exist in exported game
}

this.LoadResources = function(filenames, onLoadAll) {
	if (!useExternalResources)
		return;

	// TODO : is this being called too many times?
	var onLoad = function() {
		var count = externalResources.getResourceLoadedCount();

		if (count >= filenames.length && onLoadAll != null) {
			onLoadAll();
		}
	}

	for (var i = 0; i < filenames.length; i++) {
		externalResources.load("bitsyfont", filenames[i], onLoad);
	}
}

// manually add resource
this.AddResource = function(filename, fontdata) {
	if (useExternalResources) {
		externalResources.set(filename, fontdata);
	}
	else {
		localResources[filename] = fontdata;
	}
}

this.ContainsResource = function(filename) {
	if (useExternalResources) {
		return externalResources.contains(filename);
	}
	else {
		return localResources[filename] != null;
	}
}

function GetData(fontName) {
	if (useExternalResources) {
		return externalResources.get(fontName + fontExtension);
	}
	else {
		return localResources[fontName + fontExtension];
	}
}
this.GetData = GetData;

function Create(fontData) {
	return new Font(fontData);
}
this.Create = Create;

this.Get = function(fontName) {
	var fontData = self.GetData(fontName);
	return self.Create(fontData);
}

function Font(fontData) {
	var name = "unknown";
	var width = 6; // default size so if you have NO font or an invalid font it displays boxes
	var height = 8;
	var fontdata = {};
	var invalidCharData = [];

	this.getName = function() {
		return name;
	}

	this.getData = function() {
		return fontdata;
	}

	this.getWidth = function() {
		return width;
	}

	this.getHeight = function() {
		return height;
	}

	this.hasChar = function(char) {
		var codepoint = char.charCodeAt(0);
		return fontdata[codepoint] != null;
	}

	this.getChar = function(char) {

		var codepoint = char.charCodeAt(0);

		if (fontdata[codepoint] != null) {
			return fontdata[codepoint];
		}
		else {
			return invalidCharData;
		}
	}

	function parseFont(fontData) {
		if (fontData == null)
			return;

		var lines = fontData.split("\n");

		var isReadingChar = false;
		var curCharLineCount = 0;
		var curCharCode = 0;

		for (var i = 0; i < lines.length; i++) {
			var line = lines[i];
			if (!isReadingChar) {
				// READING NON CHARACTER DATA LINE
				var args = line.split(" ");
				if (args[0] == "FONT") {
					name = args[1];
				}
				else if (args[0] == "SIZE") {
					width = parseInt(args[1]);
					height = parseInt(args[2]);
				}
				else if (args[0] == "CHAR") {
					isReadingChar = true;
					curCharLineCount = 0;
					curCharCode = parseInt(args[1]);
					fontdata[curCharCode] = [];
				}
			}
			else {
				// READING CHARACTER DATA LINE
				for (var j = 0; j < width; j++)
				{
					fontdata[curCharCode].push( parseInt(line[j]) );
				}

				curCharLineCount++;
				if (curCharLineCount >= height) {
					isReadingChar = false;
				}
			}
		}

		// init invalid character box
		invalidCharData = [];
		for (var y = 0; y < height; y++) {
			for (var x = 0; x < width; x++) {
				if (x < width-1 && y < height-1) {
					invalidCharData.push(1);
				}
				else {
					invalidCharData.push(0);
				}
			}
		}
	}

	parseFont(fontData);
}

} // FontManager
</script>

<script>
function Script() {

this.CreateInterpreter = function() {
	return new Interpreter();
};

this.CreateUtils = function() {
	return new Utils();
};

var Interpreter = function() {
	var env = new Environment();
	var parser = new Parser( env );

	this.SetDialogBuffer = function(buffer) { env.SetDialogBuffer( buffer ); };

	// TODO -- maybe this should return a string instead othe actual script??
	this.Compile = function(scriptName, scriptStr) {
		// console.log("COMPILE");
		var script = parser.Parse( scriptStr );
		env.SetScript( scriptName, script );
	}
	this.Run = function(scriptName, exitHandler) { // Runs pre-compiled script
		// console.log("RUN");
		env.GetScript( scriptName )
			.Eval( env, function() { if(exitHandler!=null) exitHandler(); } );

		// console.log("SERIALIZE!!!!");
		// console.log( env.GetScript( scriptName ).Serialize() );
	}
	this.Interpret = function(scriptStr, exitHandler) { // Compiles and runs code immediately
		// console.log("INTERPRET");
		var script = parser.Parse( scriptStr );
		script.Eval( env, function() { if(exitHandler!=null) exitHandler(); } );
	}
	this.HasScript = function(name) { return env.HasScript(name); };

	this.ResetEnvironment = function() {
		env = new Environment();
		parser = new Parser( env );
	}

	// TODO : move to utils?
	// for reading in dialog from the larger file format
	this.ReadDialogScript = function(lines, i) {
		return parser.ReadDialogScript(lines,i);
	}

	this.Parse = function(scriptStr) { // parses a script but doesn't save it
		return parser.Parse( scriptStr );
	}
	this.Eval = function(scripTree, exitHandler) { // runs a script stored externally
		scripTree.Eval( env, function() { if(exitHandler!=null) exitHandler(); } );
	}

	this.CreateExpression = function(expStr) {
		return parser.CreateExpression( expStr );
	}

	this.SetVariable = function(name,value,useHandler) {
		env.SetVariable(name,value,useHandler);
	}

	this.DeleteVariable = function(name,useHandler) {
		env.DeleteVariable(name,useHandler);
	}
	this.HasVariable = function(name) {
		return env.HasVariable(name);
	}

	this.SetOnVariableChangeHandler = function(onVariableChange) {
		env.SetOnVariableChangeHandler(onVariableChange);
	}
	this.GetVariableNames = function() {
		return env.GetVariableNames();
	}
	this.GetVariable = function(name) {
		return env.GetVariable(name);
	}
}


var Utils = function() {
	// for editor ui
	this.CreateDialogBlock = function(children,doIndentFirstLine) {
		if(doIndentFirstLine === undefined) doIndentFirstLine = true;
		var block = new BlockNode( BlockMode.Dialog, doIndentFirstLine );
		for(var i = 0; i < children.length; i++) {
			block.AddChild( children[i] );
		}
		return block;
	}

	this.ChangeSequenceType = function(oldSequence,type) {
		if(type === "sequence") {
			return new SequenceNode( oldSequence.options );
		}
		else if(type === "cycle") {
			return new CycleNode( oldSequence.options );
		}
		else if(type === "shuffle") {
			return new ShuffleNode( oldSequence.options );
		}
		return oldSequence;
	}

	this.CreateSequenceBlock = function() {
		var option1 = new BlockNode( BlockMode.Dialog, false /*doIndentFirstLine*/ );
		var option2 = new BlockNode( BlockMode.Dialog, false /*doIndentFirstLine*/ );
		var sequence = new SequenceNode( [ option1, option2 ] );
		var block = new BlockNode( BlockMode.Code );
		block.AddChild( sequence );
		return block;
	}

	this.CreateIfBlock = function() {
		var leftNode = new BlockNode( BlockMode.Code );
		leftNode.AddChild( new FuncNode("item", [new LiteralNode("0")] ) );
		var rightNode = new LiteralNode( 1 );
		var condition1 = new ExpNode("==", leftNode, rightNode );

		var condition2 = new ElseNode();

		var result1 = new BlockNode( BlockMode.Dialog );
		var result2 = new BlockNode( BlockMode.Dialog );

		var ifNode = new IfNode( [ condition1, condition2 ], [ result1, result2 ] );
		var block = new BlockNode( BlockMode.Code );
		block.AddChild( ifNode );
		return block;
	}
}


/* BUILT-IN FUNCTIONS */ // TODO: better way to encapsulate these?
function deprecatedFunc(environment,parameters,onReturn) {
	console.log("BITSY SCRIPT WARNING: Tried to use deprecated function");
	onReturn(null);
}

function printFunc(environment,parameters,onReturn) {
	// console.log("PRINT FUNC");
	// console.log(parameters);
	if( parameters[0] != undefined && parameters[0] != null ) {
		// console.log(parameters[0]);
		// console.log(parameters[0].toString());
		// var textStr = parameters[0].toString();
		var textStr = "" + parameters[0];
		// console.log(textStr);
		var onFinishHandler = function() {
			// console.log("FINISHED PRINTING ---- SCRIPT");
			onReturn(null);
		}; // called when dialog is finished printing
		environment.GetDialogBuffer().AddText( textStr, onFinishHandler );
	}
	else {
		onReturn(null);
	}
}

function linebreakFunc(environment,parameters,onReturn) {
	// console.log("LINEBREAK FUNC");
	environment.GetDialogBuffer().AddLinebreak();
	onReturn(null);
}

function printDrawingFunc(environment,parameters,onReturn) {
	var drawingId = parameters[0];
	environment.GetDialogBuffer().AddDrawing( drawingId, function() {
		onReturn(null);
	});
}

function printSpriteFunc(environment,parameters,onReturn) {
	var spriteId = parameters[0];
	if(names.sprite.has(spriteId)) spriteId = names.sprite.get(spriteId); // id is actually a name
	var drawingId = sprite[spriteId].drw;
	printDrawingFunc(environment, [drawingId], onReturn);
}

function printTileFunc(environment,parameters,onReturn) {
	var tileId = parameters[0];
	if(names.tile.has(tileId)) tileId = names.tile.get(tileId); // id is actually a name
	var drawingId = tile[tileId].drw;
	printDrawingFunc(environment, [drawingId], onReturn);
}

function printItemFunc(environment,parameters,onReturn) {
	var itemId = parameters[0];
	if(names.item.has(itemId)) itemId = names.item.get(itemId); // id is actually a name
	var drawingId = item[itemId].drw;
	printDrawingFunc(environment, [drawingId], onReturn);
}

function itemFunc(environment,parameters,onReturn) {
	var itemId = parameters[0];
	if(names.item.has(itemId)) itemId = names.item.get(itemId); // id is actually a name
	var itemCount = player().inventory[itemId] ? player().inventory[itemId] : 0; // TODO : ultimately the environment should include a reference to the game state
	// console.log("ITEM FUNC " + itemId + " " + itemCount);
	onReturn(itemCount);
}

function addOrRemoveTextEffect(environment,name) {
	if( environment.GetDialogBuffer().HasTextEffect(name) )
		environment.GetDialogBuffer().RemoveTextEffect(name);
	else
		environment.GetDialogBuffer().AddTextEffect(name);
}

function rainbowFunc(environment,parameters,onReturn) {
	addOrRemoveTextEffect(environment,"rbw");
	onReturn(null);
}

// TODO : should the colors use a parameter instead of special names?
function color1Func(environment,parameters,onReturn) {
	addOrRemoveTextEffect(environment,"clr1");
	onReturn(null);
}

function color2Func(environment,parameters,onReturn) {
	addOrRemoveTextEffect(environment,"clr2");
	onReturn(null);
}

function color3Func(environment,parameters,onReturn) {
	addOrRemoveTextEffect(environment,"clr3");
	onReturn(null);
}

function wavyFunc(environment,parameters,onReturn) {
	addOrRemoveTextEffect(environment,"wvy");
	onReturn(null);
}

function shakyFunc(environment,parameters,onReturn) {
	addOrRemoveTextEffect(environment,"shk");
	onReturn(null);
}

/* BUILT-IN OPERATORS */
function setExp(environment,left,right,onReturn) {
	// console.log("SET " + left.name);

	if(left.type != "variable") {
		// not a variable! return null and hope for the best D:
		onReturn( null );
		return;
	}

	right.Eval(environment,function(rVal) {
		environment.SetVariable( left.name, rVal );
		// console.log("VAL " + environment.GetVariable( left.name ) );
		left.Eval(environment,function(lVal) {
			onReturn( lVal );
		});
	});
}
function equalExp(environment,left,right,onReturn) {
	// console.log("EVAL EQUAL");
	// console.log(left);
	// console.log(right);
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal === rVal );
		});
	});
}
function greaterExp(environment,left,right,onReturn) {
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal > rVal );
		});
	});
}
function lessExp(environment,left,right,onReturn) {
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal < rVal );
		});
	});
}
function greaterEqExp(environment,left,right,onReturn) {
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal >= rVal );
		});
	});
}
function lessEqExp(environment,left,right,onReturn) {
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal <= rVal );
		});
	});
}
function multExp(environment,left,right,onReturn) {
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal * rVal );
		});
	});
}
function divExp(environment,left,right,onReturn) {
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal / rVal );
		});
	});
}
function addExp(environment,left,right,onReturn) {
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal + rVal );
		});
	});
}
function subExp(environment,left,right,onReturn) {
	right.Eval(environment,function(rVal){
		left.Eval(environment,function(lVal){
			onReturn( lVal - rVal );
		});
	});
}

/* ENVIRONMENT */
var Environment = function() {
	var dialogBuffer = null;
	this.SetDialogBuffer = function(buffer) { dialogBuffer = buffer; };
	this.GetDialogBuffer = function() { return dialogBuffer; };

	var functionMap = new Map();
	functionMap.set("print", printFunc);
	functionMap.set("say", printFunc);
	functionMap.set("br", linebreakFunc);
	functionMap.set("item", itemFunc);
	functionMap.set("rbw", rainbowFunc);
	functionMap.set("clr1", color1Func);
	functionMap.set("clr2", color2Func);
	functionMap.set("clr3", color3Func);
	functionMap.set("wvy", wavyFunc);
	functionMap.set("shk", shakyFunc);
	functionMap.set("printSprite", printSpriteFunc);
	functionMap.set("printTile", printTileFunc);
	functionMap.set("printItem", printItemFunc);

	this.HasFunction = function(name) { return functionMap.has(name); };
	this.EvalFunction = function(name,parameters,onReturn) {
		// console.log(functionMap);
		// console.log(name);
		functionMap.get( name )( this, parameters, onReturn );
	}

	var variableMap = new Map();
	// Borksy modification
	// Makes bitsy variables globally available
	window.bitsyVariableMap = variableMap;

	this.HasVariable = function(name) { return variableMap.has(name); };
	this.GetVariable = function(name) { return variableMap.get(name); };
	this.SetVariable = function(name,value,useHandler) {
		// console.log("SET VARIABLE " + name + " = " + value);
		if(useHandler === undefined) useHandler = true;
		variableMap.set(name, value);
		if(onVariableChangeHandler != null && useHandler)
			onVariableChangeHandler(name);
	};
	this.DeleteVariable = function(name,useHandler) {
		if(useHandler === undefined) useHandler = true;
		if(variableMap.has(name)) {
			variableMap.delete(name);
			if(onVariableChangeHandler != null && useHandler)
				onVariableChangeHandler(name);
		}
	};

	var operatorMap = new Map();
	operatorMap.set("=", setExp);
	operatorMap.set("==", equalExp);
	operatorMap.set(">", greaterExp);
	operatorMap.set("<", lessExp);
	operatorMap.set(">=", greaterEqExp);
	operatorMap.set("<=", lessEqExp);
	operatorMap.set("*", multExp);
	operatorMap.set("/", divExp);
	operatorMap.set("+", addExp);
	operatorMap.set("-", subExp);

	this.HasOperator = function(sym) { return operatorMap.get(sym); };
	this.EvalOperator = function(sym,left,right,onReturn) {
		operatorMap.get( sym )( this, left, right, onReturn );
	}

	var scriptMap = new Map();
	this.HasScript = function(name) { return scriptMap.has(name); };
	this.GetScript = function(name) { return scriptMap.get(name); };
	this.SetScript = function(name,script) { scriptMap.set(name, script); };

	var onVariableChangeHandler = null;
	this.SetOnVariableChangeHandler = function(onVariableChange) {
		onVariableChangeHandler = onVariableChange;
	}
	this.GetVariableNames = function() {
		return Array.from( variableMap.keys() );
	}
}

function leadingWhitespace(depth) {
	var str = "";
	for(var i = 0; i < depth; i++) {
		str += "  "; // two spaces per indent
	}
	// console.log("WHITESPACE " + depth + " ::" + str + "::");
	return str;
}

/* NODES */
var TreeRelationship = function() {
	this.parent = null;
	this.children = [];
	this.AddChild = function(node) {
		this.children.push( node );
		node.parent = this;
	};

	this.VisitAll = function(visitor) {
		visitor.Visit( this );
		for( var i = 0; i < this.children.length; i++ ) {
			this.children[i].VisitAll( visitor );
		}
	};
}

var BlockMode = {
	Code : "code",
	Dialog : "dialog"
};

var BlockNode = function(mode, doIndentFirstLine) {
	Object.assign( this, new TreeRelationship() );
	// Object.assign( this, new Runnable() );
	this.type = "block";
	this.mode = mode;

	this.Eval = function(environment,onReturn) {
		// console.log("EVAL BLOCK " + this.children.length);

		if( this.onEnter != null ) this.onEnter();

		var lastVal = null;
		var i = 0;
		function evalChildren(children,done) {
			if(i < children.length) {
				// console.log(">> CHILD " + i);
				children[i].Eval( environment, function(val) {
					// console.log("<< CHILD " + i);
					lastVal = val;
					i++;
					evalChildren(children,done);
				} );
			}
			else {
				done();
			}
		};
		var self = this;
		evalChildren( this.children, function() {
			if( self.onExit != null ) self.onExit();
			onReturn(lastVal);
		} );
	}

	if(doIndentFirstLine === undefined) doIndentFirstLine = true; // This is just for serialization

	this.Serialize = function(depth) {
		if(depth === undefined) depth = 0;

		// console.log("SERIALIZE BLOCK!!!");
		// console.log(depth);
		// console.log(doIndentFirstLine);

		var str = "";
		var lastNode = null;
		if (this.mode === BlockMode.Code) str += "{"; // todo: increase scope of Sym?
		for (var i = 0; i < this.children.length; i++) {

			var curNode = this.children[i];

			if(curNode.type === "block" && lastNode && lastNode.type === "block" && !isBlockWithNoNewline(curNode) && !isBlockWithNoNewline(lastNode))
				str += "\n";

			var shouldIndentFirstLine = (i == 0 && doIndentFirstLine);
			var shouldIndentAfterLinebreak = (lastNode && lastNode.type === "function" && lastNode.name === "br");
			if(this.mode === BlockMode.Dialog && (shouldIndentFirstLine || shouldIndentAfterLinebreak))
				str += leadingWhitespace(depth);
			str += curNode.Serialize(depth);
			lastNode = curNode;
		}
		if (this.mode === BlockMode.Code) str += "}";
		return str;
	}
}

function isBlockWithNoNewline(node) {
	return isTextEffectBlock(node) || isMultilineListBlock(node);
}

function isTextEffectBlock(node) {
	if(node.type === "block") {
		if(node.children.length > 0 && node.children[0].type === "function") {
			var func = node.children[0];
			if(func.name === "clr1" || func.name === "clr2" || func.name === "clr3" || func.name === "wvy" || func.name === "shk" || func.name === "rbw") {
				return true;
			}
		}
	}
	return false;
}

function isMultilineListBlock(node) {
	if(node.type === "block") {
		if(node.children.length > 0) {
			var child = node.children[0];
			if(child.type === "sequence" || child.type === "cycle" || child.type === "shuffle" || child.type === "if") {
				return true;
			}
		}
	}
	return false;
}

var FuncNode = function(name,arguments) {
	Object.assign( this, new TreeRelationship() );
	// Object.assign( this, new Runnable() );
	this.type = "function";
	this.name = name;
	this.arguments = arguments;

	this.Eval = function(environment,onReturn) {

		if( this.onEnter != null ) this.onEnter();

		// console.log("FUNC");
		// console.log(this.arguments);
		var argumentValues = [];
		var i = 0;
		function evalArgs(arguments,done) {
			if(i < arguments.length) {
				// Evaluate each argument
				arguments[i].Eval( environment, function(val) {
					argumentValues.push( val );
					i++;
					evalArgs(arguments,done);
				} );
			}
			else {
				done();
			}
		};
		var self = this; // hack to deal with scope
		evalArgs( this.arguments, function() {
			// Then evaluate the function
			// console.log("ARGS");
			// console.log(argumentValues);

			if( self.onExit != null ) self.onExit();

			environment.EvalFunction( self.name, argumentValues, onReturn );
		} );
	}

	this.Serialize = function(depth) {
		var isDialogBlock = this.parent.mode && this.parent.mode === BlockMode.Dialog;
		if(isDialogBlock && this.name === "print") {
			// TODO this could cause problems with "real" print functions
			return this.arguments[0].value; // first argument should be the text of the {print} func
		}
		else if(isDialogBlock && this.name === "br") {
			return "\n";
		}
		else {
			var str = "";
			str += this.name;
			for(var i = 0; i < this.arguments.length; i++) {
				str += " ";
				str += this.arguments[i].Serialize(depth);
			}
			return str;
		}
	}
}

var LiteralNode = function(value) {
	Object.assign( this, new TreeRelationship() );
	// Object.assign( this, new Runnable() );
	this.type = "literal";
	this.value = value;

	this.Eval = function(environment,onReturn) {
		onReturn(this.value);
	}

	this.Serialize = function(depth) {
		var str = "";

		if(this.value === null)
			return str;

		if(typeof this.value === "string") str += '"';
		str += this.value;
		if(typeof this.value === "string") str += '"';

		return str;
	}
}

var VarNode = function(name) {
	Object.assign( this, new TreeRelationship() );
	// Object.assign( this, new Runnable() );
	this.type = "variable";
	this.name = name;

	this.Eval = function(environment,onReturn) {
		// console.log("EVAL " + this.name + " " + environment.HasVariable(this.name) + " " + environment.GetVariable(this.name));
		if( environment.HasVariable(this.name) )
			onReturn( environment.GetVariable( this.name ) );
		else
			onReturn(null); // not a valid variable -- return null and hope that's ok
	} // TODO: might want to store nodes in the variableMap instead of values???

	this.Serialize = function(depth) {
		var str = "" + this.name;
		return str;
	}
}

var ExpNode = function(operator, left, right) {
	Object.assign( this, new TreeRelationship() );
	this.type = "operator";
	this.operator = operator;
	this.left = left;
	this.right = right;

	this.Eval = function(environment,onReturn) {
		// console.log("EVAL " + this.operator);
		var self = this; // hack to deal with scope
		environment.EvalOperator( this.operator, this.left, this.right, 
			function(val){
				// console.log("EVAL EXP " + self.operator + " " + val);
				onReturn(val);
			} );
		// NOTE : sadly this pushes a lot of complexity down onto the actual operator methods
	}

	this.Serialize = function(depth) {
		var isNegativeNumber = this.operator === "-" && this.left.type === "literal" && this.left.value === null;

		if(!isNegativeNumber) {
			var str = "";
			str += this.left.Serialize(depth);
			str += " " + this.operator + " ";
			str += this.right.Serialize(depth);
			return str;
		}
		else {
			return this.operator + this.right.Serialize(depth); // hacky but seems to work
		}
	}

	this.VisitAll = function(visitor) {
		visitor.Visit( this );
		if(this.left != null)
			this.left.VisitAll( visitor );
		if(this.right != null)
			this.right.VisitAll( visitor );
	};
}

var SequenceBase = function() {
	this.Serialize = function(depth) {
		var str = "";
		str += this.type + "\n";
		for (var i = 0; i < this.options.length; i++) {
			// console.log("SERIALIZE SEQUENCE ");
			// console.log(depth);
			str += leadingWhitespace(depth + 1) + Sym.List + " " + this.options[i].Serialize(depth + 2) + "\n";
		}
		str += leadingWhitespace(depth);
		return str;
	}

	this.VisitAll = function(visitor) {
		visitor.Visit( this );
		for( var i = 0; i < this.options.length; i++ ) {
			this.options[i].VisitAll( visitor );
		}
	};
}

var SequenceNode = function(options) {
	Object.assign( this, new TreeRelationship() );
	Object.assign( this, new SequenceBase() );
	this.type = "sequence";
	this.options = options;

	var index = 0;
	this.Eval = function(environment,onReturn) {
		// console.log("SEQUENCE " + index);
		this.options[index].Eval( environment, onReturn );

		var next = index + 1;
		if(next < this.options.length)
			index = next;
	}
}

var CycleNode = function(options) {
	Object.assign( this, new TreeRelationship() );
	Object.assign( this, new SequenceBase() );
	this.type = "cycle";
	this.options = options;

	var index = 0;
	this.Eval = function(environment,onReturn) {
		// console.log("CYCLE " + index);
		this.options[index].Eval( environment, onReturn );

		var next = index + 1;
		if(next < this.options.length)
			index = next;
		else
			index = 0;
	}
}

var ShuffleNode = function(options) {
	Object.assign( this, new TreeRelationship() );
	Object.assign( this, new SequenceBase() );
	this.type = "shuffle";
	this.options = options;

	var optionsShuffled = [];
	function shuffle(options) {
		optionsShuffled = [];
		var optionsUnshuffled = options.slice();
		while(optionsUnshuffled.length > 0) {
			var i = Math.floor( Math.random() * optionsUnshuffled.length );
			optionsShuffled.push( optionsUnshuffled.splice(i,1)[0] );
		}
	}
	shuffle(this.options);

	var index = 0;
	this.Eval = function(environment,onReturn) {
		// OLD RANDOM VERSION
		// var index = Math.floor(Math.random() * this.options.length);
		// this.options[index].Eval( environment, onReturn );

		optionsShuffled[index].Eval( environment, onReturn );
		
		index++;
		if (index >= this.options.length) {
			shuffle(this.options);
			index = 0;
		}
	}
}

var IfNode = function(conditions, results, isSingleLine) {
	Object.assign( this, new TreeRelationship() );
	this.type = "if";
	this.conditions = conditions;
	this.results = results;

	this.Eval = function(environment,onReturn) {
		// console.log("EVAL IF");
		var i = 0;
		var self = this;
		function TestCondition() {
			// console.log("EVAL " + i);
			self.conditions[i].Eval(environment, function(val) {
				// console.log(val);
				if(val == true) {
					self.results[i].Eval(environment, onReturn);
				}
				else if(i+1 < self.conditions.length) {
					i++;
					TestCondition(); // test next condition
				}
				else {
					onReturn(null); // out of conditions and none were true
				}
			});
		};
		TestCondition();
	}

	if(isSingleLine === undefined) isSingleLine = false; // This is just for serialization

	this.Serialize = function(depth) {
		var str = "";
		if(isSingleLine) {
			str += this.conditions[0].Serialize() + " ? " + this.results[0].Serialize();
			if(this.conditions.length > 1 && this.conditions[1].type === "else")
				str += " : " + this.results[1].Serialize();
		}
		else {
			str += "\n";
			for (var i = 0; i < this.conditions.length; i++) {
				str += leadingWhitespace(depth + 1) + Sym.List + " " + this.conditions[i].Serialize(depth) + " ?\n";
				str += this.results[i].Serialize(depth + 2) + "\n";
			}
			str += leadingWhitespace(depth);
		}
		return str;
	}

	this.IsSingleLine = function() {
		return isSingleLine;
	}

	this.VisitAll = function(visitor) {
		visitor.Visit( this );
		for( var i = 0; i < this.conditions.length; i++ ) {
			this.conditions[i].VisitAll( visitor );
		}
		for( var i = 0; i < this.results.length; i++ ) {
			this.results[i].VisitAll( visitor );
		}
	};
}

var ElseNode = function() {
	Object.assign( this, new TreeRelationship() );
	this.type = "else";

	this.Eval = function(environment,onReturn) {
		onReturn(true);
	}

	this.Serialize = function() {
		return "else";
	}
}

var Sym = {
	// DialogOpen : "/\"",
	// DialogClose : "\"/",
	DialogOpen : '"""',
	DialogClose : '"""',
	CodeOpen : "{",
	CodeClose : "}",
	Linebreak : "\n", // just call it "break" ?
	Separator : ":",
	List : "-",
	String : '"'
};

var Parser = function(env) {
	var environment = env;

	this.Parse = function(scriptStr) {
		// console.log("NEW PARSE!!!!!!");

		// TODO : make this work for single-line, no dialog block scripts

		var state = new ParserState( new BlockNode(BlockMode.Dialog), scriptStr );

		if( state.MatchAhead(Sym.DialogOpen) ) {
			// multi-line dialog block
			var dialogStr = state.ConsumeBlock( Sym.DialogOpen, Sym.DialogClose );
			state = new ParserState( new BlockNode(BlockMode.Dialog), dialogStr );
			state = ParseDialog( state );
		}
		// else if( state.MatchAhead(Sym.CodeOpen) ) { // NOTE: This causes problems when you lead with a code block
		// 	// code-block: should this ever happen?
		// 	state = ParseCodeBlock( state );
		// }
		else {
			// single-line dialog block
			state = ParseDialog( state );
		}

		// console.log( state.rootNode );
		return state.rootNode;
	};

	this.ReadDialogScript = function(lines, i) {
		var scriptStr = "";
		if (lines[i] === Sym.DialogOpen) {
			scriptStr += lines[i] + "\n";
			i++;
			while(lines[i] != Sym.DialogClose) {
				scriptStr += lines[i] + "\n";
				i++;
			}
			scriptStr += lines[i];
			i++;
		}
		else {
			scriptStr += lines[i];
		}
		return { script:scriptStr, index:i };
	}

	var ParserState = function( rootNode, str ) {
		this.rootNode = rootNode;
		this.curNode = this.rootNode;

		var sourceStr = str;
		var i = 0;
		this.Index = function() { return i; };
		this.Count = function() { return sourceStr.length; };
		this.Done = function() { return i >= sourceStr.length; };
		this.Char = function() { return sourceStr[i]; };
		this.Step = function(n) { if(n===undefined) n=1; i += n; };
		this.MatchAhead = function(str) {
			// console.log(str);
			str = "" + str; // hack to turn single chars into strings
			// console.log(str);
			// console.log(str.length);
			for(var j = 0; j < str.length; j++) {
				if( i + j >= sourceStr.length )
					return false;
				else if( str[j] != sourceStr[i+j] )
					return false;
			}
			return true;
		}
		this.Peak = function(end) {
			var str = "";
			var j = i;
			// console.log(j);
			while(j < sourceStr.length && end.indexOf( sourceStr[j] ) == -1 ) {
				str += sourceStr[j];
				j++;
			}
			// console.log("PEAK ::" + str + "::");
			return str;
		}
		this.ConsumeBlock = function( open, close ) {
			var startIndex = i;

			var matchCount = 0;
			if( this.MatchAhead( open ) ) {
				matchCount++;
				this.Step( open.length );
			}

			while( matchCount > 0 && !this.Done() ) {
				if( this.MatchAhead( close ) ) {
					matchCount--;
					this.Step( close.length );
				}
				else if( this.MatchAhead( open ) ) {
					matchCount++;
					this.Step( open.length );
				}
				else {
					this.Step();
				}
			}

			// console.log("!!! " + startIndex + " " + i);

			return sourceStr.slice( startIndex + open.length, i - close.length );
		}
		this.Print = function() { /*console.log(sourceStr);*/ };
	};

	function ParseDialog(state) {
		// console.log("PARSE DIALOG");
		state.Print();

		// for linebreak logic: add linebreaks after lines with dialog or empty lines (if it's not the very first line)
		var hasBlock = false;
		var hasDialog = false;
		var isFirstLine = true;

		// console.log("---- PARSE DIALOG ----");

		var text = "";
		var addTextNode = function() {
			// console.log("TEXT " + text.length);
			if (text.length > 0) {
				// console.log("TEXT " + text);
				// console.log("text!!");
				// console.log([text]);

				state.curNode.AddChild( new FuncNode( "print", [new LiteralNode(text)] ) );
				text = "";

				hasDialog = true;
			}
		}

		while ( !state.Done() ) {

			if( state.MatchAhead(Sym.CodeOpen) ) {
				addTextNode();
				state = ParseCodeBlock( state );

				// console.log("CODE");

				var len = state.curNode.children.length;
				if(len > 0 && state.curNode.children[len-1].type === "block") {
					var block = state.curNode.children[len-1];
					if(isMultilineListBlock(block))
						hasDialog = true; // hack to get correct newline behavior for multiline blocks
				}

				hasBlock = true;
			}
			// NOTE: nested dialog blocks disabled for now
			// else if( state.MatchAhead(Sym.DialogOpen) ) {
			// 	addTextNode();
			// 	state = ParseDialogBlock( state ); // These can be nested (should they though???)

			// 	hasBlock = true;
			// }
			else {
				if ( state.MatchAhead(Sym.Linebreak) ) {
					addTextNode();

					/*
					NOTES:
					linebreaks SHOULD happen on
					- lines with text (including the first or last line)
					- empty lines (that are NOT the first or last line)
					linebreaks should NOT happen on
					- lines with only CODE blocks
					- empty FIRST or LAST lines

					also, apparently:
					- NEVER line break on the last line
					*/
					var isLastLine = (state.Index() + 1) == state.Count();
					// console.log("block " + hasBlock);
					// console.log("dialog " + hasDialog);
					var isEmptyLine = !hasBlock && !hasDialog;
					// console.log("empty " + isEmptyLine);
					var isValidEmptyLine = isEmptyLine && !(isFirstLine || isLastLine);
					// console.log("valid empty " + isValidEmptyLine);
					var shouldAddLinebreak = (hasDialog || isValidEmptyLine) && !isLastLine; // last clause is a hack (but it works - why?)
					// console.log("LINEBREAK? " + shouldAddLinebreak);
					if( shouldAddLinebreak ) {
						// console.log("NEWLINE");
						// console.log("empty? " + isEmptyLine);
						// console.log("dialog? " + hasDialog);
						state.curNode.AddChild( new FuncNode( "br", [] ) ); // use function or character?
					}

					// linebreak logic
					isFirstLine = false;
					hasBlock = false;
					hasDialog = false;

					text = "";
				}
				else {
					text += state.Char();
				}
				state.Step();
			}

		}
		addTextNode();

		// console.log("---- PARSE DIALOG ----");

		// console.log(state);
		return state;
	}

	function ParseDialogBlock(state) {
		var dialogStr = state.ConsumeBlock( Sym.DialogOpen, Sym.DialogClose );

		var dialogState = new ParserState( new BlockNode(BlockMode.Dialog), dialogStr );
		dialogState = ParseDialog( dialogState );

		state.curNode.AddChild( dialogState.rootNode );

		return state;
	}

	function ParseIf(state) {
		var conditionStrings = [];
		var resultStrings = [];
		var curIndex = -1;
		var isNewline = true;
		var isConditionDone = false;
		var codeBlockCount = 0;

		while( !state.Done() ) {
			if(state.Char() === Sym.CodeOpen)
				codeBlockCount++;
			else if(state.Char() === Sym.CodeClose)
				codeBlockCount--;

			var isWhitespace = (state.Char() === " " || state.Char() === "\t");
			var isSkippableWhitespace = isNewline && isWhitespace;
			var isNewListItem = isNewline && (codeBlockCount <= 0) && (state.Char() === Sym.List);

			if(isNewListItem) {
				curIndex++;
				isConditionDone = false;
				conditionStrings[curIndex] = "";
				resultStrings[curIndex] = "";
			}
			else if(curIndex > -1) {
				if(!isConditionDone) {
					if(state.Char() === "?" || state.Char() === "\n") { // TODO: use Sym
						// end of condition
						isConditionDone = true;
					}
					else {
						// read in condition
						conditionStrings[curIndex] += state.Char();
					}
				}
				else {
					// read in result
					if(!isSkippableWhitespace)
						resultStrings[curIndex] += state.Char();
				}
			}

			isNewline = (state.Char() === Sym.Linebreak) || isSkippableWhitespace || isNewListItem;

			state.Step();
		}

		// console.log("PARSE IF:");
		// console.log(conditionStrings);
		// console.log(resultStrings);

		var conditions = [];
		for(var i = 0; i < conditionStrings.length; i++) {
			var str = conditionStrings[i].trim();
			if(str === "else") {
				conditions.push( new ElseNode() );
			}
			else {
				var exp = CreateExpression( str );
				conditions.push( exp );
			}
		}

		var results = [];
		for(var i = 0; i < resultStrings.length; i++) {
			var str = resultStrings[i];
			var dialogBlockState = new ParserState( new BlockNode(BlockMode.Dialog), str );
			dialogBlockState = ParseDialog( dialogBlockState );
			var dialogBlock = dialogBlockState.rootNode;
			results.push( dialogBlock );
		}

		state.curNode.AddChild( new IfNode( conditions, results ) );

		return state;
	}

	function IsSequence(str) {
		// console.log("IsSequence? " + str);
		return str === "sequence" || str === "cycle" || str === "shuffle";
	}

	// TODO: don't forget about eating whitespace
	function ParseSequence(state, sequenceType) {
		// console.log("SEQUENCE " + sequenceType);
		state.Print();

		var isNewline = false;
		var itemStrings = [];
		var curItemIndex = -1; // -1 indicates not reading an item yet
		var codeBlockCount = 0;

		while( !state.Done() ) {
			if(state.Char() === Sym.CodeOpen)
				codeBlockCount++;
			else if(state.Char() === Sym.CodeClose)
				codeBlockCount--;

			var isWhitespace = (state.Char() === " " || state.Char() === "\t");
			var isSkippableWhitespace = isNewline && isWhitespace;
			var isNewListItem = isNewline && (codeBlockCount <= 0) && (state.Char() === Sym.List);

			if(isNewListItem) {
				// console.log("found next list item");
				curItemIndex++;
				itemStrings[curItemIndex] = "";
			}
			else if(curItemIndex > -1) {
				if(!isSkippableWhitespace)
					itemStrings[curItemIndex] += state.Char();
			}

			isNewline = (state.Char() === Sym.Linebreak) || isSkippableWhitespace || isNewListItem;

			// console.log(state.Char());
			state.Step();
		}
		// console.log(itemStrings);
		// console.log("SEQUENCE DONE");

		var options = [];
		for(var i = 0; i < itemStrings.length; i++) {
			var str = itemStrings[i];
			var dialogBlockState = new ParserState( new BlockNode( BlockMode.Dialog, false /* doIndentFirstLine */ ), str );
			dialogBlockState = ParseDialog( dialogBlockState );
			var dialogBlock = dialogBlockState.rootNode;
			options.push( dialogBlock );
		}

		// console.log(options);

		if(sequenceType === "sequence")
			state.curNode.AddChild( new SequenceNode( options ) );
		else if(sequenceType === "cycle")
			state.curNode.AddChild( new CycleNode( options ) );
		else if(sequenceType === "shuffle")
			state.curNode.AddChild( new ShuffleNode( options ) );

		return state;
	}

	function ParseFunction(state, funcName) {
		var args = [];

		var curSymbol = "";
		function OnSymbolEnd() {
			curSymbol = curSymbol.trim();
			// console.log("PARAMTER " + curSymbol);
			args.push( StringToValue(curSymbol) );
			// console.log(args);
			curSymbol = "";
		}

		while( !( state.Char() === "\n" || state.Done() ) ) {
			if( state.MatchAhead(Sym.CodeOpen) ) {
				var codeBlockState = new ParserState( new BlockNode(BlockMode.Code), state.ConsumeBlock( Sym.CodeOpen, Sym.CodeClose ) );
				codeBlockState = ParseCode( codeBlockState );
				var codeBlock = codeBlockState.rootNode;
				args.push( codeBlock );
				curSymbol = "";
			}
			else if( state.MatchAhead(Sym.String) ) {
				/* STRING LITERAL */
				var str = state.ConsumeBlock(Sym.String, Sym.String);
				// console.log("STRING " + str);
				args.push( new LiteralNode(str) );
				curSymbol = "";
			}
			else if(state.Char() === " " && curSymbol.length > 0) {
				OnSymbolEnd();
			}
			else {
				curSymbol += state.Char();
			}
			state.Step();
		}

		if(curSymbol.length > 0) {
			OnSymbolEnd();
		}

		state.curNode.AddChild( new FuncNode( funcName, args ) );

		return state;
	}

	function IsValidVariableName(str) {
		var reg = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;
		var isValid = reg.test(str);
		// console.log("VALID variable??? " + isValid);
		return isValid;
	}

	function StringToValue(valStr) {
		if(valStr[0] === Sym.CodeOpen) {
			// CODE BLOCK!!!
			var codeStr = (new ParserState( null, valStr )).ConsumeBlock(Sym.CodeOpen, Sym.CodeClose); //hacky
			var codeBlockState = new ParserState( new BlockNode( BlockMode.Code ), codeStr );
			codeBlockState = ParseCode( codeBlockState );
			return codeBlockState.rootNode;
		}
		else if(valStr[0] === Sym.String) {
			// STRING!!
			// console.log("STRING");
			var str = "";
			var i = 1;
			while (i < valStr.length && valStr[i] != Sym.String) {
				str += valStr[i];
				i++;
			}
			// console.log(str);
			return new LiteralNode( str );
		}
		else if(valStr === "true") {
			// BOOL
			return new LiteralNode( true );
		}
		else if(valStr === "false") {
			// BOOL
			return new LiteralNode( false );
		}
		else if( !isNaN(parseFloat(valStr)) ) {
			// NUMBER!!
			// console.log("NUMBER!!! " + valStr);
			return new LiteralNode( parseFloat(valStr) );
		}
		else if(IsValidVariableName(valStr)) {
			// VARIABLE!!
			// console.log("VARIABLE");
			return new VarNode(valStr); // TODO : check for valid potential variables
		}
		else {
			// uh oh
			return new LiteralNode(null);
		}
	}

	var setSymbol = "=";
	var ifSymbol = "?";
	var elseSymbol = ":";
	// var operatorSymbols = ["==", ">", "<", ">=", "<=", "*", "/", "+", "-"];
	var operatorSymbols = ["-", "+", "/", "*", "<=", ">=", "<", ">", "=="]; // operators need to be in reverse order
	function CreateExpression(expStr) {
		expStr = expStr.trim();

		function IsInsideString(index) {
			var inString = false;
			for(var i = 0; i < expStr.length; i++) {
				if(expStr[i] === Sym.String)
					inString = !inString;

				if(index === i)
					return inString;
			}
			return false;
		}

		function IsInsideCode(index) {
			var count = 0;
			for(var i = 0; i < expStr.length; i++) {
				if(expStr[i] === Sym.CodeOpen)
					count++;
				else if(expStr[i] === Sym.CodeClose)
					count--;

				if(index === i)
					return count > 0;
			}
			return false;
		}
	
		var operator = null;

		// set is special because other operator can look like it, and it has to go first in the order of operations
		var setIndex = expStr.indexOf(setSymbol);
		if( setIndex > -1 && !IsInsideString(setIndex) && !IsInsideCode(setIndex) ) { // it might be a set operator
			if( expStr[setIndex+1] != "=" && expStr[setIndex-1] != ">" && expStr[setIndex-1] != "<" ) {
				// ok it actually IS a set operator and not ==, >=, or <=
				operator = setSymbol;
				var variableName = expStr.substring(0,setIndex).trim(); // TODO : valid variable name testing
				var left = IsValidVariableName(variableName) ? new VarNode( variableName ) : new LiteralNode(null);
				var right = CreateExpression( expStr.substring(setIndex+setSymbol.length) );
				var exp = new ExpNode( operator, left, right );
				return exp;
			}
		}

		// special if "expression" for single-line if statements
		var ifIndex = expStr.indexOf(ifSymbol);
		if( ifIndex > -1 && !IsInsideString(ifIndex) && !IsInsideCode(ifIndex) ) {
			operator = ifSymbol;
			var conditionStr = expStr.substring(0,ifIndex).trim();
			var conditions = [ CreateExpression(conditionStr) ];

			var resultStr = expStr.substring(ifIndex+ifSymbol.length);
			var results = [];
			function AddResult(str) {
				var dialogBlockState = new ParserState( new BlockNode(BlockMode.Dialog), str );
				dialogBlockState = ParseDialog( dialogBlockState );
				var dialogBlock = dialogBlockState.rootNode;
				results.push( dialogBlock );
			}

			var elseIndex = resultStr.indexOf(elseSymbol); // does this need to test for strings?
			if(elseIndex > -1) {
				conditions.push( new ElseNode() );

				var elseStr = resultStr.substring(elseIndex+elseSymbol.length);
				var resultStr = resultStr.substring(0,elseIndex);

				AddResult( resultStr.trim() );
				AddResult( elseStr.trim() );
			}
			else {
				AddResult( resultStr.trim() );
			}

			return new IfNode( conditions, results, true /*isSingleLine*/ );
		}

		for( var i = 0; (operator == null) && (i < operatorSymbols.length); i++ ) {
			var opSym = operatorSymbols[i];
			var opIndex = expStr.indexOf( opSym );
			if( opIndex > -1 && !IsInsideString(opIndex) && !IsInsideCode(opIndex) ) {
				operator = opSym;
				var left = CreateExpression( expStr.substring(0,opIndex) );
				var right = CreateExpression( expStr.substring(opIndex+opSym.length) );
				var exp = new ExpNode( operator, left, right );
				return exp;
			}
		}

		if( operator == null ) {
			return StringToValue(expStr);
		}
	}
	this.CreateExpression = CreateExpression;

	function ParseExpression(state) {
		var line = state.Peak( [Sym.Linebreak] );
		// console.log("EXPRESSION " + line);
		var exp = CreateExpression( line );
		// console.log(exp);
		state.curNode.AddChild( exp );
		state.Step( line.length );
		return state;
	}

	function ParseCode(state) {
		// TODO : how do I do this parsing??? one expression per block? or per line?
		while ( !state.Done() ) {

			if( state.Char() === " " || state.Char() === "\t" || state.Char() === "\n" ) { // TODO: symbols? IsWhitespace func?
				state.Step(); // consume whitespace
			}
			else if( state.MatchAhead(Sym.CodeOpen) ) {
				state = ParseCodeBlock( state );
			}
			// NOTE: nested dialog blocks disabled for now
			// else if( state.MatchAhead(Sym.DialogOpen) ) {
			// 	state = ParseDialogBlock( state ); // These can be nested (should they though???)
			// }
			else if( state.Char() === Sym.List && (state.Peak([]).indexOf("?") > -1) ) { // TODO : symbols? matchahead?
				// console.log("PEAK IF " + state.Peak( ["?"] ));
				state = ParseIf( state );
			}
			else if( environment.HasFunction( state.Peak( [" "] ) ) ) { // TODO --- what about newlines???
				var funcName = state.Peak( [" "] );
				state.Step( funcName.length );
				state = ParseFunction( state, funcName );
			}
			else if( IsSequence( state.Peak( [" ", Sym.Linebreak] ) ) ) {
				var sequenceType = state.Peak( [" ", Sym.Linebreak] );
				state.Step( sequenceType.length );
				state = ParseSequence( state, sequenceType );
			}
			else {
				state = ParseExpression( state );
			}
		}

		return state;
	}

	function ParseCodeBlock(state) {
		var codeStr = state.ConsumeBlock( Sym.CodeOpen, Sym.CodeClose );

		// console.log("PARSE CODE");
		// console.log(codeStr);

		var codeState = new ParserState( new BlockNode(BlockMode.Code), codeStr );
		codeState = ParseCode( codeState );
		
		state.curNode.AddChild( codeState.rootNode );

		return state;
	}

}

} // Script()
</script>

<script>
function Dialog() {

this.CreateRenderer = function() {
	return new DialogRenderer();
};

this.CreateBuffer = function() {
	return new DialogBuffer();
};

var DialogRenderer = function() {

	// TODO : refactor this eventually? remove everything from struct.. avoid the defaults?
	var textboxInfo = {
		img : null,
		width : 104,
		height : 8+4+2+5, //8 for text, 4 for top-bottom padding, 2 for line padding, 5 for arrow
		top : 12,
		left : 12,
		bottom : 12, //for drawing it from the bottom
		font_scale : 0.5, // we draw font at half-size compared to everything else
		padding_vert : 2,
		padding_horz : 4,
		arrow_height : 5,
	};

	var font = null;
	this.SetFont = function(f) {
		font = f;
		textboxInfo.height = (textboxInfo.padding_vert * 3) + (relativeFontHeight() * 2) + textboxInfo.arrow_height;
		textboxInfo.img = context.createImageData(textboxInfo.width*scale, textboxInfo.height*scale);
	}

	function textScale() {
		return scale * textboxInfo.font_scale;
	}

	function relativeFontWidth() {
		return Math.ceil( font.getWidth() * textboxInfo.font_scale );
	}

	function relativeFontHeight() {
		return Math.ceil( font.getHeight() * textboxInfo.font_scale );
	}

	var context = null;
	this.AttachContext = function(c) {
		context = c;
	};

	this.ClearTextbox = function() {
		if(context == null) return;

		//create new image none exists
		if(textboxInfo.img == null)
			textboxInfo.img = context.createImageData(textboxInfo.width*scale, textboxInfo.height*scale);

		// fill text box with black
		for (var i=0;i<textboxInfo.img.data.length;i+=4)
		{
			textboxInfo.img.data[i+0]=0;
			textboxInfo.img.data[i+1]=0;
			textboxInfo.img.data[i+2]=0;
			textboxInfo.img.data[i+3]=255;
		}
	};

	var isCentered = false;
	this.SetCentered = function(centered) {
		isCentered = centered;
	};

	this.DrawTextbox = function() {
		if(context == null) return;
		if (isCentered) {
			context.putImageData(textboxInfo.img, textboxInfo.left*scale, ((height/2)-(textboxInfo.height/2))*scale);
		}
		else if (player().y < mapsize/2) {
			//bottom
			context.putImageData(textboxInfo.img, textboxInfo.left*scale, (height-textboxInfo.bottom-textboxInfo.height)*scale);
		}
		else {
			//top
			context.putImageData(textboxInfo.img, textboxInfo.left*scale, textboxInfo.top*scale);
		}
	};

	var arrowdata = [
		1,1,1,1,1,
		0,1,1,1,0,
		0,0,1,0,0
	];
	this.DrawNextArrow = function() {
		// console.log("draw arrow!");
		var top = (textboxInfo.height-5) * scale;
		var left = (textboxInfo.width-(5+4)) * scale;
		for (var y = 0; y < 3; y++) {
			for (var x = 0; x < 5; x++) {
				var i = (y * 5) + x;
				if (arrowdata[i] == 1) {
					//scaling nonsense
					for (var sy = 0; sy < scale; sy++) {
						for (var sx = 0; sx < scale; sx++) {
							var pxl = 4 * ( ((top+(y*scale)+sy) * (textboxInfo.width*scale)) + (left+(x*scale)+sx) );
							textboxInfo.img.data[pxl+0] = 255;
							textboxInfo.img.data[pxl+1] = 255;
							textboxInfo.img.data[pxl+2] = 255;
							textboxInfo.img.data[pxl+3] = 255;
						}
					}
				}
			}
		}
	};

	var text_scale = 2; //using a different scaling factor for text feels like cheating... but it looks better
	this.DrawChar = function(char, row, col, leftPos) {
		char.offset = {x:0, y:0};

		char.SetPosition(row,col);
		char.ApplyEffects(effectTime);

		var charData = char.bitmap;

		var top = (4 * scale) + (row * 2 * scale) + (row * font.getHeight() * text_scale) + Math.floor( char.offset.y );
		var left = (4 * scale) + (leftPos * text_scale) + Math.floor( char.offset.x );

		var debug_r = Math.random() * 255;

		for (var y = 0; y < char.height; y++) {
			for (var x = 0; x < char.width; x++) {

				var i = (y * char.width) + x;
				if ( charData[i] == 1 ) {

					//scaling nonsense
					for (var sy = 0; sy < text_scale; sy++) {
						for (var sx = 0; sx < text_scale; sx++) {
							var pxl = 4 * ( ((top+(y*text_scale)+sy) * (textboxInfo.width*scale)) + (left+(x*text_scale)+sx) );
							textboxInfo.img.data[pxl+0] = char.color.r;
							textboxInfo.img.data[pxl+1] = char.color.g;
							textboxInfo.img.data[pxl+2] = char.color.b;
							textboxInfo.img.data[pxl+3] = char.color.a;
						}
					}
				}
				// else {
				// 	// DEBUG

				// 	//scaling nonsense
				// 	for (var sy = 0; sy < text_scale; sy++) {
				// 		for (var sx = 0; sx < text_scale; sx++) {
				// 			var pxl = 4 * ( ((top+(y*text_scale)+sy) * (textboxInfo.width*scale)) + (left+(x*text_scale)+sx) );
				// 			textboxInfo.img.data[pxl+0] = debug_r;
				// 			textboxInfo.img.data[pxl+1] = 0;
				// 			textboxInfo.img.data[pxl+2] = 0;
				// 			textboxInfo.img.data[pxl+3] = 255;
				// 		}
				// 	}
				// }

			}
		}
		
		// call printHandler for character
		char.OnPrint();
	};

	var effectTime = 0; // TODO this variable should live somewhere better
	this.Draw = function(buffer,dt) {
		effectTime += dt;

		this.ClearTextbox();

		buffer.ForEachActiveChar( this.DrawChar );

		if( buffer.CanContinue() )
			this.DrawNextArrow();

		this.DrawTextbox();

		if( buffer.DidPageFinishThisFrame() && onPageFinish != null )
			onPageFinish();
	};

	/* this is a hook for GIF rendering */
	var onPageFinish = null;
	this.SetPageFinishHandler = function(handler) {
		onPageFinish = handler;
	};

	this.Reset = function() {
		effectTime = 0;
		// TODO - anything else?
	}

	// this.CharsPerRow = function() {
	// 	return textboxInfo.charsPerRow;
	// }
}


var DialogBuffer = function() {
	var buffer = [[[]]]; // holds dialog in an array buffer
	var pageIndex = 0;
	var rowIndex = 0;
	var charIndex = 0;
	var nextCharTimer = 0;
	var nextCharMaxTime = 50; // in milliseconds
	var isDialogReadyToContinue = false;
	var activeTextEffects = [];
	var font = null;

	this.SetFont = function(f) {
		font = f;
	}

	this.CurPage = function() { return buffer[ pageIndex ]; };
	this.CurRow = function() { return this.CurPage()[ rowIndex ]; };
	this.CurChar = function() { return this.CurRow()[ charIndex ]; };
	this.CurPageCount = function() { return buffer.length; };
	this.CurRowCount = function() { return this.CurPage().length; };
	this.CurCharCount = function() { return this.CurRow().length; };

	this.ForEachActiveChar = function(handler) { // Iterates over visible characters on the active page
		var rowCount = rowIndex + 1;
		for (var i = 0; i < rowCount; i++) {
			var row = this.CurPage()[i];
			var charCount = (i == rowIndex) ? charIndex+1 : row.length;
			// console.log(charCount);

			var leftPos = 0;

			for(var j = 0; j < charCount; j++) {
				var char = row[j];
				if(char) {
					// handler( char, i /*rowIndex*/, j /*colIndex*/ );
					handler(char, i /*rowIndex*/, j /*colIndex*/, leftPos)

					leftPos += char.width;
				}
			}
		}
	}

	this.Reset = function() {
		buffer = [[[]]];
		pageIndex = 0;
		rowIndex = 0;
		charIndex = 0;
		isDialogReadyToContinue = false;

		activeTextEffects = [];

		isActive = false;
	};

	this.DoNextChar = function() {
		// console.log("DO NEXT CHAR");

		nextCharTimer = 0; //reset timer

		//time to update characters
		if (charIndex + 1 < this.CurCharCount()) {
			//add char to current row
			charIndex++;
		}
		else if (rowIndex + 1 < this.CurRowCount()) {
			//start next row
			rowIndex++;
			charIndex = 0;
		}
		else {
			//the page is full!
			isDialogReadyToContinue = true;
			didPageFinishThisFrame = true;

			// console.log("WAITING FOR INPUT");
		}

		// console.log(this.CurChar());
		if(this.CurChar() != null)
			this.CurChar().OnPrint(); // make sure we hit the callback before we run out of text
	};

	this.Update = function(dt) {
		didPageFinishThisFrame = false;
		didFlipPageThisFrame = false;
		// this.Draw(dt); // TODO move into a renderer object
		if (isDialogReadyToContinue) {
			return; //waiting for dialog to be advanced by player
		}

		nextCharTimer += dt; //tick timer

		if (nextCharTimer > nextCharMaxTime) {
			this.DoNextChar();
		}
	};

	this.Skip = function() {
		console.log("SKIPPP");
		didPageFinishThisFrame = false;
		didFlipPageThisFrame = false;
		// add new characters until you get to the end of the current line of dialog
		while (rowIndex < this.CurRowCount()) {
			this.DoNextChar();

			if(isDialogReadyToContinue) {
				//make sure to push the rowIndex past the end to break out of the loop
				rowIndex++;
				charIndex = 0;
			}
		}
		rowIndex = this.CurRowCount()-1;
		charIndex = this.CurCharCount()-1;
	};

	this.FlipPage = function() {
		didFlipPageThisFrame = true;
		isDialogReadyToContinue = false;
		pageIndex++;
		rowIndex = 0;
		charIndex = 0;
	}

	this.EndDialog = function() {
		console.log("END!!!!");
		isActive = false; // no more text to show... this should be a sign to stop rendering dialog
	}

	this.Continue = function() {
		console.log("CONTINUE");
		if (pageIndex + 1 < this.CurPageCount()) {
			//start next page
			this.FlipPage();
			return true; /* hasMoreDialog */
		}
		else {
			//end dialog mode
			this.EndDialog();
			return false; /* hasMoreDialog */
		}
	};

	var isActive = false;
	this.IsActive = function() { return isActive; };

	this.CanContinue = function() { return isDialogReadyToContinue; };

	function DialogChar(effectList) {
		this.effectList = effectList.slice(); // clone effect list (since it can change between chars)

		this.color = { r:255, g:255, b:255, a:255 };
		this.offset = { x:0, y:0 }; // in pixels (screen pixels?)

		this.col = 0;
		this.row = 0;

		this.SetPosition = function(row,col) {
			// console.log("SET POS");
			// console.log(this);
			this.row = row;
			this.col = col;
		}

		this.ApplyEffects = function(time) {
			// console.log("APPLY EFFECTS! " + time);
			for(var i = 0; i < this.effectList.length; i++) {
				var effectName = this.effectList[i];
				// console.log("FX " + effectName);
				TextEffects[ effectName ].DoEffect( this, time );
			}
		}

		var printHandler = null; // optional function to be called once on printing character
		this.SetPrintHandler = function(handler) {
			printHandler = handler;
		}
		this.OnPrint = function() {
			if (printHandler != null) {
				console.log("PRINT HANDLER ---- DIALOG BUFFER");
				printHandler();
				printHandler = null; // only call handler once (hacky)
			}
		}

		this.bitmap = [];
		this.width = 0;
		this.height = 0;
	}

	function DialogFontChar(font, char, effectList) {
		Object.assign(this, new DialogChar(effectList));

		this.bitmap = font.getChar(char);
		this.width = font.getWidth();
		this.height = font.getHeight();
	}

	function DialogDrawingChar(drawingId, effectList) {
		Object.assign(this, new DialogChar(effectList));

		var imageData = renderer.GetImageSource(drawingId)[0];
		var imageDataFlat = [];
		for (var i = 0; i < imageData.length; i++) {
			// console.log(imageData[i]);
			imageDataFlat = imageDataFlat.concat(imageData[i]);
		}

		this.bitmap = imageDataFlat;
		this.width = 8;
		this.height = 8;
	}

	function AddWordToCharArray(charArray,word,effectList) {
		for(var i = 0; i < word.length; i++) {
			charArray.push( new DialogFontChar( font, word[i], effectList ) );
		}
		return charArray;
	}

	function GetCharArrayWidth(charArray) {
		var width = 0;
		for(var i = 0; i < charArray.length; i++) {
			width += charArray[i].width;
		}
		return width;
	}

	function GetStringWidth(str) {
		var width = 0;
		for (var i = 0; i < str.length; i++) {
			width += font.getWidth();
		}
		return width;
	}

	var pixelsPerRow = 192; // hard-coded fun times!!!

	this.AddDrawing = function(drawingId, onFinishHandler) {
		// console.log("DRAWING ID " + drawingId);

		var curPageIndex = buffer.length - 1;
		var curRowIndex = buffer[curPageIndex].length - 1;
		var curRowArr = buffer[curPageIndex][curRowIndex];

		var drawingChar = new DialogDrawingChar(drawingId, activeTextEffects)
		drawingChar.SetPrintHandler( onFinishHandler );

		var rowLength = GetCharArrayWidth(curRowArr);

		// TODO : clean up copy-pasted code here :/
		if (rowLength + drawingChar.width  <= pixelsPerRow || rowLength <= 0)
		{
			//stay on same row
			curRowArr.push( drawingChar );
		}
		else if (curRowIndex == 0)
		{
			//start next row
			buffer[ curPageIndex ][ curRowIndex ] = curRowArr;
			buffer[ curPageIndex ].push( [] );
			curRowIndex++;
			curRowArr = buffer[ curPageIndex ][ curRowIndex ];
			curRowArr.push( drawingChar );
		}
		else {
			//start next page
			buffer[ curPageIndex ][ curRowIndex ] = curRowArr;
			buffer.push( [] );
			curPageIndex++;
			buffer[ curPageIndex ].push( [] );
			curRowIndex = 0;
			curRowArr = buffer[ curPageIndex ][ curRowIndex ];
			curRowArr.push( drawingChar );
		}

		isActive = true; // this feels like a bad way to do this???
	}

	// TODO : convert this into something that takes DialogChar arrays
	this.AddText = function(textStr,onFinishHandler) {
		// console.log("ADD TEXT " + textStr);

		//process dialog so it's easier to display
		var words = textStr.split(" ");

		// var curPageIndex = this.CurPageCount() - 1;
		// var curRowIndex = this.CurRowCount() - 1;
		// var curRowArr = this.CurRow();

		var curPageIndex = buffer.length - 1;
		var curRowIndex = buffer[curPageIndex].length - 1;
		var curRowArr = buffer[curPageIndex][curRowIndex];

		for (var i = 0; i < words.length; i++) {
			var word = words[i];

			var wordWithPrecedingSpace = ((i == 0) ? "" : " ") + word;
			var wordLength = GetStringWidth( wordWithPrecedingSpace );

			var rowLength = GetCharArrayWidth(curRowArr);

			if (rowLength + wordLength <= pixelsPerRow || rowLength <= 0) {
				//stay on same row
				curRowArr = AddWordToCharArray( curRowArr, wordWithPrecedingSpace, activeTextEffects );
			}
			else if (curRowIndex == 0) {
				//start next row
				buffer[ curPageIndex ][ curRowIndex ] = curRowArr;
				buffer[ curPageIndex ].push( [] );
				curRowIndex++;
				curRowArr = buffer[ curPageIndex ][ curRowIndex ];
				curRowArr = AddWordToCharArray( curRowArr, word, activeTextEffects );
			}
			else {
				//start next page
				buffer[ curPageIndex ][ curRowIndex ] = curRowArr;
				buffer.push( [] );
				curPageIndex++;
				buffer[ curPageIndex ].push( [] );
				curRowIndex = 0;
				curRowArr = buffer[ curPageIndex ][ curRowIndex ];
				curRowArr = AddWordToCharArray( curRowArr, word, activeTextEffects );
			}
		}

		//destroy any empty stuff
		var lastPage = buffer[ buffer.length-1 ];
		var lastRow = lastPage[ lastPage.length-1 ];
		if( lastRow.length == 0 )
			lastPage.splice( lastPage.length-1, 1 );
		if( lastPage.length == 0 )
			buffer.splice( buffer.length-1, 1 );

		//finish up 
		lastPage = buffer[ buffer.length-1 ];
		lastRow = lastPage[ lastPage.length-1 ];
		if( lastRow.length > 0 ) {
			var lastChar = lastRow[ lastRow.length-1 ];
			lastChar.SetPrintHandler( onFinishHandler );
		}

		console.log(buffer);

		isActive = true;
	};

	this.AddLinebreak = function() {
		var lastPage = buffer[ buffer.length-1 ];
		if( lastPage.length <= 1 ) {
			console.log("LINEBREAK - NEW ROW ");
			// add new row
			lastPage.push( [] );
		}
		else {
			// add new page
			buffer.push( [[]] );
		}
		console.log(buffer);

		isActive = true;
	}

	/* new text effects */
	this.HasTextEffect = function(name) {
		return activeTextEffects.indexOf( name ) > -1;
	}
	this.AddTextEffect = function(name) {
		activeTextEffects.push( name );
	}
	this.RemoveTextEffect = function(name) {
		activeTextEffects.splice( activeTextEffects.indexOf( name ), 1 );
	}

	/* this is a hook for GIF rendering */
	var didPageFinishThisFrame = false;
	this.DidPageFinishThisFrame = function(){ return didPageFinishThisFrame; };

	var didFlipPageThisFrame = false;
	this.DidFlipPageThisFrame = function(){ return didFlipPageThisFrame; };

	// this.SetCharsPerRow = function(num){ charsPerRow = num; }; // hacky
};

/* NEW TEXT EFFECTS */
var TextEffects = new Map();

var RainbowEffect = function() { // TODO - should it be an object or just a method?
	this.DoEffect = function(char,time) {
		// console.log("RAINBOW!!!");
		// console.log(char);
		// console.log(char.color);
		// console.log(char.col);

		var h = Math.abs( Math.sin( (time / 600) - (char.col / 8) ) );
		var rgb = hslToRgb( h, 1, 0.5 );
		char.color.r = rgb[0];
		char.color.g = rgb[1];
		char.color.b = rgb[2];
		char.color.a = 255;
	}
};
TextEffects["rbw"] = new RainbowEffect();

var ColorEffect = function(index) {
	this.DoEffect = function(char) {
		var pal = getPal( curPal() );
		var color = pal[ parseInt( index ) ];
		// console.log(color);
		char.color.r = color[0];
		char.color.g = color[1];
		char.color.b = color[2];
		char.color.a = 255;
	}
};
TextEffects["clr1"] = new ColorEffect(0);
TextEffects["clr2"] = new ColorEffect(1); // TODO : should I use parameters instead of special names?
TextEffects["clr3"] = new ColorEffect(2);

var WavyEffect = function() {
	this.DoEffect = function(char,time) {
		char.offset.y += Math.sin( (time / 250) - (char.col / 2) ) * 4;
	}
};
TextEffects["wvy"] = new WavyEffect();

var ShakyEffect = function() {
	function disturb(func,time,offset,mult1,mult2) {
		return func( (time * mult1) - (offset * mult2) );
	}

	this.DoEffect = function(char,time) {
		char.offset.y += 3
						* disturb(Math.sin,time,char.col,0.1,0.5)
						* disturb(Math.cos,time,char.col,0.3,0.2)
						* disturb(Math.sin,time,char.row,2.0,1.0);
		char.offset.x += 3
						* disturb(Math.cos,time,char.row,0.1,1.0)
						* disturb(Math.sin,time,char.col,3.0,0.7)
						* disturb(Math.cos,time,char.col,0.2,0.3);
	}
};
TextEffects["shk"] = new ShakyEffect();

} // Dialog()
</script>

<script>
/*
TODO
- reset renderer function
- react to changes in: drawings, palettes
- possible future plan: limit size of cache (remove old images)
- change image store path from (pal > col > draw) to (draw > pal > col)
- get rid of old getSpriteImage (etc) methods
- get editor working again [in progress]
- move debug timer class into core (seems useful)
*/

function Renderer(tilesize, scale) {

console.log("!!!!! NEW RENDERER");

var imageStore = { // TODO : rename to imageCache
	source: {},
	render: {}
};

var palettes = null; // TODO : need null checks?
var context = null;

function setPalettes(paletteObj) {
	palettes = paletteObj;

	// TODO : should this really clear out the render cache?
	imageStore.render = {};
}

function getPaletteColor(paletteId, colorIndex) {
	var palette = palettes[paletteId];

	if (colorIndex > palette.colors.length) { // do I need this failure case? (seems un-reliable)
		colorIndex = 0;
	}

	var color = palette.colors[colorIndex];

	return {
		r : color[0],
		g : color[1],
		b : color[2]
	};
}

var debugRenderCount = 0;

// TODO : change image store path from (pal > col > draw) to (draw > pal > col)
function renderImage(drawing, paletteId) {
	// debugRenderCount++;
	// console.log("RENDER COUNT " + debugRenderCount);

	var col = drawing.col;
	var colStr = "" + col;
	var pal = paletteId;
	var drwId = drawing.drw;
	var imgSrc = imageStore.source[ drawing.drw ];

	// initialize render cache entry
	if (imageStore.render[drwId] === undefined || imageStore.render[drwId] === null) {
		imageStore.render[drwId] = {};
	}

	if (imageStore.render[drwId][pal] === undefined || imageStore.render[drwId][pal] === null) {
		imageStore.render[drwId][pal] = {};
	}

	// create array of ImageData frames
	imageStore.render[drwId][pal][colStr] = [];

	for (var i = 0; i < imgSrc.length; i++) {
		var frameSrc = imgSrc[i];
		var frameData = imageDataFromImageSource( frameSrc, pal, col );
		imageStore.render[drwId][pal][colStr].push(frameData);
	}
}

function imageDataFromImageSource(imageSource, pal, col) {
	//console.log(imageSource);

	var img = context.createImageData(tilesize*scale,tilesize*scale);

	var backgroundColor = getPaletteColor(pal,0);
	var foregroundColor = getPaletteColor(pal,col);

	for (var y = 0; y < tilesize; y++) {
		for (var x = 0; x < tilesize; x++) {
			var px = imageSource[y][x];
			for (var sy = 0; sy < scale; sy++) {
				for (var sx = 0; sx < scale; sx++) {
					var pxl = (((y * scale) + sy) * tilesize * scale * 4) + (((x*scale) + sx) * 4);
					if ( px === 1 ) {
						img.data[pxl + 0] = foregroundColor.r;
						img.data[pxl + 1] = foregroundColor.g;
						img.data[pxl + 2] = foregroundColor.b;
						img.data[pxl + 3] = 255;
					}
					else { //ch === 0
						img.data[pxl + 0] = backgroundColor.r;
						img.data[pxl + 1] = backgroundColor.g;
						img.data[pxl + 2] = backgroundColor.b;
						img.data[pxl + 3] = 255;
					}
				}
			}
		}
	}

	return img;
}

// TODO : move into core
function undefinedOrNull(x) {
	return x === undefined || x === null;
}

function isImageRendered(drawing, paletteId) {
	var col = drawing.col;
	var colStr = "" + col;
	var pal = paletteId;
	var drwId = drawing.drw;

	if (undefinedOrNull(imageStore.render[drwId]) ||
		undefinedOrNull(imageStore.render[drwId][pal]) ||
		undefinedOrNull(imageStore.render[drwId][pal][colStr])) {
			return false;
	}
	else {
		return true;
	}
}

function getImageSet(drawing, paletteId) {
	return imageStore.render[drawing.drw][paletteId][drawing.col];
}

function getImageFrame(drawing, paletteId, frameOverride) {
	var frameIndex = 0;
	if (drawing.animation.isAnimated) {
		if (frameOverride != undefined && frameOverride != null) {
			frameIndex = frameOverride;
		}
		else {
			frameIndex = drawing.animation.frameIndex;
		}
	}

	return getImageSet(drawing, paletteId)[frameIndex];
}

function getOrRenderImage(drawing, paletteId, frameOverride) {
	if (!isImageRendered(drawing, paletteId)) {
		renderImage(drawing, paletteId);
	}

	return getImageFrame(drawing, paletteId, frameOverride);
}

/* PUBLIC INTERFACE */
this.GetImage = getOrRenderImage;

this.SetPalettes = setPalettes;

this.SetImageSource = function(drawingId, imageSourceData) {
	imageStore.source[drawingId] = imageSourceData;
	imageStore.render[drawingId] = {}; // reset render cache for this image
}

this.GetImageSource = function(drawingId) {
	return imageStore.source[drawingId];
}

this.GetFrameCount = function(drawingId) {
	return imageStore.source[drawingId].length;
}

this.AttachContext = function(ctx) {
	context = ctx;
}

} // Renderer()
</script>

<script>
var xhr; // TODO : remove
var canvas;
var context; // TODO : remove if safe?
var ctx;

var title = "";
var room = {};
var tile = {};
var sprite = {};
var item = {};
var dialog = {};
var palette = {
	"0" : [[0,0,0],[255,0,0],[255,255,255]] //start off with a default palette (can be overriden)
};
var ending = {};
var variable = {}; // these are starting variable values -- they don't update (or I don't think they will)
var playerId = "A";

var defaultFontName = "ascii_small";
var fontName = defaultFontName;

var names = {
	room : new Map(),
	tile : new Map(), // Note: Not currently enabled in the UI
	sprite : new Map(),
	item : new Map(),
	/*dialog : new Map()*/ // TODO
	/*ending : new Map()*/ // TODO
};
function updateNamesFromCurData() {
	names.room = new Map();
	for(id in room) {
		if(room[id].name != undefined && room[id].name != null)
			names.room.set( room[id].name, id );
	}
	names.tile = new Map();
	for(id in tile) {
		if(tile[id].name != undefined && tile[id].name != null)
			names.tile.set( tile[id].name, id );
	}
	names.sprite = new Map();
	for(id in sprite) {
		if(sprite[id].name != undefined && sprite[id].name != null)
			names.sprite.set( sprite[id].name, id );
	}
	names.item = new Map();
	for(id in item) {
		if(item[id].name != undefined && item[id].name != null)
			names.item.set( item[id].name, id );
	}
}

var spriteStartLocations = {};

/* VERSION */
var version = {
	major: 5, // for file format / engine changes
	minor: 3 // for editor changes and bugfixes
};
function getEngineVersion() {
	return version.major + "." + version.minor;
}

/* FLAGS */
var flags;
function resetFlags() {
	flags = {
		ROOM_FORMAT : 0 // 0 = non-comma separated, 1 = comma separated
	};
}
resetFlags(); //init flags on load script

function clearGameData() {
	title = "";
	room = {};
	tile = {};
	sprite = {};
	item = {};
	dialog = {};
	palette = { //start off with a default palette (can be overriden)
		"0" : {
			name : null,
			colors : [[0,0,0],[255,0,0],[255,255,255]]
		}
	};
	ending = {};
	isEnding = false; //todo - correct place for this?
	variable = {};

	// TODO RENDERER : clear data?

	spriteStartLocations = {};

	names = {
		room : new Map(),
		tile : new Map(),
		sprite : new Map(),
		item : new Map()
	};

	fontName = defaultFontName; // TODO : reset font manager too?
}

var width = 128;
var height = 128;
var scale = 4; //this is stupid but necessary
var tilesize = 8;
var mapsize = 16;

var curRoom = "0";

var key = {
	left : 37,
	right : 39,
	up : 38,
	down : 40,
	space : 32,
	enter : 13,
	w : 87,
	a : 65,
	s : 83,
	d : 68,
	r : 82,
	shift : 16,
	ctrl : 17,
	alt : 18,
	cmd : 224
};

var prevTime = 0;
var deltaTime = 0;

//methods used to trigger gif recording
var didPlayerMoveThisFrame = false;
var onPlayerMoved = null;
// var didDialogUpdateThisFrame = false;
var onDialogUpdate = null;

//inventory update UI handles
var onInventoryChanged = null;
var onVariableChanged = null;

var isPlayerEmbeddedInEditor = false;

var renderer = new Renderer(tilesize, scale);

function getGameNameFromURL() {
	var game = window.location.hash.substring(1);
	// console.log("game name --- " + game);
	return game;
}

function attachCanvas(c) {
	canvas = c;
	canvas.width = width * scale;
	canvas.height = width * scale;
	ctx = canvas.getContext("2d");
	dialogRenderer.AttachContext(ctx);
	renderer.AttachContext(ctx);
}

var curGameData = null;
function load_game(game_data, startWithTitle) {
	curGameData = game_data; //remember the current game (used to reset the game)

	dialogBuffer.Reset();
	scriptInterpreter.ResetEnvironment(); // ensures variables are reset -- is this the best way?

	parseWorld(game_data);

	if (!isPlayerEmbeddedInEditor) {
		// hack to ensure default font is available
		fontManager.AddResource(defaultFontName + fontManager.GetExtension(), document.getElementById(defaultFontName).text.slice(1));
	}

	var font = fontManager.Get( fontName );
	dialogBuffer.SetFont(font);
	dialogRenderer.SetFont(font);

	setInitialVariables();

	// setInterval(updateLoadingScreen, 300); // hack test

	onready(startWithTitle);
}

function reset_cur_game() {
	if (curGameData == null) return; //can't reset if we don't have the game data
	stopGame();
	clearGameData();
	load_game(curGameData);
}

var update_interval = null;
function onready(startWithTitle) {
	if(startWithTitle === undefined || startWithTitle === null) startWithTitle = true;

	clearInterval(loading_interval);

	input = new InputManager();

	document.addEventListener('keydown', input.onkeydown);
	document.addEventListener('keyup', input.onkeyup);

	if (isPlayerEmbeddedInEditor) {
		canvas.addEventListener('touchstart', input.ontouchstart);
		canvas.addEventListener('touchmove', input.ontouchmove);
		canvas.addEventListener('touchend', input.ontouchend);
	}
	else {

		//borksy modification, fixing touch controls on mobile

		var touchTrigger = document.createElement("div");
		touchTrigger.setAttribute("id","touchTrigger");
		touchTrigger.setAttribute(
			"style","position: absolute; top: 0; left: 0; width: 100vw; height: 100vh;"
		);
		document.body.appendChild(touchTrigger);

		touchTrigger.addEventListener('touchstart', input.ontouchstart);
		touchTrigger.addEventListener('touchmove', input.ontouchmove);
		touchTrigger.addEventListener('touchend', input.ontouchend);
	}

	window.onblur = input.onblur;

	update_interval = setInterval(update,-1);

	console.log("TITLE ??? " + startWithTitle);
	if(startWithTitle) // used by editor
		startNarrating(title);
}

function setInitialVariables() {
	for(id in variable) {
		var value = variable[id]; // default to string
		if(value === "true") {
			value = true;
		}
		else if(value === "false") {
			value = false;
		}
		else if(!isNaN(parseFloat(value))) {
			value = parseFloat(value);
		}
		scriptInterpreter.SetVariable(id,value);
	}
	scriptInterpreter.SetOnVariableChangeHandler( onVariableChanged );
}

// TODO: this is likely broken
function breadthFirstSearch(map, from, to) {
	from.trail = [];
	var visited = [];
	var queue = [from];
	visited.push( posToString(from) );

	//console.log( "~ bfs ~");
	//console.log( posToString(from) + " to " + posToString(to) );

	while ( queue.length > 0 ) {

		//grab pos from queue and mark as visited
		var curPos = queue.shift();

		//console.log( posToString(curPos) );
		//console.log( ".. " + pathToString(curPos.trail) );
		//console.log( visited );

		if (curPos.x == to.x && curPos.y == to.y) {
			//found a path!
			var path = curPos.trail.splice(0);
			path.push( curPos );
			return path;
		}

		//look at neighbors
		neighbors(curPos).forEach( function(n) {
			var inBounds = (n.x >= 0 && n.x < 16 && n.y >= 0 && n.y < 16);
			if (inBounds) {
				var noCollision = map[n.y][n.x] <= 0;
				var notVisited = visited.indexOf( posToString(n) ) == -1;
				if (noCollision && notVisited) {
					n.trail = curPos.trail.slice();
					n.trail.push(curPos);
					queue.push( n );
					visited.push( posToString(n) );
				}
			}
		});

	}

	return []; // no path found
}

function posToString(pos) {
	return pos.x + "," + pos.y;
}

function pathToString(path) {
	var s = "";
	for (i in path) {
		s += posToString(path[i]) + " ";
	}
	return s;
}

function neighbors(pos) {
	var neighborList = [];
	neighborList.push( {x:pos.x+1, y:pos.y+0} );
	neighborList.push( {x:pos.x-1, y:pos.y+0} );
	neighborList.push( {x:pos.x+0, y:pos.y+1} );
	neighborList.push( {x:pos.x+0, y:pos.y-1} );
	return neighborList;
}

function collisionMap(roomId) {
	var map = [
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
	];

	for (r in room[roomId].tilemap) {
		var row = room[roomId].tilemap[r];
		for (var c = 0; c < row.length; c++) {
			if (room[roomId].walls.indexOf( row[x] ) != -1) {
				map[r][c] = 1;
			}
		}
	}

	for (id in sprite) {
		var spr = sprite[id];
		if (spr.room === roomId) {
			map[spr.y][spr.x] = 2;
		}
	}

	return map;
}

function getOffset(evt) {
	var offset = { x:0, y:0 };

	var el = evt.target;
	var rect = el.getBoundingClientRect();

	offset.x += rect.left + el.scrollLeft;
	offset.y += rect.top + el.scrollTop;

	offset.x = evt.clientX - offset.x;
	offset.y = evt.clientY - offset.y;

	return offset;
}

function stopGame() {
	console.log("stop GAME!");

	document.removeEventListener('keydown', input.onkeydown);
	document.removeEventListener('keyup', input.onkeyup);

	if (isPlayerEmbeddedInEditor) {
		canvas.removeEventListener('touchstart', input.ontouchstart);
		canvas.removeEventListener('touchmove', input.ontouchmove);
		canvas.removeEventListener('touchend', input.ontouchend);
	}
	else {
		document.removeEventListener('touchstart', input.ontouchstart);
		document.removeEventListener('touchmove', input.ontouchmove);
		document.removeEventListener('touchend', input.ontouchend);
	}

	window.onblur = null;

	clearInterval(update_interval);
}

/* loading animation */
var loading_anim_data = [
	[
		0,1,1,1,1,1,1,0,
		0,0,1,1,1,1,0,0,
		0,0,1,1,1,1,0,0,
		0,0,0,1,1,0,0,0,
		0,0,0,1,1,0,0,0,
		0,0,1,0,0,1,0,0,
		0,0,1,0,0,1,0,0,
		0,1,1,1,1,1,1,0,
	],
	[
		0,1,1,1,1,1,1,0,
		0,0,1,0,0,1,0,0,
		0,0,1,1,1,1,0,0,
		0,0,0,1,1,0,0,0,
		0,0,0,1,1,0,0,0,
		0,0,1,0,0,1,0,0,
		0,0,1,1,1,1,0,0,
		0,1,1,1,1,1,1,0,
	],
	[
		0,1,1,1,1,1,1,0,
		0,0,1,0,0,1,0,0,
		0,0,1,0,0,1,0,0,
		0,0,0,1,1,0,0,0,
		0,0,0,1,1,0,0,0,
		0,0,1,1,1,1,0,0,
		0,0,1,1,1,1,0,0,
		0,1,1,1,1,1,1,0,
	],
	[
		0,1,1,1,1,1,1,0,
		0,0,1,0,0,1,0,0,
		0,0,1,0,0,1,0,0,
		0,0,0,1,1,0,0,0,
		0,0,0,1,1,0,0,0,
		0,0,1,1,1,1,0,0,
		0,0,1,1,1,1,0,0,
		0,1,1,1,1,1,1,0,
	],
	[
		0,0,0,0,0,0,0,0,
		1,0,0,0,0,0,0,1,
		1,1,1,0,0,1,1,1,
		1,1,1,1,1,0,0,1,
		1,1,1,1,1,0,0,1,
		1,1,1,0,0,1,1,1,
		1,0,0,0,0,0,0,1,
		0,0,0,0,0,0,0,0,
	]
];
var loading_anim_frame = 0;
var loading_anim_speed = 500;
var loading_interval = null;

function loadingAnimation() {
	//create image
	var loadingAnimImg = ctx.createImageData(8*scale, 8*scale);
	//draw image
	for (var y = 0; y < 8; y++) {
		for (var x = 0; x < 8; x++) {
			var i = (y * 8) + x;
			if (loading_anim_data[loading_anim_frame][i] == 1) {
				//scaling nonsense
				for (var sy = 0; sy < scale; sy++) {
					for (var sx = 0; sx < scale; sx++) {
						var pxl = 4 * ( (((y*scale)+sy) * (8*scale)) + ((x*scale)+sx) );
						loadingAnimImg.data[pxl+0] = 255;
						loadingAnimImg.data[pxl+1] = 255;
						loadingAnimImg.data[pxl+2] = 255;
						loadingAnimImg.data[pxl+3] = 255;
					}
				}
			}
		}
	}
	//put image on canvas
	ctx.putImageData(loadingAnimImg,scale*(width/2 - 4),scale*(height/2 - 4));
	//update frame
	loading_anim_frame++;
	if (loading_anim_frame >= 5) loading_anim_frame = 0;
}

function updateLoadingScreen() {
	// TODO : in progress
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillRect(0,0,canvas.width,canvas.height);

	loadingAnimation();
	drawSprite( getSpriteImage(sprite["a"],"0",0), 8, 8, ctx );
}

function update() {
	var curTime = Date.now();
	deltaTime = curTime - prevTime;

	updateInput();

	if (!isNarrating && !isEnding) {
		updateAnimation();
		drawRoom( room[curRoom] ); // draw world if game has begun
	}
	else {
		//make sure to still clear screen
		ctx.fillStyle = "rgb(" + getPal(curPal())[0][0] + "," + getPal(curPal())[0][1] + "," + getPal(curPal())[0][2] + ")";
		ctx.fillRect(0,0,canvas.width,canvas.height);
	}

	// if (isDialogMode) { // dialog mode
	if(dialogBuffer.IsActive()) {
		dialogRenderer.Draw( dialogBuffer, deltaTime );
		dialogBuffer.Update( deltaTime );
	}
	else if (!isEnding) {
		moveSprites();
	}

	// keep moving avatar if player holds down button
	if( !dialogBuffer.IsActive() && !isEnding )
	{
		if( curPlayerDirection != Direction.None ) {
			playerHoldToMoveTimer -= deltaTime;

			if( playerHoldToMoveTimer <= 0 )
			{
				movePlayer( curPlayerDirection );
				playerHoldToMoveTimer = 150;
			}
		}
	}

	prevTime = curTime;

	//for gif recording
	if (didPlayerMoveThisFrame && onPlayerMoved != null) onPlayerMoved();
	didPlayerMoveThisFrame = false;
	// if (didDialogUpdateThisFrame && onDialogUpdate != null) onDialogUpdate();
	// didDialogUpdateThisFrame = false;
	/* hacky replacement */
	if (onDialogUpdate != null)
		dialogRenderer.SetPageFinishHandler( onDialogUpdate );

	input.resetKeyPressed();
	input.resetTapReleased();
}

function updateInput() {
	if( dialogBuffer.IsActive() ) {
		if (input.anyKeyPressed() || input.isTapReleased()) {
			/* CONTINUE DIALOG */
			if (dialogBuffer.CanContinue()) {
				var hasMoreDialog = dialogBuffer.Continue();
				if(!hasMoreDialog) {
					// ignore currently held keys UNTIL they are released (stops player from insta-moving)
					input.ignoreHeldKeys();

					onExitDialog();
				}
			}
			else {
				dialogBuffer.Skip();
			}
		}
	}
	else if ( isEnding ) {
		if (input.anyKeyPressed() || input.isTapReleased()) {
			/* RESTART GAME */
			reset_cur_game();
		}
	}
	else {
		/* WALK */
		var prevPlayerDirection = curPlayerDirection;

		if ( input.isKeyDown( key.left ) || input.isKeyDown( key.a ) || input.swipeLeft() ) {
			curPlayerDirection = Direction.Left;
		}
		else if ( input.isKeyDown( key.right ) || input.isKeyDown( key.d ) || input.swipeRight() ) {
			curPlayerDirection = Direction.Right;
		}
		else if ( input.isKeyDown( key.up ) || input.isKeyDown( key.w ) || input.swipeUp() ) {
			curPlayerDirection = Direction.Up;
		}
		else if ( input.isKeyDown( key.down ) || input.isKeyDown( key.s ) || input.swipeDown() ) {
			curPlayerDirection = Direction.Down;
		}
		else {
			curPlayerDirection = Direction.None;
		}

		if (curPlayerDirection != Direction.None && curPlayerDirection != prevPlayerDirection) {
			movePlayer( curPlayerDirection );
			playerHoldToMoveTimer = 500;
		}
	}
}

var animationCounter = 0;
var animationTime = 400;
function updateAnimation() {
	animationCounter += deltaTime;

	if ( animationCounter >= animationTime ) {

		// animate sprites
		for (id in sprite) {
			var spr = sprite[id];
			if (spr.animation.isAnimated) {
				spr.animation.frameIndex = ( spr.animation.frameIndex + 1 ) % spr.animation.frameCount;
			}
		}

		// animate tiles
		for (id in tile) {
			var til = tile[id];
			if (til.animation.isAnimated) {
				til.animation.frameIndex = ( til.animation.frameIndex + 1 ) % til.animation.frameCount;
			}
		}

		// animate items
		for (id in item) {
			var itm = item[id];
			if (itm.animation.isAnimated) {
				itm.animation.frameIndex = ( itm.animation.frameIndex + 1 ) % itm.animation.frameCount;
			}
		}

		// reset counter
		animationCounter = 0;

	}
}

var moveCounter = 0;
var moveTime = 200;
function moveSprites() {
	moveCounter += deltaTime;

	if (moveCounter >= moveTime) {

		for (id in sprite) {
			var spr = sprite[id];
			if (spr.walkingPath.length > 0) {
				//move sprite
				var nextPos = spr.walkingPath.shift();
				spr.x = nextPos.x;
				spr.y = nextPos.y;


				var end = getEnding( spr.room, spr.x, spr.y );
				var ext = getExit( spr.room, spr.x, spr.y );
				var itmIndex = getItemIndex( spr.room, spr.x, spr.y );
				if (end) { //if the sprite hits an ending
					if (id === playerId) { // only the player can end the game
						startNarrating( ending[end.id], true /*isEnding*/ );
					}
				}
				else if (ext) { //if the sprite hits an exit
					//move it to another scene
					spr.room = ext.dest.room;
					spr.x = ext.dest.x;
					spr.y = ext.dest.y;
					if (id === playerId) {
						//if the player changes scenes, change the visible scene
						curRoom = ext.dest.room;
					}
				}
				else if(itmIndex > -1) {
					var itm = room[ spr.room ].items[ itmIndex ];
					room[ spr.room ].items.splice( itmIndex, 1 );
					if( spr.inventory[ itm.id ] )
						spr.inventory[ itm.id ] += 1;
					else
						spr.inventory[ itm.id ] = 1;

					if(onInventoryChanged != null)
						onInventoryChanged( itm.id );

					if(id === playerId)
						startItemDialog( itm.id  /*itemId*/ );

					// stop moving : is this a good idea?
					spr.walkingPath = [];
				}

				if (id === playerId) didPlayerMoveThisFrame = true;
			}
		}

		moveCounter = 0;
	}

}

function getSpriteAt(x,y) {
	for (id in sprite) {
		var spr = sprite[id];
		if (spr.room === curRoom) {
			if (spr.x == x && spr.y == y) {
				return id;
			}
		}
	}
	return null;
}

var Direction = {
	None : -1,
	Up : 0,
	Down : 1,
	Left : 2,
	Right : 3
};

var curPlayerDirection = Direction.None;
var playerHoldToMoveTimer = 0;

var InputManager = function() {
	var self = this;

	var pressed;
	var ignored;
	var newKeyPress;
	var touchState;

	function resetAll() {
		pressed = {};
		ignored = {};
		newKeyPress = false;

		touchState = {
			isDown : false,
			startX : 0,
			startY : 0,
			curX : 0,
			curY : 0,
			swipeDistance : 30,
			swipeDirection : Direction.None,
			tapReleased : false
		};
	}
	resetAll();

	function stopWindowScrolling(e) {
		if(e.keyCode == key.left || e.keyCode == key.right || e.keyCode == key.up || e.keyCode == key.down || !isPlayerEmbeddedInEditor)
			e.preventDefault();
	}

	function tryRestartGame(e) {
		/* RESTART GAME */
		if ( e.keyCode === key.r && ( e.getModifierState("Control") || e.getModifierState("Meta") ) ) {
			if ( confirm("Restart the game?") ) {
				reset_cur_game();
			}
		}
	}

	function eventIsModifier(event) {
		return (event.keyCode == key.shift || event.keyCode == key.ctrl || event.keyCode == key.alt || event.keyCode == key.cmd);
	}

	function isModifierKeyDown() {
		return ( self.isKeyDown(key.shift) || self.isKeyDown(key.ctrl) || self.isKeyDown(key.alt) || self.isKeyDown(key.cmd) );
	}

	this.ignoreHeldKeys = function() {
		for (var key in pressed) {
			if (pressed[key]) { // only ignore keys that are actually held
				ignored[key] = true;
				// console.log("IGNORE -- " + key);
			}
		}
	}

	this.onkeydown = function(event) {
		// console.log("KEYDOWN -- " + event.keyCode);

		stopWindowScrolling(event);

		tryRestartGame(event);

		// Special keys being held down can interfere with keyup events and lock movement
		// so just don't collect input when they're held
		{
			if (isModifierKeyDown()) {
				return;
			}

			if (eventIsModifier(event)) {
				resetAll();
			}
		}

		if (ignored[event.keyCode]) {
			return;
		}

		if (!self.isKeyDown(event.keyCode)) {
			newKeyPress = true;
		}

		pressed[event.keyCode] = true;
		ignored[event.keyCode] = false;
	}

	this.onkeyup = function(event) {
		// console.log("KEYUP -- " + event.keyCode);
		pressed[event.keyCode] = false;
		ignored[event.keyCode] = false;
	}

	this.ontouchstart = function(event) {
		event.preventDefault();

		if( event.changedTouches.length > 0 ) {
			touchState.isDown = true;

			touchState.startX = touchState.curX = event.changedTouches[0].clientX;
			touchState.startY = touchState.curY = event.changedTouches[0].clientY;

			touchState.swipeDirection = Direction.None;
		}
	}

	this.ontouchmove = function(event) {
		event.preventDefault();

		if( touchState.isDown && event.changedTouches.length > 0 ) {
			touchState.curX = event.changedTouches[0].clientX;
			touchState.curY = event.changedTouches[0].clientY;

			var prevDirection = touchState.swipeDirection;

			if( touchState.curX - touchState.startX <= -touchState.swipeDistance ) {
				touchState.swipeDirection = Direction.Left;
			}
			else if( touchState.curX - touchState.startX >= touchState.swipeDistance ) {
				touchState.swipeDirection = Direction.Right;
			}
			else if( touchState.curY - touchState.startY <= -touchState.swipeDistance ) {
				touchState.swipeDirection = Direction.Up;
			}
			else if( touchState.curY - touchState.startY >= touchState.swipeDistance ) {
				touchState.swipeDirection = Direction.Down;
			}

			if( touchState.swipeDirection != prevDirection ) {
				// reset center so changing directions is easier
				touchState.startX = touchState.curX;
				touchState.startY = touchState.curY;
			}
		}
	}

	this.ontouchend = function(event) {
		event.preventDefault();

		touchState.isDown = false;

		if( touchState.swipeDirection == Direction.None ) {
			// tap!
			touchState.tapReleased = true;
		}

		touchState.swipeDirection = Direction.None;
	}

	this.isKeyDown = function(keyCode) {
		return pressed[keyCode] != null && pressed[keyCode] == true && (ignored[keyCode] == null || ignored[keyCode] == false);
	}

	this.anyKeyPressed = function() {
		return newKeyPress;
	}

	this.resetKeyPressed = function() {
		newKeyPress = false;
	}

	this.swipeLeft = function() {
		return touchState.swipeDirection == Direction.Left;
	}

	this.swipeRight = function() {
		return touchState.swipeDirection == Direction.Right;
	}

	this.swipeUp = function() {
		return touchState.swipeDirection == Direction.Up;
	}

	this.swipeDown = function() {
		return touchState.swipeDirection == Direction.Down;
	}

	this.isTapReleased = function() {
		return touchState.tapReleased;
	}

	this.resetTapReleased = function() {
		touchState.tapReleased = false;
	}

	this.onblur = function() {
		// console.log("~~~ BLUR ~~");
		resetAll();
	}
}
var input = null;

function movePlayer(direction) {
	var spr = null;

	if ( curPlayerDirection == Direction.Left && !(spr = getSpriteLeft()) && !isWallLeft()) {
		player().x -= 1;
		didPlayerMoveThisFrame = true;
	}
	else if ( curPlayerDirection == Direction.Right && !(spr = getSpriteRight()) && !isWallRight()) {
		player().x += 1;
		didPlayerMoveThisFrame = true;
	}
	else if ( curPlayerDirection == Direction.Up && !(spr = getSpriteUp()) && !isWallUp()) {
		player().y -= 1;
		didPlayerMoveThisFrame = true;
	}
	else if ( curPlayerDirection == Direction.Down && !(spr = getSpriteDown()) && !isWallDown()) {
		player().y += 1;
		didPlayerMoveThisFrame = true;
	}
	
	var ext = getExit( player().room, player().x, player().y );
	var end = getEnding( player().room, player().x, player().y );
	var itmIndex = getItemIndex( player().room, player().x, player().y );

	// do items first, because you can pick up an item AND go through a door
	if (itmIndex > -1) {
		// TODO pick up items (what about touch?)
		// console.log("HIT ITM ");
		// console.log( itmIndex );
		var itm = room[ player().room ].items[ itmIndex ];
		// console.log(itm);
		room[ player().room ].items.splice( itmIndex, 1 );
		if( player().inventory[ itm.id ] )
			player().inventory[ itm.id ] += 1;
		else
			player().inventory[ itm.id ] = 1;

		if(onInventoryChanged != null)
			onInventoryChanged( itm.id );

		startItemDialog( itm.id  /*itemId*/ );

		// console.log( player().inventory );
	}

	if (end) {
		startNarrating( ending[end.id], true /*isEnding*/ );
	}
	else if (ext) {
		player().room = ext.dest.room;
		player().x = ext.dest.x;
		player().y = ext.dest.y;
		curRoom = ext.dest.room;
	}
	else if (spr) {
		startSpriteDialog( spr /*spriteId*/ );
	}
}

function getItemIndex( roomId, x, y ) {
	for( var i = 0; i < room[roomId].items.length; i++ ) {
		var itm = room[roomId].items[i];
		if ( itm.x == x && itm.y == y)
			return i;
	}
	return -1;
}

function getSpriteLeft() { //repetitive?
	return getSpriteAt( player().x - 1, player().y );
}

function getSpriteRight() {
	return getSpriteAt( player().x + 1, player().y );
}

function getSpriteUp() {
	return getSpriteAt( player().x, player().y - 1 );
}

function getSpriteDown() {
	return getSpriteAt( player().x, player().y + 1 );
}

function isWallLeft() {
	return (player().x - 1 < 0) || isWall( player().x - 1, player().y );
}

function isWallRight() {
	return (player().x + 1 >= 16) || isWall( player().x + 1, player().y );
}

function isWallUp() {
	return (player().y - 1 < 0) || isWall( player().x, player().y - 1 );
}

function isWallDown() {
	return (player().y + 1 >= 16) || isWall( player().x, player().y + 1 );
}

function isWall(x,y,roomId) {
	if(roomId == undefined || roomId == null)
		roomId = curRoom;

	var tileId = getTile( x, y );

	if( tileId === '0' )
		return false; // Blank spaces aren't walls, ya doofus

	if( tile[tileId].isWall === undefined || tile[tileId].isWall === null ) {
		// No wall-state defined: check room-specific walls
		var i = room[roomId].walls.indexOf( getTile(x,y) );
		return i > -1;
	}

	// Otherwise, use the tile's own wall-state
	return tile[tileId].isWall;
}

function getItem(roomId,x,y) {
	for (i in room[roomId].items) {
		var item = room[roomId].items[i];
		if (x == item.x && y == item.y) {
			return item;
		}
	}
	return null;
}

function getExit(roomId,x,y) {
	for (i in room[roomId].exits) {
		var e = room[roomId].exits[i];
		if (x == e.x && y == e.y) {
			return e;
		}
	}
	return null;
}

function getEnding(roomId,x,y) {
	for (i in room[roomId].endings) {
		var e = room[roomId].endings[i];
		if (x == e.x && y == e.y) {
			return e;
		}
	}
	return null;
}

function getTile(x,y) {
	// console.log(x + " " + y);
	var t = getRoom().tilemap[y][x];
	return t;
}

function player() {
	return sprite[playerId];
}

// Sort of a hack for legacy palette code (when it was just an array)
function getPal(id) {
	return palette[ id ].colors;
}

function getRoom() {
	return room[curRoom];
}

function isSpriteOffstage(id) {
	return sprite[id].room == null;
}

function parseWorld(file) {
	// console.log("~~~ PARSE WORLD ~~~");
	// console.log(file);

	// var parseTimer = new Timer();

	resetFlags();

	var versionNumber = 0;

	var lines = file.split("\n");
	var i = 0;
	while (i < lines.length) {
		var curLine = lines[i];

		// console.log(lines[i]);

		if (i == 0) {
			i = parseTitle(lines, i);
		}
		else if (curLine.length <= 0 || curLine.charAt(0) === "#") {
			// collect version number (from a comment.. hacky I know)
			if (curLine.indexOf("# BITSY VERSION ") != -1) {
				versionNumber = parseFloat(curLine.replace("# BITSY VERSION ", ""));
			}

			//skip blank lines & comments
			i++;
		}
		else if (getType(curLine) == "PAL") {
			i = parsePalette(lines, i);
		}
		else if (getType(curLine) === "ROOM" || getType(curLine) === "SET") { //SET for back compat
			i = parseRoom(lines, i);
		}
		else if (getType(curLine) === "TIL") {
			i = parseTile(lines, i);
		}
		else if (getType(curLine) === "SPR") {
			i = parseSprite(lines, i);
		}
		else if (getType(curLine) === "ITM") {
			i = parseItem(lines, i);
		}
		else if (getType(curLine) === "DRW") {
			i = parseDrawing(lines, i);
		}
		else if (getType(curLine) === "DLG") {
			i = parseDialog(lines, i);
		}
		else if (getType(curLine) === "END") {
			i = parseEnding(lines, i);
		}
		else if (getType(curLine) === "VAR") {
			i = parseVariable(lines, i);
		}
		else if (getType(curLine) === "DEFAULT_FONT") {
			i = parseFontName(lines, i);
		}
		else if (getType(curLine) === "FONT") {
			i = parseFontData(lines, i);
		}
		else if (getType(curLine) === "!") {
			i = parseFlag(lines, i);
		}
		else {
			i++;
		}
	}
	placeSprites();
	if (player().room != null) {
		curRoom = player().room;
	}

	renderer.SetPalettes(palette);

	// console.log(names);

	// console.log("~~~~~ PARSE TIME " + parseTimer.Milliseconds());

	return versionNumber;
}

//TODO this is in progress and doesn't support all features
function serializeWorld(skipFonts) {
	if (skipFonts === undefined || skipFonts === null)
		skipFonts = false;

	var worldStr = "";
	/* TITLE */
	worldStr += title + "\n";
	worldStr += "\n";
	/* VERSION */
	worldStr += "# BITSY VERSION " + getEngineVersion() + "\n"; // add version as a comment for debugging purposes
	worldStr += "\n";
	/* FLAGS */
	for (f in flags) {
		worldStr += "! " + f + " " + flags[f] + "\n";
	}
	worldStr += "\n"
	/* FONT */
	if (fontName != defaultFontName) {
		worldStr += "DEFAULT_FONT " + fontName + "\n";
		worldStr += "\n"
	}
	/* PALETTE */
	for (id in palette) {
		worldStr += "PAL " + id + "\n";
		if( palette[id].name != null )
			worldStr += "NAME " + palette[id].name + "\n";
		for (i in getPal(id)) {
			for (j in getPal(id)[i]) {
				worldStr += getPal(id)[i][j];
				if (j < 2) worldStr += ",";
			}
			worldStr += "\n";
		}
		worldStr += "\n";
	}
	/* ROOM */
	for (id in room) {
		worldStr += "ROOM " + id + "\n";
		if ( flags.ROOM_FORMAT == 0 ) {
			// old non-comma separated format
			for (i in room[id].tilemap) {
				for (j in room[id].tilemap[i]) {
					worldStr += room[id].tilemap[i][j];	
				}
				worldStr += "\n";
			}
		}
		else if ( flags.ROOM_FORMAT == 1 ) {
			// new comma separated format
			for (i in room[id].tilemap) {
				for (j in room[id].tilemap[i]) {
					worldStr += room[id].tilemap[i][j];
					if (j < room[id].tilemap[i].length-1) worldStr += ","
				}
				worldStr += "\n";
			}
		}
		if (room[id].name != null) {
			/* NAME */
			worldStr += "NAME " + room[id].name + "\n";
		}
		if (room[id].walls.length > 0) {
			/* WALLS */
			worldStr += "WAL ";
			for (j in room[id].walls) {
				worldStr += room[id].walls[j];
				if (j < room[id].walls.length-1) {
					worldStr += ",";
				}
			}
			worldStr += "\n";
		}
		if (room[id].items.length > 0) {
			/* ITEMS */
			for (j in room[id].items) {
				var itm = room[id].items[j];
				worldStr += "ITM " + itm.id + " " + itm.x + "," + itm.y;
				worldStr += "\n";
			}
		}
		if (room[id].exits.length > 0) {
			/* EXITS */
			for (j in room[id].exits) {
				var e = room[id].exits[j];
				if ( isExitValid(e) ) {
					worldStr += "EXT " + e.x + "," + e.y + " " + e.dest.room + " " + e.dest.x + "," + e.dest.y;
					worldStr += "\n";
				}
			}
		}
		if (room[id].endings.length > 0) {
			/* ENDINGS */
			for (j in room[id].endings) {
				var e = room[id].endings[j];
				// todo isEndingValid
				worldStr += "END " + e.id + " " + e.x + "," + e.y;
				worldStr += "\n";
			}
		}
		if (room[id].pal != null) {
			/* PALETTE */
			worldStr += "PAL " + room[id].pal + "\n";
		}
		worldStr += "\n";
	}
	/* TILES */
	for (id in tile) {
		worldStr += "TIL " + id + "\n";
		worldStr += serializeDrawing( "TIL_" + id );
		if (tile[id].name != null && tile[id].name != undefined) {
			/* NAME */
			worldStr += "NAME " + tile[id].name + "\n";
		}
		if (tile[id].isWall != null && tile[id].isWall != undefined) {
			/* WALL */
			worldStr += "WAL " + tile[id].isWall + "\n";
		}
		if (tile[id].col != null && tile[id].col != undefined && tile[id].col != 1) {
			/* COLOR OVERRIDE */
			worldStr += "COL " + tile[id].col + "\n";
		}
		worldStr += "\n";
	}
	/* SPRITES */
	for (id in sprite) {
		worldStr += "SPR " + id + "\n";
		worldStr += serializeDrawing( "SPR_" + id );
		if (sprite[id].name != null && sprite[id].name != undefined) {
			/* NAME */
			worldStr += "NAME " + sprite[id].name + "\n";
		}
		if (sprite[id].dlg != null) {
			worldStr += "DLG " + sprite[id].dlg + "\n";
		}
		if (sprite[id].room != null) {
			/* SPRITE POSITION */
			worldStr += "POS " + sprite[id].room + " " + sprite[id].x + "," + sprite[id].y + "\n";
		}
		if (sprite[id].inventory != null) {
			for(itemId in sprite[id].inventory) {
				worldStr += "ITM " + itemId + " " + sprite[id].inventory[itemId] + "\n";
			}
		}
		if (sprite[id].col != null && sprite[id].col != undefined && sprite[id].col != 2) {
			/* COLOR OVERRIDE */
			worldStr += "COL " + sprite[id].col + "\n";
		}
		worldStr += "\n";
	}
	/* ITEMS */
	for (id in item) {
		worldStr += "ITM " + id + "\n";
		worldStr += serializeDrawing( "ITM_" + id );
		if (item[id].name != null && item[id].name != undefined) {
			/* NAME */
			worldStr += "NAME " + item[id].name + "\n";
		}
		if (item[id].dlg != null) {
			worldStr += "DLG " + item[id].dlg + "\n";
		}
		if (item[id].col != null && item[id].col != undefined && item[id].col != 2) {
			/* COLOR OVERRIDE */
			worldStr += "COL " + item[id].col + "\n";
		}
		worldStr += "\n";
	}
	/* DIALOG */
	for (id in dialog) {
		worldStr += "DLG " + id + "\n";
		worldStr += dialog[id] + "\n";
		worldStr += "\n";
	}
	/* ENDINGS */
	for (id in ending) {
		worldStr += "END " + id + "\n";
		worldStr += ending[id] + "\n";
		worldStr += "\n";
	}
	/* VARIABLES */
	for (id in variable) {
		worldStr += "VAR " + id + "\n";
		worldStr += variable[id] + "\n";
		worldStr += "\n";
	}
	/* FONT */
	// TODO : support multiple fonts
	if (fontName != defaultFontName && !skipFonts) {
		worldStr += fontManager.GetData(fontName);
	}

	return worldStr;
}

function serializeDrawing(drwId) {
	var imageSource = renderer.GetImageSource(drwId);
	var drwStr = "";
	for (f in imageSource) {
		for (y in imageSource[f]) {
			var rowStr = "";
			for (x in imageSource[f][y]) {
				rowStr += imageSource[f][y][x];
			}
			drwStr += rowStr + "\n";
		}
		if (f < (imageSource.length-1)) drwStr += ">\n";
	}
	return drwStr;
}

function isExitValid(e) {
	var hasValidStartPos = e.x >= 0 && e.x < 16 && e.y >= 0 && e.y < 16;
	var hasDest = e.dest != null;
	var hasValidRoomDest = (e.dest.room != null && e.dest.x >= 0 && e.dest.x < 16 && e.dest.y >= 0 && e.dest.y < 16);
	return hasValidStartPos && hasDest && hasValidRoomDest;
}

function placeSprites() {
	for (id in spriteStartLocations) {
		//console.log(id);
		//console.log( spriteStartLocations[id] );
		//console.log(sprite[id]);
		sprite[id].room = spriteStartLocations[id].room;
		sprite[id].x = spriteStartLocations[id].x;
		sprite[id].y = spriteStartLocations[id].y;
		//console.log(sprite[id]);
	}
}

/* ARGUMENT GETTERS */
function getType(line) {
	return getArg(line,0);
}

function getId(line) {
	return getArg(line,1);
}

function getArg(line,arg) {
	return line.split(" ")[arg];
}

function getCoord(line,arg) {
	return getArg(line,arg).split(",");
}

function parseTitle(lines, i) {
	title = lines[i];
	i++;
	return i;
}

function parseRoom(lines, i) {
	var id = getId(lines[i]);
	room[id] = {
		id : id,
		tilemap : [],
		walls : [],
		exits : [],
		endings : [],
		items : [],
		pal : null,
		name : null
	};
	i++;

	// create tile map
	if ( flags.ROOM_FORMAT == 0 ) {
		// old way: no commas, single char tile ids
		var end = i + mapsize;
		var y = 0;
		for (; i<end; i++) {
			room[id].tilemap.push( [] );
			for (x = 0; x<mapsize; x++) {
				room[id].tilemap[y].push( lines[i].charAt(x) );
			}
			y++;
		}
	}
	else if ( flags.ROOM_FORMAT == 1 ) {
		// new way: comma separated, multiple char tile ids
		var end = i + mapsize;
		var y = 0;
		for (; i<end; i++) {
			room[id].tilemap.push( [] );
			var lineSep = lines[i].split(",");
			for (x = 0; x<mapsize; x++) {
				room[id].tilemap[y].push( lineSep[x] );
			}
			y++;
		}
	}

	while (i < lines.length && lines[i].length > 0) { //look for empty line
		// console.log(getType(lines[i]));
		if (getType(lines[i]) === "SPR") {
			/* NOTE SPRITE START LOCATIONS */
			var sprId = getId(lines[i]);
			if (sprId.indexOf(",") == -1 && lines[i].split(" ").length >= 3) { //second conditional checks for coords
				/* PLACE A SINGLE SPRITE */
				var sprCoord = lines[i].split(" ")[2].split(",");
				spriteStartLocations[sprId] = {
					room : id,
					x : parseInt(sprCoord[0]),
					y : parseInt(sprCoord[1])
				};
			}
			else if ( flags.ROOM_FORMAT == 0 ) { // TODO: right now this shortcut only works w/ the old comma separate format
				/* PLACE MULTIPLE SPRITES*/ 
				//Does find and replace in the tilemap (may be hacky, but its convenient)
				var sprList = sprId.split(",");
				for (row in room[id].tilemap) {
					for (s in sprList) {
						var col = room[id].tilemap[row].indexOf( sprList[s] );
						//if the sprite is in this row, replace it with the "null tile" and set its starting position
						if (col != -1) {
							room[id].tilemap[row][col] = "0";
							spriteStartLocations[ sprList[s] ] = {
								room : id,
								x : parseInt(col),
								y : parseInt(row)
							};
						}
					}
				}
			}
		}
		else if (getType(lines[i]) === "ITM") {
			var itmId = getId(lines[i]);
			var itmCoord = lines[i].split(" ")[2].split(",");
			var itm = {
				id: itmId,
				x : parseInt(itmCoord[0]),
				y : parseInt(itmCoord[1])
			};
			room[id].items.push( itm );
		}
		else if (getType(lines[i]) === "WAL") {
			/* DEFINE COLLISIONS (WALLS) */
			room[id].walls = getId(lines[i]).split(",");
		}
		else if (getType(lines[i]) === "EXT") {
			/* ADD EXIT */
			var exitArgs = lines[i].split(" ");
			//arg format: EXT 10,5 M 3,2 [AVA:7 LCK:a,9] [AVA 7 LCK a 9]
			var exitCoords = exitArgs[1].split(",");
			var destName = exitArgs[2];
			var destCoords = exitArgs[3].split(",");
			var ext = {
				x : parseInt(exitCoords[0]),
				y : parseInt(exitCoords[1]),
				dest : {
					room : destName,
					x : parseInt(destCoords[0]),
					y : parseInt(destCoords[1])
				}
			};
			room[id].exits.push(ext);
		}
		else if (getType(lines[i]) === "END") {
			/* ADD ENDING */
			var endId = getId( lines[i] );
			var endCoords = getCoord( lines[i], 2 );
			var end = {
				id : endId,
				x : parseInt( endCoords[0] ),
				y : parseInt( endCoords[1] )
			};
			room[id].endings.push(end);
		}
		else if (getType(lines[i]) === "PAL") {
			/* CHOOSE PALETTE (that's not default) */
			room[id].pal = getId(lines[i]);
		}
		else if (getType(lines[i]) === "NAME") {
			var name = lines[i].split(/\s(.+)/)[1];
			room[id].name = name;
			names.room.set( name, id);
		}
		i++;
	}
	return i;
}

function parsePalette(lines,i) { //todo this has to go first right now :(
	var id = getId(lines[i]);
	i++;
	var colors = [];
	var name = null;
	while (i < lines.length && lines[i].length > 0) { //look for empty line
		var args = lines[i].split(" ");
		if(args[0] === "NAME") {
			name = lines[i].split(/\s(.+)/)[1];
		}
		else {
			var col = [];
			lines[i].split(",").forEach(function(i) {
				col.push(parseInt(i));
			});
			colors.push(col);
		}
		i++;
	}
	palette[id] = {
		name : name,
		colors : colors
	};
	return i;
}

function parseTile(lines, i) {
	var id = getId(lines[i]);
	var drwId = null;
	var name = null;

	i++;

	if (getType(lines[i]) === "DRW") { //load existing drawing
		drwId = getId(lines[i]);
		i++;
	}
	else {
		// store tile source
		drwId = "TIL_" + id;
		i = parseDrawingCore( lines, i, drwId );
	}

	//other properties
	var colorIndex = 1; // default palette color index is 1
	var isWall = null; // null indicates it can vary from room to room (original version)
	while (i < lines.length && lines[i].length > 0) { //look for empty line
		if (getType(lines[i]) === "COL") {
			colorIndex = parseInt( getId(lines[i]) );
		}
		else if (getType(lines[i]) === "NAME") {
			/* NAME */
			name = lines[i].split(/\s(.+)/)[1];
			names.tile.set( name, id );
		}
		else if (getType(lines[i]) === "WAL") {
			var wallArg = getArg( lines[i], 1 );
			if( wallArg === "true" ) {
				isWall = true;
			}
			else if( wallArg === "false" ) {
				isWall = false;
			}
		}
		i++;
	}

	//tile data
	tile[id] = {
		drw : drwId, //drawing id
		col : colorIndex,
		animation : {
			isAnimated : (renderer.GetFrameCount(drwId) > 1),
			frameIndex : 0,
			frameCount : renderer.GetFrameCount(drwId)
		},
		name : name,
		isWall : isWall
	};

	return i;
}

function parseSprite(lines, i) {
	var id = getId(lines[i]);
	var drwId = null;
	var name = null;

	i++;

	if (getType(lines[i]) === "DRW") { //load existing drawing
		drwId = getId(lines[i]);
		i++;
	}
	else {
		// store sprite source
		drwId = "SPR_" + id;
		i = parseDrawingCore( lines, i, drwId );
	}

	//other properties
	var colorIndex = 2; //default palette color index is 2
	var dialogId = null;
	var startingInventory = {};
	while (i < lines.length && lines[i].length > 0) { //look for empty line
		if (getType(lines[i]) === "COL") {
			/* COLOR OFFSET INDEX */
			colorIndex = parseInt( getId(lines[i]) );
		}
		else if (getType(lines[i]) === "POS") {
			/* STARTING POSITION */
			var posArgs = lines[i].split(" ");
			var roomId = posArgs[1];
			var coordArgs = posArgs[2].split(",");
			spriteStartLocations[id] = {
				room : roomId,
				x : parseInt(coordArgs[0]),
				y : parseInt(coordArgs[1])
			};
		}
		else if(getType(lines[i]) === "DLG") {
			dialogId = getId(lines[i]);
		}
		else if (getType(lines[i]) === "NAME") {
			/* NAME */
			name = lines[i].split(/\s(.+)/)[1];
			names.sprite.set( name, id );
		}
		else if (getType(lines[i]) === "ITM") {
			/* ITEM STARTING INVENTORY */
			var itemId = getId(lines[i]);
			var itemCount = parseFloat( getArg(lines[i], 2) );
			startingInventory[itemId] = itemCount;
		}
		i++;
	}

	//sprite data
	sprite[id] = {
		drw : drwId, //drawing id
		col : colorIndex,
		dlg : dialogId,
		room : null, //default location is "offstage"
		x : -1,
		y : -1,
		walkingPath : [], //tile by tile movement path (isn't saved)
		animation : {
			isAnimated : (renderer.GetFrameCount(drwId) > 1),
			frameIndex : 0,
			frameCount : renderer.GetFrameCount(drwId)
		},
		inventory : startingInventory,
		name : name
	};
	return i;
}

function parseItem(lines, i) {
	var id = getId(lines[i]);
	var drwId = null;
	var name = null;

	i++;

	if (getType(lines[i]) === "DRW") { //load existing drawing
		drwId = getId(lines[i]);
		i++;
	}
	else {
		// store item source
		drwId = "ITM_" + id; // these prefixes are maybe a terrible way to differentiate drawing tyepes :/
		i = parseDrawingCore( lines, i, drwId );
	}

	//other properties
	var colorIndex = 2; //default palette color index is 2
	var dialogId = null;
	while (i < lines.length && lines[i].length > 0) { //look for empty line
		if (getType(lines[i]) === "COL") {
			/* COLOR OFFSET INDEX */
			colorIndex = parseInt( getArg( lines[i], 1 ) );
		}
		// else if (getType(lines[i]) === "POS") {
		// 	/* STARTING POSITION */
		// 	var posArgs = lines[i].split(" ");
		// 	var roomId = posArgs[1];
		// 	var coordArgs = posArgs[2].split(",");
		// 	spriteStartLocations[id] = {
		// 		room : roomId,
		// 		x : parseInt(coordArgs[0]),
		// 		y : parseInt(coordArgs[1])
		// 	};
		// }
		else if(getType(lines[i]) === "DLG") {
			dialogId = getId(lines[i]);
		}
		else if (getType(lines[i]) === "NAME") {
			/* NAME */
			name = lines[i].split(/\s(.+)/)[1];
			names.item.set( name, id );
		}
		i++;
	}

	//item data
	item[id] = {
		drw : drwId, //drawing id
		col : colorIndex,
		dlg : dialogId,
		// room : null, //default location is "offstage"
		// x : -1,
		// y : -1,
		animation : {
			isAnimated : (renderer.GetFrameCount(drwId) > 1),
			frameIndex : 0,
			frameCount : renderer.GetFrameCount(drwId)
		},
		name : name
	};

	// console.log("ITM " + id);
	// console.log(item[id]);

	return i;
}

function parseDrawing(lines, i) {
	// store drawing source
	var drwId = getId( lines[i] );
	return parseDrawingCore( lines, i, drwId );
}

function parseDrawingCore(lines, i, drwId) {
	var frameList = []; //init list of frames
	frameList.push( [] ); //init first frame
	var frameIndex = 0;
	var y = 0;
	while ( y < tilesize ) {
		var l = lines[i+y];
		var row = [];
		for (x = 0; x < tilesize; x++) {
			row.push( parseInt( l.charAt(x) ) );
		}
		frameList[frameIndex].push( row );
		y++;

		if (y === tilesize) {
			i = i + y;
			if ( lines[i] != undefined && lines[i].charAt(0) === ">" ) {
				// start next frame!
				frameList.push( [] );
				frameIndex++;
				//start the count over again for the next frame
				i++;
				y = 0;
			}
		}
	}

	renderer.SetImageSource(drwId, frameList);

	return i;
}

function parseDialog(lines, i) {
	var id = getId(lines[i]);
	i++;

	// TODO : use this for titles & endings too
	var results = scriptInterpreter.ReadDialogScript(lines,i);
	dialog[id] = results.script;
	i = results.index;

	return i;
}

function parseEnding(lines, i) {
	var id = getId(lines[i]);
	i++;
	var text = lines[i];
	i++;
	ending[id] = text;
	return i;
}

function parseVariable(lines, i) {
	var id = getId(lines[i]);
	i++;
	var value = lines[i];
	i++;
	variable[id] = value;
	return i;
}

function parseFontName(lines, i) {
	fontName = getArg(lines[i], 1);
	i++;
	return i;
}

function parseFontData(lines, i) {
	// NOTE : we're not doing the actual parsing here --
	// just grabbing the block of text that represents the font
	// and giving it to the font manager to use later

	var localFontName = getId(lines[i]);
	var localFontData = lines[i];
	i++;

	while (i < lines.length && lines[i] != "") {
		localFontData += "\n" + lines[i];
		i++;
	}

	var localFontFilename = localFontName + fontManager.GetExtension();
	fontManager.AddResource( localFontFilename, localFontData );

	return i;
}

function parseFlag(lines, i) {
	var id = getId(lines[i]);
	var valStr = lines[i].split(" ")[2];
	flags[id] = parseInt( valStr );
	i++;
	return i;
}

function drawTile(img,x,y,context) {
	if (!context) { //optional pass in context; otherwise, use default
		context = ctx;
	}
	context.putImageData(img,x*tilesize*scale,y*tilesize*scale);
}

function drawSprite(img,x,y,context) { //this may differ later (or not haha)
	drawTile(img,x,y,context);
}

function drawItem(img,x,y,context) {
	drawTile(img,x,y,context); //TODO these methods are dumb and repetitive
}

function drawRoom(room,context,frameIndex) { // context & frameIndex are optional
	if (!context) { //optional pass in context; otherwise, use default (ok this is REAL hacky isn't it)
		context = ctx;
	}

	//clear screen
	context.fillStyle = "rgb(" + getPal(curPal())[0][0] + "," + getPal(curPal())[0][1] + "," + getPal(curPal())[0][2] + ")";
	context.fillRect(0,0,canvas.width,canvas.height);

	//draw tiles
	for (i in room.tilemap) {
		for (j in room.tilemap[i]) {
			var id = room.tilemap[i][j];
			if (id != "0") {
				//console.log(id);
				if (tile[id] == null) { // hack-around to avoid corrupting files (not a solution though!)
					id = "0";
					room.tilemap[i][j] = id;
				}
				else {
					// console.log(id);
					drawTile( getTileImage(tile[id],getRoomPal(room.id),frameIndex), j, i, context );
				}
			}
		}
	}

	//draw items
	for (var i = 0; i < room.items.length; i++) {
		var itm = room.items[i];
		drawItem( getItemImage(item[itm.id],getRoomPal(room.id),frameIndex), itm.x, itm.y, context );
	}

	//draw sprites
	for (id in sprite) {
		var spr = sprite[id];
		if (spr.room === room.id) {
			drawSprite( getSpriteImage(spr,getRoomPal(room.id),frameIndex), spr.x, spr.y, context );
		}
	}
}

// TODO : remove these get*Image methods
function getTileImage(t,palId,frameIndex) {
	return renderer.GetImage(t,palId,frameIndex);
}

function getSpriteImage(s,palId,frameIndex) {
	return renderer.GetImage(s,palId,frameIndex);
}

function getItemImage(itm,palId,frameIndex) {
	return renderer.GetImage(itm,palId,frameIndex);
}

function curPal() {
	return getRoomPal(curRoom);
}

function getRoomPal(roomId) {
	if (room[roomId].pal != null) {
		//a specific palette was chosen
		return room[roomId].pal;
	}
	else {
		if (roomId in palette) {
			//there is a palette matching the name of the room
			return roomId;
		}
		else {
			//use the default palette
			return "0";
		}
	}
	return "0";	
}

var isDialogMode = false;
var isNarrating = false;
var isEnding = false;
var dialogModule = new Dialog();
var dialogRenderer = dialogModule.CreateRenderer();
var dialogBuffer = dialogModule.CreateBuffer();
var fontManager = new FontManager();

function onExitDialog() {
	// var breakShit = null;
	// breakShit();
	console.log("EXIT DIALOG");
	isDialogMode = false;
	if (isNarrating) isNarrating = false;
	if (isDialogPreview) {
		isDialogPreview = false;
		if (onDialogPreviewEnd != null)
			onDialogPreviewEnd();
	}
}

/*
TODO
- titles and endings should also take advantage of the script pre-compilation if possible??
- could there be a namespace collision?
- what about dialog NAMEs vs IDs?
- what about a special script block separate from DLG?
*/
function startNarrating(dialogStr,end) {
	console.log("NARRATE " + dialogStr);

	if(end === undefined) end = false;

	isNarrating = true;
	isEnding = end;
	startDialog(dialogStr);
}

function startItemDialog(itemId) {
	var dialogId = item[itemId].dlg;
	// console.log("START ITEM DIALOG " + dialogId);
	if(dialog[dialogId]){
		var dialogStr = dialog[dialogId];
		startDialog(dialogStr,dialogId);
	}
}

function startSpriteDialog(spriteId) {
	var spr = sprite[spriteId];
	var dialogId = spr.dlg ? spr.dlg : spriteId;
	// console.log("START SPRITE DIALOG " + dialogId);
	if(dialog[dialogId]){
		var dialogStr = dialog[dialogId];
		startDialog(dialogStr,dialogId);
	}
}

function startDialog(dialogStr,scriptId) {
	console.log("START DIALOG ");
	console.log(dialogStr);

	if(dialogStr.length <= 0) {
		console.log("ON EXIT DIALOG -- startDialog 1");
		onExitDialog();
		return;
	}

	isDialogMode = true;

	dialogRenderer.Reset();
	dialogRenderer.SetCentered( isNarrating /*centered*/ );
	dialogBuffer.Reset();
	scriptInterpreter.SetDialogBuffer( dialogBuffer );

	var onScriptEnd = function() {
		if(!dialogBuffer.IsActive()){
			console.log("ON EXIT DIALOG -- startDialog 2");
			onExitDialog();
		}
	};

	if(scriptId === undefined) {
		scriptInterpreter.Interpret( dialogStr, onScriptEnd );		
	}
	else {
		if( !scriptInterpreter.HasScript(scriptId) )
			scriptInterpreter.Compile( scriptId, dialogStr );
		scriptInterpreter.Run( scriptId, onScriptEnd );
	}

}

var isDialogPreview = false;
function startPreviewDialog(script, onScriptEnd) {
	isNarrating = true;

	isDialogMode = true;

	isDialogPreview = true;

	dialogRenderer.Reset();
	dialogRenderer.SetCentered( true );
	dialogBuffer.Reset();
	scriptInterpreter.SetDialogBuffer( dialogBuffer );

	onDialogPreviewEnd = onScriptEnd;

	scriptInterpreter.Eval( script, null );
}

/* NEW SCRIPT STUFF */
var scriptModule = new Script();
var scriptInterpreter = scriptModule.CreateInterpreter();
var scriptUtils = scriptModule.CreateUtils(); // TODO: move to editor.js?
// scriptInterpreter.SetDialogBuffer( dialogBuffer );
</script>

<!-- store default font in separate script tag for back compat-->
<script type="bitsyFontData" id="ascii_small">
FONT ascii_small
SIZE 6 8
CHAR 0
000000
000000
000000
000000
000000
000000
000000
000000
CHAR 32
000000
000000
000000
000000
000000
000000
000000
000000
CHAR 33
000100
001110
001110
000100
000100
000000
000100
000000
CHAR 34
011011
011011
010010
000000
000000
000000
000000
000000
CHAR 35
000000
001010
011111
001010
001010
011111
001010
000000
CHAR 36
001000
001110
010000
001100
000010
011100
000100
000000
CHAR 37
011001
011001
000010
000100
001000
010011
010011
000000
CHAR 38
001000
010100
010100
001000
010101
010010
001101
000000
CHAR 39
001100
001100
001000
000000
000000
000000
000000
000000
CHAR 40
000100
001000
001000
001000
001000
001000
000100
000000
CHAR 41
001000
000100
000100
000100
000100
000100
001000
000000
CHAR 42
000000
001010
001110
011111
001110
001010
000000
000000
CHAR 43
000000
000100
000100
011111
000100
000100
000000
000000
CHAR 44
000000
000000
000000
000000
000000
001100
001100
001000
CHAR 45
000000
000000
000000
011111
000000
000000
000000
000000
CHAR 46
000000
000000
000000
000000
000000
001100
001100
000000
CHAR 47
000000
000001
000010
000100
001000
010000
000000
000000
CHAR 48
001110
010001
010011
010101
011001
010001
001110
000000
CHAR 49
000100
001100
000100
000100
000100
000100
001110
000000
CHAR 50
001110
010001
000001
000110
001000
010000
011111
000000
CHAR 51
001110
010001
000001
001110
000001
010001
001110
000000
CHAR 52
000010
000110
001010
010010
011111
000010
000010
000000
CHAR 53
011111
010000
010000
011110
000001
010001
001110
000000
CHAR 54
000110
001000
010000
011110
010001
010001
001110
000000
CHAR 55
011111
000001
000010
000100
001000
001000
001000
000000
CHAR 56
001110
010001
010001
001110
010001
010001
001110
000000
CHAR 57
001110
010001
010001
001111
000001
000010
001100
000000
CHAR 58
000000
000000
001100
001100
000000
001100
001100
000000
CHAR 59
000000
000000
001100
001100
000000
001100
001100
001000
CHAR 60
000010
000100
001000
010000
001000
000100
000010
000000
CHAR 61
000000
000000
011111
000000
000000
011111
000000
000000
CHAR 62
001000
000100
000010
000001
000010
000100
001000
000000
CHAR 63
001110
010001
000001
000110
000100
000000
000100
000000
CHAR 64
001110
010001
010111
010101
010111
010000
001110
000000
CHAR 65
001110
010001
010001
010001
011111
010001
010001
000000
CHAR 66
011110
010001
010001
011110
010001
010001
011110
000000
CHAR 67
001110
010001
010000
010000
010000
010001
001110
000000
CHAR 68
011110
010001
010001
010001
010001
010001
011110
000000
CHAR 69
011111
010000
010000
011110
010000
010000
011111
000000
CHAR 70
011111
010000
010000
011110
010000
010000
010000
000000
CHAR 71
001110
010001
010000
010111
010001
010001
001111
000000
CHAR 72
010001
010001
010001
011111
010001
010001
010001
000000
CHAR 73
001110
000100
000100
000100
000100
000100
001110
000000
CHAR 74
000001
000001
000001
000001
010001
010001
001110
000000
CHAR 75
010001
010010
010100
011000
010100
010010
010001
000000
CHAR 76
010000
010000
010000
010000
010000
010000
011111
000000
CHAR 77
010001
011011
010101
010001
010001
010001
010001
000000
CHAR 78
010001
011001
010101
010011
010001
010001
010001
000000
CHAR 79
001110
010001
010001
010001
010001
010001
001110
000000
CHAR 80
011110
010001
010001
011110
010000
010000
010000
000000
CHAR 81
001110
010001
010001
010001
010101
010010
001101
000000
CHAR 82
011110
010001
010001
011110
010010
010001
010001
000000
CHAR 83
001110
010001
010000
001110
000001
010001
001110
000000
CHAR 84
011111
000100
000100
000100
000100
000100
000100
000000
CHAR 85
010001
010001
010001
010001
010001
010001
001110
000000
CHAR 86
010001
010001
010001
010001
010001
001010
000100
000000
CHAR 87
010001
010001
010101
010101
010101
010101
001010
000000
CHAR 88
010001
010001
001010
000100
001010
010001
010001
000000
CHAR 89
010001
010001
010001
001010
000100
000100
000100
000000
CHAR 90
011110
000010
000100
001000
010000
010000
011110
000000
CHAR 91
001110
001000
001000
001000
001000
001000
001110
000000
CHAR 92
000000
010000
001000
000100
000010
000001
000000
000000
CHAR 93
001110
000010
000010
000010
000010
000010
001110
000000
CHAR 94
000100
001010
010001
000000
000000
000000
000000
000000
CHAR 95
000000
000000
000000
000000
000000
000000
000000
111111
CHAR 96
001100
001100
000100
000000
000000
000000
000000
000000
CHAR 97
000000
000000
001110
000001
001111
010001
001111
000000
CHAR 98
010000
010000
011110
010001
010001
010001
011110
000000
CHAR 99
000000
000000
001110
010001
010000
010001
001110
000000
CHAR 100
000001
000001
001111
010001
010001
010001
001111
000000
CHAR 101
000000
000000
001110
010001
011110
010000
001110
000000
CHAR 102
000110
001000
001000
011110
001000
001000
001000
000000
CHAR 103
000000
000000
001111
010001
010001
001111
000001
001110
CHAR 104
010000
010000
011100
010010
010010
010010
010010
000000
CHAR 105
000100
000000
000100
000100
000100
000100
000110
000000
CHAR 106
000010
000000
000110
000010
000010
000010
010010
001100
CHAR 107
010000
010000
010010
010100
011000
010100
010010
000000
CHAR 108
000100
000100
000100
000100
000100
000100
000110
000000
CHAR 109
000000
000000
011010
010101
010101
010001
010001
000000
CHAR 110
000000
000000
011100
010010
010010
010010
010010
000000
CHAR 111
000000
000000
001110
010001
010001
010001
001110
000000
CHAR 112
000000
000000
011110
010001
010001
010001
011110
010000
CHAR 113
000000
000000
001111
010001
010001
010001
001111
000001
CHAR 114
000000
000000
010110
001001
001000
001000
011100
000000
CHAR 115
000000
000000
001110
010000
001110
000001
001110
000000
CHAR 116
000000
001000
011110
001000
001000
001010
000100
000000
CHAR 117
000000
000000
010010
010010
010010
010110
001010
000000
CHAR 118
000000
000000
010001
010001
010001
001010
000100
000000
CHAR 119
000000
000000
010001
010001
010101
011111
001010
000000
CHAR 120
000000
000000
010010
010010
001100
010010
010010
000000
CHAR 121
000000
000000
010010
010010
010010
001110
000100
011000
CHAR 122
000000
000000
011110
000010
001100
010000
011110
000000
CHAR 123
000110
001000
001000
011000
001000
001000
000110
000000
CHAR 124
000100
000100
000100
000100
000100
000100
000100
000100
CHAR 125
001100
000010
000010
000011
000010
000010
001100
000000
CHAR 126
000000
000000
000000
001010
010100
000000
000000
000000
CHAR 160
000000
000000
000000
000000
000000
000000
000000
000000
CHAR 161
000100
000000
000100
000100
001110
001110
000100
000000
CHAR 162
000000
000100
001110
010000
010000
001110
000100
000000
CHAR 163
000110
001001
001000
011110
001000
001001
010111
000000
CHAR 165
010001
001010
000100
011111
000100
011111
000100
000000
CHAR 167
001110
010001
001100
001010
000110
010001
001110
000000
CHAR 171
000000
000000
001001
010010
001001
000000
000000
000000
CHAR 172
000000
000000
111111
000001
000001
000000
000000
000000
CHAR 177
000000
000100
001110
000100
000000
001110
000000
000000
CHAR 178
011000
000100
001000
011100
000000
000000
000000
000000
CHAR 181
000000
000000
010010
010010
010010
011100
010000
010000
CHAR 182
001111
010101
010101
001101
000101
000101
000101
000000
CHAR 187
000000
000000
010010
001001
010010
000000
000000
000000
CHAR 188
010000
010010
010100
001011
010101
000111
000001
000000
CHAR 189
010000
010010
010100
001110
010001
000010
000111
000000
CHAR 191
000100
000000
000100
001100
010000
010001
001110
000000
CHAR 196
001010
000000
000100
001010
010001
011111
010001
000000
CHAR 197
001110
001010
001110
011011
010001
011111
010001
000000
CHAR 198
001111
010100
010100
011111
010100
010100
010111
000000
CHAR 199
001110
010001
010000
010000
010001
001110
000100
001100
CHAR 201
000011
000000
011111
010000
011110
010000
011111
000000
CHAR 209
001010
010100
000000
010010
011010
010110
010010
000000
CHAR 214
010010
001100
010010
010010
010010
010010
001100
000000
CHAR 220
001010
000000
010010
010010
010010
010010
001100
000000
CHAR 223
000000
011100
010010
011100
010010
010010
011100
010000
CHAR 224
001100
000000
001110
000001
001111
010001
001111
000000
CHAR 225
000110
000000
001110
000001
001111
010001
001111
000000
CHAR 226
001110
000000
001110
000001
001111
010001
001111
000000
CHAR 228
001010
000000
001110
000001
001111
010001
001111
000000
CHAR 229
001110
001010
001110
000001
001111
010001
001111
000000
CHAR 230
000000
000000
011110
000101
011111
010100
001111
000000
CHAR 231
000000
001110
010001
010000
010001
001110
000100
001100
CHAR 232
001100
000000
001110
010001
011110
010000
001110
000000
CHAR 233
000011
000000
001110
010001
011110
010000
001110
000000
CHAR 234
001110
000000
001110
010001
011110
010000
001110
000000
CHAR 235
001010
000000
001110
010001
011110
010000
001110
000000
CHAR 236
001000
000000
000100
000100
000100
000100
000110
000000
CHAR 237
000110
000000
000100
000100
000100
000100
000110
000000
CHAR 238
000100
001010
000000
000100
000100
000100
000110
000000
CHAR 239
001010
000000
000100
000100
000100
000100
000110
000000
CHAR 241
001010
010100
000000
011100
010010
010010
010010
000000
CHAR 242
011000
000000
001100
010010
010010
010010
001100
000000
CHAR 243
000110
000000
001100
010010
010010
010010
001100
000000
CHAR 244
001110
000000
001100
010010
010010
010010
001100
000000
CHAR 246
001010
000000
001100
010010
010010
010010
001100
000000
CHAR 247
001010
000000
001110
010001
010001
010001
001110
000000
CHAR 249
011000
000000
010010
010010
010010
010110
001010
000000
CHAR 250
000110
000000
010010
010010
010010
010110
001010
000000
CHAR 251
001110
000000
010010
010010
010010
010110
001010
000000
CHAR 252
010010
000000
010010
010010
010010
010110
001010
000000
CHAR 255
001010
000000
010010
010010
010010
001110
000100
011000
CHAR 402
000010
000101
000100
001110
000100
000100
010100
001000
CHAR 915
011110
010010
010000
010000
010000
010000
010000
000000
CHAR 920
001100
010010
010010
011110
010010
010010
001100
000000
CHAR 931
011111
010000
001000
000100
001000
010000
011111
000000
CHAR 934
001110
000100
001110
010001
001110
000100
001110
000000
CHAR 937
000000
001110
010001
010001
001010
001010
011011
000000
CHAR 948
001100
010000
001000
000100
001110
010010
001100
000000
CHAR 949
000000
001110
010000
011110
010000
001110
000000
000000
CHAR 960
000000
011111
001010
001010
001010
001010
001010
000000
CHAR 963
000000
000000
001111
010010
010010
001100
000000
000000
CHAR 964
000000
000000
001010
010100
000100
000100
000100
000000
CHAR 966
000000
000100
001110
010101
010101
001110
000100
000000
CHAR 8226
000000
000000
000000
001100
001100
000000
000000
000000
CHAR 8252
001010
001010
001010
001010
001010
000000
001010
000000
CHAR 8592
000000
000100
001100
011111
001100
000100
000000
000000
CHAR 8593
000100
001110
011111
000100
000100
000100
000100
000000
CHAR 8594
000000
000100
000110
011111
000110
000100
000000
000000
CHAR 8595
000100
000100
000100
000100
011111
001110
000100
000000
CHAR 8734
000000
000000
001010
010101
010101
001010
000000
000000
CHAR 8735
000000
000000
000000
010000
010000
010000
011111
000000
CHAR 8801
000000
011110
000000
011110
000000
011110
000000
000000
CHAR 8804
000010
001100
010000
001100
000010
000000
011110
000000
CHAR 8805
010000
001100
000010
001100
010000
000000
011110
000000
CHAR 8962
000100
001110
011011
010001
010001
011111
000000
000000
CHAR 8976
000000
000000
011111
010000
010000
010000
000000
000000
CHAR 9472
000000
000000
000000
111111
000000
000000
000000
000000
CHAR 9474
000100
000100
000100
000100
000100
000100
000100
000100
CHAR 9488
000000
000000
000000
111100
000100
000100
000100
000100
CHAR 9492
000100
000100
000100
000111
000000
000000
000000
000000
CHAR 9500
000100
000100
000100
000111
000100
000100
000100
000100
CHAR 9508
000100
000100
000100
111100
000100
000100
000100
000100
CHAR 9516
000000
000000
000000
111111
000100
000100
000100
000100
CHAR 9524
000100
000100
000100
111111
000000
000000
000000
000000
CHAR 9532
000100
000100
000100
111111
000100
000100
000100
000100
CHAR 9552
000000
111111
000000
111111
000000
000000
000000
000000
CHAR 9553
010100
010100
010100
010100
010100
010100
010100
010100
CHAR 9556
000000
011111
010000
010111
010100
010100
010100
010100
CHAR 9557
000000
111100
000100
111100
000100
000100
000100
000100
CHAR 9558
000000
000000
000000
111100
010100
010100
010100
010100
CHAR 9559
000000
111100
000100
110100
010100
010100
010100
010100
CHAR 9561
010100
010100
010100
011111
000000
000000
000000
000000
CHAR 9562
010100
010111
010000
011111
000000
000000
000000
000000
CHAR 9563
000100
111100
000100
111100
000000
000000
000000
000000
CHAR 9564
010100
010100
010100
111100
000000
000000
000000
000000
CHAR 9565
010100
110100
000100
111100
000000
000000
000000
000000
CHAR 9566
000100
000111
000100
000111
000100
000100
000100
000100
CHAR 9567
010100
010100
010100
010111
010100
010100
010100
010100
CHAR 9568
010100
010111
010000
010111
010100
010100
010100
010100
CHAR 9569
000000
000000
010010
010010
010010
011100
010000
010000
CHAR 9570
010100
010100
010100
110100
010100
010100
010100
010100
CHAR 9571
010100
110100
000100
110100
010100
010100
010100
010100
CHAR 9572
000000
111111
000000
111111
000100
000100
000100
000100
CHAR 9573
000000
000000
000000
111111
010100
010100
010100
010100
CHAR 9574
000000
111111
000000
110111
010100
010100
010100
010100
CHAR 9575
000100
111111
000000
111111
000000
000000
000000
000000
CHAR 9576
010100
010100
010100
111111
000000
000000
000000
000000
CHAR 9577
010100
110111
000000
111111
000000
000000
000000
000000
CHAR 9580
010100
110111
000000
110111
010100
010100
010100
010100
CHAR 9601
000000
000000
000000
000000
000000
000000
000000
111111
CHAR 9602
000000
000000
000000
000000
000000
000000
111111
111111
CHAR 9603
000000
000000
000000
000000
000000
111111
111111
111111
CHAR 9604
000000
000000
000000
000000
111111
111111
111111
111111
CHAR 9605
000000
000000
000000
111111
111111
111111
111111
111111
CHAR 9606
000000
000000
111111
111111
111111
111111
111111
111111
CHAR 9607
000000
111111
111111
111111
111111
111111
111111
111111
CHAR 9608
111111
111111
111111
111111
111111
111111
111111
111111
CHAR 9609
111100
111100
111100
111100
111100
111100
111100
111100
CHAR 9610
111100
111100
111100
111100
111100
111100
111100
111100
CHAR 9611
111000
111000
111000
111000
111000
111000
111000
111000
CHAR 9613
110000
110000
110000
110000
110000
110000
110000
110000
CHAR 9615
100000
100000
100000
100000
100000
100000
100000
100000
CHAR 9617
010101
000000
101010
000000
010101
000000
101010
000000
CHAR 9618
010101
101010
010101
101010
010101
101010
010101
101010
CHAR 9619
101010
111111
010101
111111
101010
111111
010101
111111
CHAR 9644
000000
000000
000000
000000
000000
011110
011110
000000
CHAR 9650
000100
000100
001110
001110
011111
011111
000000
000000
CHAR 9658
001000
001100
001110
001111
001110
001100
001000
000000
CHAR 9660
011111
011111
001110
001110
000100
000100
000000
000000
CHAR 9668
000010
000110
001110
011110
001110
000110
000010
000000
CHAR 9675
000000
000000
011110
010010
010010
011110
000000
000000
CHAR 9688
111111
111111
111111
110011
110011
111111
111111
111111
CHAR 9689
111111
111111
100001
101101
101101
100001
111111
111111
CHAR 9786
001110
010001
011011
010001
010101
010001
001110
000000
CHAR 9787
001110
011111
010101
011111
010001
011111
001110
000000
CHAR 9788
000000
010101
001110
011011
001110
010101
000000
000000
CHAR 9792
001110
010001
010001
001110
000100
001110
000100
000000
CHAR 9794
000000
000111
000011
001101
010010
010010
001100
000000
CHAR 9824
000000
000100
001110
011111
011111
000100
001110
000000
CHAR 9827
000100
001110
001110
000100
011111
011111
000100
000000
CHAR 9829
000000
001010
011111
011111
011111
001110
000100
000000
CHAR 9830
000000
000100
001110
011111
011111
001110
000100
000000
CHAR 9834
000100
000110
000101
000100
001100
011100
011000
000000
CHAR 9835
000011
001101
001011
001101
001011
011011
011000
000000
</script>

<!-- BORKSY HACKS -->
<script type="text/javascript" id="borksyHacks">
//borksy uses dist versions of hacks from the bitsy hacks repo now

/**
☕
@file javascript dialog
@summary execute arbitrary javascript from dialog
@license MIT
@version 3.1.2
@requires Bitsy Version: 4.5, 4.6
@author Sean S. LeBlanc

@description
Lets you execute arbitrary JavaScript from dialog (including inside conditionals).
If you're familiar with the Bitsy source, this will let you write one-shot hacks
for a wide variety of situations.

Usage:
	(js "<JavaScript code to evaluate after dialog is closed>")
	(jsNow "<JavaScript code to evaluate immediately>")

Examples:
	move a sprite:
	(js "sprite['a'].x = 10;")
	edit palette colour:
	(js "getPal(curPal())[0] = [255,0,0];renderImages();")
	place an item next to player:
	(js "room[curRoom].items.push({id:'0',x:player().x+1,y:player().y});")
	verbose facimile of exit-from-dialog:
	(js "var _onExitDialog=onExitDialog;onExitDialog=function(){player().room=curRoom='3';_onExitDialog.apply(this,arguments);onExitDialog=_onExitDialog;};")

HOW TO USE:
1. Copy-paste into a script tag after the bitsy source
2. Add (js "<code>") to your dialog as needed

NOTE: This uses parentheses "()" instead of curly braces "{}" around function
      calls because the Bitsy editor's fancy dialog window strips unrecognized
      curly-brace functions from dialog text. To keep from losing data, write
      these function calls with parentheses like the examples above.

      For full editor integration, you'd *probably* also need to paste this
      code at the end of the editor's `bitsy.js` file. Untested.
*/
(function (bitsy) {
'use strict';

bitsy = bitsy && bitsy.hasOwnProperty('default') ? bitsy['default'] : bitsy;

/**
@file utils
@summary miscellaneous bitsy utilities
@author Sean S. LeBlanc
*/

/*
Helper used to replace code in a script tag based on a search regex
To inject code without erasing original string, using capturing groups; e.g.
	inject(/(some string)/,'injected before $1 injected after')
*/
function inject(searchRegex, replaceString) {
	// find the relevant script tag
	var scriptTags = document.getElementsByTagName('script');
	var scriptTag;
	var code;
	for (var i = 0; i < scriptTags.length; ++i) {
		scriptTag = scriptTags[i];
		var matchesSearch = scriptTag.textContent.search(searchRegex) !== -1;
		var isCurrentScript = scriptTag === document.currentScript;
		if (matchesSearch && !isCurrentScript) {
			code = scriptTag.textContent;
			break;
		}
	}

	// error-handling
	if (!code) {
		throw 'Couldn\'t find "' + searchRegex + '" in script tags';
	}

	// modify the content
	code = code.replace(searchRegex, replaceString);

	// replace the old script tag with a new one using our modified code
	var newScriptTag = document.createElement('script');
	newScriptTag.textContent = code;
	scriptTag.insertAdjacentElement('afterend', newScriptTag);
	scriptTag.remove();
}

/**
 * Helper for getting an array with unique elements 
 * @param  {Array} array Original array
 * @return {Array}       Copy of array, excluding duplicates
 */
function unique(array) {
	return array.filter(function (item, idx) {
		return array.indexOf(item) === idx;
	});
}

/**

@file kitsy-script-toolkit
@summary makes it easier and cleaner to run code before and after Bitsy functions or to inject new code into Bitsy script tags
@license WTFPL (do WTF you want)
@version 3.2.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
HOW TO USE:
  import {before, after, inject, addDialogTag, addDeferredDialogTag} from "./helpers/kitsy-script-toolkit";

  before(targetFuncName, beforeFn);
  after(targetFuncName, afterFn);
  inject(searchRegex, replaceString);
  addDialogTag(tagName, dialogFn);
  addDeferredDialogTag(tagName, dialogFn);

  For more info, see the documentation at:
  https://github.com/seleb/bitsy-hacks/wiki/Coding-with-kitsy
*/


// Ex: inject(/(names.sprite.set\( name, id \);)/, '$1console.dir(names)');
function inject$1(searchRegex, replaceString) {
	var kitsy = kitsyInit();
	kitsy.queuedInjectScripts.push({
		searchRegex: searchRegex,
		replaceString: replaceString
	});
}

// Ex: before('load_game', function run() { alert('Loading!'); });
//     before('show_text', function run(text) { return text.toUpperCase(); });
//     before('show_text', function run(text, done) { done(text.toUpperCase()); });
function before(targetFuncName, beforeFn) {
	var kitsy = kitsyInit();
	kitsy.queuedBeforeScripts[targetFuncName] = kitsy.queuedBeforeScripts[targetFuncName] || [];
	kitsy.queuedBeforeScripts[targetFuncName].push(beforeFn);
}

// Ex: after('load_game', function run() { alert('Loaded!'); });
function after(targetFuncName, afterFn) {
	var kitsy = kitsyInit();
	kitsy.queuedAfterScripts[targetFuncName] = kitsy.queuedAfterScripts[targetFuncName] || [];
	kitsy.queuedAfterScripts[targetFuncName].push(afterFn);
}

function kitsyInit() {
	// return already-initialized kitsy
	if (bitsy.kitsy) {
		return bitsy.kitsy;
	}

	// Initialize kitsy
	bitsy.kitsy = {
		queuedInjectScripts: [],
		queuedBeforeScripts: {},
		queuedAfterScripts: {}
	};

	var oldStartFunc = bitsy.startExportedGame;
	bitsy.startExportedGame = function doAllInjections() {
		// Only do this once.
		bitsy.startExportedGame = oldStartFunc;

		// Rewrite scripts and hook everything up.
		doInjects();
		applyAllHooks();

		// Start the game
		bitsy.startExportedGame.apply(this, arguments);
	};

	return bitsy.kitsy;
}


function doInjects() {
	bitsy.kitsy.queuedInjectScripts.forEach(function (injectScript) {
		inject(injectScript.searchRegex, injectScript.replaceString);
	});
	_reinitEngine();
}

function applyAllHooks() {
	var allHooks = unique(Object.keys(bitsy.kitsy.queuedBeforeScripts).concat(Object.keys(bitsy.kitsy.queuedAfterScripts)));
	allHooks.forEach(applyHook);
}

function applyHook(functionName) {
	var superFn = bitsy[functionName];
	var superFnLength = superFn ? superFn.length : 0;
	var functions = [];
	// start with befores
	functions = functions.concat(bitsy.kitsy.queuedBeforeScripts[functionName] || []);
	// then original
	if (superFn) {
		functions.push(superFn);
	}
	// then afters
	functions = functions.concat(bitsy.kitsy.queuedAfterScripts[functionName] || []);

	// overwrite original with one which will call each in order
	bitsy[functionName] = function () {
		var args = [].slice.call(arguments);
		var i = 0;
		runBefore.apply(this, arguments);

		// Iterate thru sync & async functions. Run each, finally run original.
		function runBefore() {
			// All outta functions? Finish
			if (i === functions.length) {
				return;
			}

			// Update args if provided.
			if (arguments.length > 0) {
				args = [].slice.call(arguments);
			}

			if (functions[i].length > superFnLength) {
				// Assume funcs that accept more args than the original are
				// async and accept a callback as an additional argument.
				functions[i++].apply(this, args.concat(runBefore.bind(this)));
			} else {
				// run synchronously
				var newArgs = functions[i++].apply(this, args);
				newArgs = newArgs && newArgs.length ? newArgs : args;
				runBefore.apply(this, newArgs);
			}
		}
	};
}

function _reinitEngine() {
	// recreate the script and dialog objects so that they'll be
	// referencing the code with injections instead of the original
	bitsy.scriptModule = new bitsy.Script();
	bitsy.scriptInterpreter = bitsy.scriptModule.CreateInterpreter();

	bitsy.dialogModule = new bitsy.Dialog();
	bitsy.dialogRenderer = bitsy.dialogModule.CreateRenderer();
	bitsy.dialogBuffer = bitsy.dialogModule.CreateBuffer();
}

// Rewrite custom functions' parentheses to curly braces for Bitsy's
// interpreter. Unescape escaped parentheticals, too.
function convertDialogTags(input, tag) {
	return input
		.replace(new RegExp('\\\\?\\((' + tag + '(\\s+(".+?"|.+?))?)\\\\?\\)', 'g'), function(match, group){
			if(match.substr(0,1) === '\\') {
				return '('+ group + ')'; // Rewrite \(tag "..."|...\) to (tag "..."|...)
			}
			return '{'+ group + '}'; // Rewrite (tag "..."|...) to {tag "..."|...}
		});
}


function addDialogFunction(tag, fn) {
	var kitsy = kitsyInit();
	kitsy.dialogFunctions = kitsy.dialogFunctions || {};
	if (kitsy.dialogFunctions[tag]) {
		throw new Error('The dialog function "' + tag + '" already exists.');
	}

	// Hook into game load and rewrite custom functions in game data to Bitsy format.
	before('parseWorld', function (game_data) {
		return [convertDialogTags(game_data, tag)];
	});

	kitsy.dialogFunctions[tag] = fn;
}

/**
 * Adds a custom dialog tag which executes the provided function.
 * For ease-of-use with the bitsy editor, tags can be written as
 * (tagname "parameters") in addition to the standard {tagname "parameters"}
 * 
 * Function is executed immediately when the tag is reached.
 *
 * @param {string}   tag Name of tag
 * @param {Function} fn  Function to execute, with signature `function(environment, parameters, onReturn){}`
 *                       environment: provides access to SetVariable/GetVariable (among other things, see Environment in the bitsy source for more info)
 *                       parameters: array containing parameters as string in first element (i.e. `parameters[0]`)
 *                       onReturn: function to call with return value (just call `onReturn(null);` at the end of your function if your tag doesn't interact with the logic system)
 */
function addDialogTag(tag, fn) {
	addDialogFunction(tag, fn);
	inject$1(
		/(var functionMap = new Map\(\);)/,
		'$1functionMap.set("' + tag + '", kitsy.dialogFunctions.' + tag + ');'
	);
}

/**
 * Adds a custom dialog tag which executes the provided function.
 * For ease-of-use with the bitsy editor, tags can be written as
 * (tagname "parameters") in addition to the standard {tagname "parameters"}
 * 
 * Function is executed after the dialog box.
 *
 * @param {string}   tag Name of tag
 * @param {Function} fn  Function to execute, with signature `function(environment, parameters){}`
 *                       environment: provides access to SetVariable/GetVariable (among other things, see Environment in the bitsy source for more info)
 *                       parameters: array containing parameters as string in first element (i.e. `parameters[0]`)
 */
function addDeferredDialogTag(tag, fn) {
	addDialogFunction(tag, fn);
	bitsy.kitsy.deferredDialogFunctions = bitsy.kitsy.deferredDialogFunctions || {};
	var deferred = bitsy.kitsy.deferredDialogFunctions[tag] = [];
	inject$1(
		/(var functionMap = new Map\(\);)/,
		'$1functionMap.set("' + tag + '", function(e, p, o){ kitsy.deferredDialogFunctions.' + tag + '.push({e:e,p:p}); o(null); });'
	);
	// Hook into the dialog finish event and execute the actual function
	after('onExitDialog', function () {
		while (deferred.length) {
			var args = deferred.shift();
			bitsy.kitsy.dialogFunctions[tag](args.e, args.p, args.o);
		}
	});
	// Hook into the game reset and make sure data gets cleared
	after('clearGameData', function () {
		deferred.length = 0;
	});
}



var indirectEval$1 = eval;

function executeJs(environment, parameters, onReturn) {
	indirectEval$1(parameters[0]);
	if (onReturn) {
		onReturn(null);
	}
}

addDeferredDialogTag('js', executeJs);
addDialogTag('jsNow', executeJs);

}(window));

/**
⏳
@file permanent items
@summary prevent some items from being picked up
@license MIT
@version 2.0.2
@author Sean S. LeBlanc

@description
Prevents certain items from being picked up, but allows them to be walked over and triggers their dialog.

HOW TO USE:
1. Copy-paste this script into a script tag after the bitsy source
2. Update the `itemIsPermanent` function below to match your needs
*/
(function (bitsy) {
'use strict';
var hackOptions = {
itemIsPermanent: function (item) {
  // specific permanent item
  //return item.name == 'tea';

  // specific permanent item list
  //return ['tea', 'flower', 'hat'].indexOf(item.name) !== -1;

  // permanent item flag in name
  return item.name.indexOf('PERMANENT') !== -1;
  
  // all items are permanent
  //return true;
}
};

bitsy = bitsy && bitsy.hasOwnProperty('default') ? bitsy['default'] : bitsy;

/**
@file utils
@summary miscellaneous bitsy utilities
@author Sean S. LeBlanc
*/

/*
Helper used to replace code in a script tag based on a search regex
To inject code without erasing original string, using capturing groups; e.g.
	inject(/(some string)/,'injected before $1 injected after')
*/
function inject(searchRegex, replaceString) {
	// find the relevant script tag
	var scriptTags = document.getElementsByTagName('script');
	var scriptTag;
	var code;
	for (var i = 0; i < scriptTags.length; ++i) {
		scriptTag = scriptTags[i];
		var matchesSearch = scriptTag.textContent.search(searchRegex) !== -1;
		var isCurrentScript = scriptTag === document.currentScript;
		if (matchesSearch && !isCurrentScript) {
			code = scriptTag.textContent;
			break;
		}
	}

	// error-handling
	if (!code) {
		throw 'Couldn\'t find "' + searchRegex + '" in script tags';
	}

	// modify the content
	code = code.replace(searchRegex, replaceString);

	// replace the old script tag with a new one using our modified code
	var newScriptTag = document.createElement('script');
	newScriptTag.textContent = code;
	scriptTag.insertAdjacentElement('afterend', newScriptTag);
	scriptTag.remove();
}

/**
 * Helper for getting an array with unique elements 
 * @param  {Array} array Original array
 * @return {Array}       Copy of array, excluding duplicates
 */
function unique(array) {
	return array.filter(function (item, idx) {
		return array.indexOf(item) === idx;
	});
}

/**

@file kitsy-script-toolkit
@summary makes it easier and cleaner to run code before and after Bitsy functions or to inject new code into Bitsy script tags
@license WTFPL (do WTF you want)
@version 3.2.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
HOW TO USE:
  import {before, after, inject, addDialogTag, addDeferredDialogTag} from "./helpers/kitsy-script-toolkit";

  before(targetFuncName, beforeFn);
  after(targetFuncName, afterFn);
  inject(searchRegex, replaceString);
  addDialogTag(tagName, dialogFn);
  addDeferredDialogTag(tagName, dialogFn);

  For more info, see the documentation at:
  https://github.com/seleb/bitsy-hacks/wiki/Coding-with-kitsy
*/

// Ex: before('load_game', function run() { alert('Loading!'); });
//     before('show_text', function run(text) { return text.toUpperCase(); });
//     before('show_text', function run(text, done) { done(text.toUpperCase()); });
function before(targetFuncName, beforeFn) {
	var kitsy = kitsyInit();
	kitsy.queuedBeforeScripts[targetFuncName] = kitsy.queuedBeforeScripts[targetFuncName] || [];
	kitsy.queuedBeforeScripts[targetFuncName].push(beforeFn);
}

// Ex: after('load_game', function run() { alert('Loaded!'); });
function after(targetFuncName, afterFn) {
	var kitsy = kitsyInit();
	kitsy.queuedAfterScripts[targetFuncName] = kitsy.queuedAfterScripts[targetFuncName] || [];
	kitsy.queuedAfterScripts[targetFuncName].push(afterFn);
}

function kitsyInit() {
	// return already-initialized kitsy
	if (bitsy.kitsy) {
		return bitsy.kitsy;
	}

	// Initialize kitsy
	bitsy.kitsy = {
		queuedInjectScripts: [],
		queuedBeforeScripts: {},
		queuedAfterScripts: {}
	};

	var oldStartFunc = bitsy.startExportedGame;
	bitsy.startExportedGame = function doAllInjections() {
		// Only do this once.
		bitsy.startExportedGame = oldStartFunc;

		// Rewrite scripts and hook everything up.
		doInjects();
		applyAllHooks();

		// Start the game
		bitsy.startExportedGame.apply(this, arguments);
	};

	return bitsy.kitsy;
}


function doInjects() {
	bitsy.kitsy.queuedInjectScripts.forEach(function (injectScript) {
		inject(injectScript.searchRegex, injectScript.replaceString);
	});
	_reinitEngine();
}

function applyAllHooks() {
	var allHooks = unique(Object.keys(bitsy.kitsy.queuedBeforeScripts).concat(Object.keys(bitsy.kitsy.queuedAfterScripts)));
	allHooks.forEach(applyHook);
}

function applyHook(functionName) {
	var superFn = bitsy[functionName];
	var superFnLength = superFn ? superFn.length : 0;
	var functions = [];
	// start with befores
	functions = functions.concat(bitsy.kitsy.queuedBeforeScripts[functionName] || []);
	// then original
	if (superFn) {
		functions.push(superFn);
	}
	// then afters
	functions = functions.concat(bitsy.kitsy.queuedAfterScripts[functionName] || []);

	// overwrite original with one which will call each in order
	bitsy[functionName] = function () {
		var args = [].slice.call(arguments);
		var i = 0;
		runBefore.apply(this, arguments);

		// Iterate thru sync & async functions. Run each, finally run original.
		function runBefore() {
			// All outta functions? Finish
			if (i === functions.length) {
				return;
			}

			// Update args if provided.
			if (arguments.length > 0) {
				args = [].slice.call(arguments);
			}

			if (functions[i].length > superFnLength) {
				// Assume funcs that accept more args than the original are
				// async and accept a callback as an additional argument.
				functions[i++].apply(this, args.concat(runBefore.bind(this)));
			} else {
				// run synchronously
				var newArgs = functions[i++].apply(this, args);
				newArgs = newArgs && newArgs.length ? newArgs : args;
				runBefore.apply(this, newArgs);
			}
		}
	};
}

function _reinitEngine() {
	// recreate the script and dialog objects so that they'll be
	// referencing the code with injections instead of the original
	bitsy.scriptModule = new bitsy.Script();
	bitsy.scriptInterpreter = bitsy.scriptModule.CreateInterpreter();

	bitsy.dialogModule = new bitsy.Dialog();
	bitsy.dialogRenderer = bitsy.dialogModule.CreateRenderer();
	bitsy.dialogBuffer = bitsy.dialogModule.CreateBuffer();
}





var room;
var oldItems;
before("movePlayer", function () {
	room = bitsy.room[bitsy.curRoom];
	oldItems = room.items.slice();
});
after("movePlayer", function () {
	var newItems = room.items;
	if (newItems.length === oldItems.length) {
		return; // nothing changed
	}

	// check for changes
	for (var i = 0; i < oldItems.length; ++i) {
		if (!newItems[i] ||
			oldItems[i].x !== newItems[i].x ||
			oldItems[i].y !== newItems[i].y ||
			oldItems[i].id !== newItems[i].id
		) {
			// something changed
			if (hackOptions.itemIsPermanent(bitsy.item[oldItems[i].id])) {
				// put that back!
				newItems.splice(i, 0, oldItems[i]);
			} else {
				// add an empty entry for now to keep the arrays aligned
				newItems.splice(i, 0, null);
			}
		}
	}
	// clear out those empty entries
	room.items = newItems.filter(function (item) {
		return !!item;
	});
});

}(window));

/**
🚪
@file exit-from-dialog
@summary exit to another room from dialog, including conditionals
@license WTFPL (do WTF you want)
@version 5.1.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
Lets you exit to another room from dialog (including inside conditionals). Use
it to make an invisible sprite that acts as a conditional exit, use it to warp
somewhere after a conversation, use it to put a guard at your gate who only
lets you in once you're disguised, use it to require payment before the
ferryman will take you across the river.

Using the (exit) function in any part of a series of dialog will make the
game exit to the new room after the dialog is finished. Using (exitNow) will
immediately warp to the new room, but the current dialog will continue.

WARNING: In exit coordinates, the TOP LEFT tile is (0,0). In sprite coordinates,
         the BOTTOM LEFT tile is (0,0). If you'd like to use sprite coordinates,
         add the word "sprite" as the fourth parameter to the exit function.

Usage: (exit "<room name>,<x>,<y>")
       (exit "<room name>,<x>,<y>,sprite")
       (exitNow "<room name>,<x>,<y>")
       (exitNow "<room name>,<x>,<y>,sprite")

Example: (exit "FinalRoom,8,4")
         (exitNow "FinalRoom,8,11,sprite")

HOW TO USE:
  1. Copy-paste this script into a new script tag after the Bitsy source code.
     It should appear *before* any other mods that handle loading your game
     data so it executes *after* them (last-in first-out).

NOTE: This uses parentheses "()" instead of curly braces "{}" around function
      calls because the Bitsy editor's fancy dialog window strips unrecognized
      curly-brace functions from dialog text. To keep from losing data, write
      these function calls with parentheses like the examples above.

      For full editor integration, you'd *probably* also need to paste this
      code at the end of the editor's `bitsy.js` file. Untested.
*/
(function (bitsy) {
'use strict';

bitsy = bitsy && bitsy.hasOwnProperty('default') ? bitsy['default'] : bitsy;

/**
@file utils
@summary miscellaneous bitsy utilities
@author Sean S. LeBlanc
*/

/*
Helper used to replace code in a script tag based on a search regex
To inject code without erasing original string, using capturing groups; e.g.
	inject(/(some string)/,'injected before $1 injected after')
*/
function inject(searchRegex, replaceString) {
	// find the relevant script tag
	var scriptTags = document.getElementsByTagName('script');
	var scriptTag;
	var code;
	for (var i = 0; i < scriptTags.length; ++i) {
		scriptTag = scriptTags[i];
		var matchesSearch = scriptTag.textContent.search(searchRegex) !== -1;
		var isCurrentScript = scriptTag === document.currentScript;
		if (matchesSearch && !isCurrentScript) {
			code = scriptTag.textContent;
			break;
		}
	}

	// error-handling
	if (!code) {
		throw 'Couldn\'t find "' + searchRegex + '" in script tags';
	}

	// modify the content
	code = code.replace(searchRegex, replaceString);

	// replace the old script tag with a new one using our modified code
	var newScriptTag = document.createElement('script');
	newScriptTag.textContent = code;
	scriptTag.insertAdjacentElement('afterend', newScriptTag);
	scriptTag.remove();
}

/**
 * Helper for getting room by name or id
 * @param {string} name id or name of room to return
 * @return {string} room, or undefined if it doesn't exist
 */
function getRoom(name) {
	var id = bitsy.room.hasOwnProperty(name) ? name : bitsy.names.room.get(name);
	return bitsy.room[id];
}

/**
 * Helper for getting an array with unique elements 
 * @param  {Array} array Original array
 * @return {Array}       Copy of array, excluding duplicates
 */
function unique(array) {
	return array.filter(function (item, idx) {
		return array.indexOf(item) === idx;
	});
}

/**

@file kitsy-script-toolkit
@summary makes it easier and cleaner to run code before and after Bitsy functions or to inject new code into Bitsy script tags
@license WTFPL (do WTF you want)
@version 3.2.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
HOW TO USE:
  import {before, after, inject, addDialogTag, addDeferredDialogTag} from "./helpers/kitsy-script-toolkit";

  before(targetFuncName, beforeFn);
  after(targetFuncName, afterFn);
  inject(searchRegex, replaceString);
  addDialogTag(tagName, dialogFn);
  addDeferredDialogTag(tagName, dialogFn);

  For more info, see the documentation at:
  https://github.com/seleb/bitsy-hacks/wiki/Coding-with-kitsy
*/


// Ex: inject(/(names.sprite.set\( name, id \);)/, '$1console.dir(names)');
function inject$1(searchRegex, replaceString) {
	var kitsy = kitsyInit();
	kitsy.queuedInjectScripts.push({
		searchRegex: searchRegex,
		replaceString: replaceString
	});
}

// Ex: before('load_game', function run() { alert('Loading!'); });
//     before('show_text', function run(text) { return text.toUpperCase(); });
//     before('show_text', function run(text, done) { done(text.toUpperCase()); });
function before(targetFuncName, beforeFn) {
	var kitsy = kitsyInit();
	kitsy.queuedBeforeScripts[targetFuncName] = kitsy.queuedBeforeScripts[targetFuncName] || [];
	kitsy.queuedBeforeScripts[targetFuncName].push(beforeFn);
}

// Ex: after('load_game', function run() { alert('Loaded!'); });
function after(targetFuncName, afterFn) {
	var kitsy = kitsyInit();
	kitsy.queuedAfterScripts[targetFuncName] = kitsy.queuedAfterScripts[targetFuncName] || [];
	kitsy.queuedAfterScripts[targetFuncName].push(afterFn);
}

function kitsyInit() {
	// return already-initialized kitsy
	if (bitsy.kitsy) {
		return bitsy.kitsy;
	}

	// Initialize kitsy
	bitsy.kitsy = {
		queuedInjectScripts: [],
		queuedBeforeScripts: {},
		queuedAfterScripts: {}
	};

	var oldStartFunc = bitsy.startExportedGame;
	bitsy.startExportedGame = function doAllInjections() {
		// Only do this once.
		bitsy.startExportedGame = oldStartFunc;

		// Rewrite scripts and hook everything up.
		doInjects();
		applyAllHooks();

		// Start the game
		bitsy.startExportedGame.apply(this, arguments);
	};

	return bitsy.kitsy;
}


function doInjects() {
	bitsy.kitsy.queuedInjectScripts.forEach(function (injectScript) {
		inject(injectScript.searchRegex, injectScript.replaceString);
	});
	_reinitEngine();
}

function applyAllHooks() {
	var allHooks = unique(Object.keys(bitsy.kitsy.queuedBeforeScripts).concat(Object.keys(bitsy.kitsy.queuedAfterScripts)));
	allHooks.forEach(applyHook);
}

function applyHook(functionName) {
	var superFn = bitsy[functionName];
	var superFnLength = superFn ? superFn.length : 0;
	var functions = [];
	// start with befores
	functions = functions.concat(bitsy.kitsy.queuedBeforeScripts[functionName] || []);
	// then original
	if (superFn) {
		functions.push(superFn);
	}
	// then afters
	functions = functions.concat(bitsy.kitsy.queuedAfterScripts[functionName] || []);

	// overwrite original with one which will call each in order
	bitsy[functionName] = function () {
		var args = [].slice.call(arguments);
		var i = 0;
		runBefore.apply(this, arguments);

		// Iterate thru sync & async functions. Run each, finally run original.
		function runBefore() {
			// All outta functions? Finish
			if (i === functions.length) {
				return;
			}

			// Update args if provided.
			if (arguments.length > 0) {
				args = [].slice.call(arguments);
			}

			if (functions[i].length > superFnLength) {
				// Assume funcs that accept more args than the original are
				// async and accept a callback as an additional argument.
				functions[i++].apply(this, args.concat(runBefore.bind(this)));
			} else {
				// run synchronously
				var newArgs = functions[i++].apply(this, args);
				newArgs = newArgs && newArgs.length ? newArgs : args;
				runBefore.apply(this, newArgs);
			}
		}
	};
}

function _reinitEngine() {
	// recreate the script and dialog objects so that they'll be
	// referencing the code with injections instead of the original
	bitsy.scriptModule = new bitsy.Script();
	bitsy.scriptInterpreter = bitsy.scriptModule.CreateInterpreter();

	bitsy.dialogModule = new bitsy.Dialog();
	bitsy.dialogRenderer = bitsy.dialogModule.CreateRenderer();
	bitsy.dialogBuffer = bitsy.dialogModule.CreateBuffer();
}

// Rewrite custom functions' parentheses to curly braces for Bitsy's
// interpreter. Unescape escaped parentheticals, too.
function convertDialogTags(input, tag) {
	return input
		.replace(new RegExp('\\\\?\\((' + tag + '(\\s+(".+?"|.+?))?)\\\\?\\)', 'g'), function(match, group){
			if(match.substr(0,1) === '\\') {
				return '('+ group + ')'; // Rewrite \(tag "..."|...\) to (tag "..."|...)
			}
			return '{'+ group + '}'; // Rewrite (tag "..."|...) to {tag "..."|...}
		});
}


function addDialogFunction(tag, fn) {
	var kitsy = kitsyInit();
	kitsy.dialogFunctions = kitsy.dialogFunctions || {};
	if (kitsy.dialogFunctions[tag]) {
		throw new Error('The dialog function "' + tag + '" already exists.');
	}

	// Hook into game load and rewrite custom functions in game data to Bitsy format.
	before('parseWorld', function (game_data) {
		return [convertDialogTags(game_data, tag)];
	});

	kitsy.dialogFunctions[tag] = fn;
}

/**
 * Adds a custom dialog tag which executes the provided function.
 * For ease-of-use with the bitsy editor, tags can be written as
 * (tagname "parameters") in addition to the standard {tagname "parameters"}
 * 
 * Function is executed immediately when the tag is reached.
 *
 * @param {string}   tag Name of tag
 * @param {Function} fn  Function to execute, with signature `function(environment, parameters, onReturn){}`
 *                       environment: provides access to SetVariable/GetVariable (among other things, see Environment in the bitsy source for more info)
 *                       parameters: array containing parameters as string in first element (i.e. `parameters[0]`)
 *                       onReturn: function to call with return value (just call `onReturn(null);` at the end of your function if your tag doesn't interact with the logic system)
 */
function addDialogTag(tag, fn) {
	addDialogFunction(tag, fn);
	inject$1(
		/(var functionMap = new Map\(\);)/,
		'$1functionMap.set("' + tag + '", kitsy.dialogFunctions.' + tag + ');'
	);
}

/**
 * Adds a custom dialog tag which executes the provided function.
 * For ease-of-use with the bitsy editor, tags can be written as
 * (tagname "parameters") in addition to the standard {tagname "parameters"}
 * 
 * Function is executed after the dialog box.
 *
 * @param {string}   tag Name of tag
 * @param {Function} fn  Function to execute, with signature `function(environment, parameters){}`
 *                       environment: provides access to SetVariable/GetVariable (among other things, see Environment in the bitsy source for more info)
 *                       parameters: array containing parameters as string in first element (i.e. `parameters[0]`)
 */
function addDeferredDialogTag(tag, fn) {
	addDialogFunction(tag, fn);
	bitsy.kitsy.deferredDialogFunctions = bitsy.kitsy.deferredDialogFunctions || {};
	var deferred = bitsy.kitsy.deferredDialogFunctions[tag] = [];
	inject$1(
		/(var functionMap = new Map\(\);)/,
		'$1functionMap.set("' + tag + '", function(e, p, o){ kitsy.deferredDialogFunctions.' + tag + '.push({e:e,p:p}); o(null); });'
	);
	// Hook into the dialog finish event and execute the actual function
	after('onExitDialog', function () {
		while (deferred.length) {
			var args = deferred.shift();
			bitsy.kitsy.dialogFunctions[tag](args.e, args.p, args.o);
		}
	});
	// Hook into the game reset and make sure data gets cleared
	after('clearGameData', function () {
		deferred.length = 0;
	});
}



// Implement the {exit} dialog function. It saves the room name and
// destination X/Y coordinates so we can travel there after the dialog is over.
addDeferredDialogTag('exit', function (environment, parameters) {
	var exitParams = _getExitParams('exit', parameters);
	if (!exitParams) {
		return;
	}

	doPlayerExit(exitParams);
});

// Implement the {exitNow} dialog function. It exits to the destination room
// and X/Y coordinates right damn now.
addDialogTag('exitNow', function (environment, parameters, onReturn) {
	var exitParams = _getExitParams('exitNow', parameters);
	if (!exitParams) {
		return;
	}

	doPlayerExit(exitParams);
	onReturn(null);
});

function _getExitParams(exitFuncName, parameters) {
	var params = parameters[0].split(',');
	var roomName = params[0];
	var x = params[1];
	var y = params[2];
	var coordsType = (params[3] || 'exit').toLowerCase();
	var useSpriteCoords = coordsType === 'sprite';
	var roomId = getRoom(roomName).id;

	if (!roomName || x === undefined || y === undefined) {
		console.warn('{' + exitFuncName + '} was missing parameters! Usage: {' +
			exitFuncName + ' "roomname,x,y"}');
		return null;
	}

	if (roomId === undefined) {
		console.warn("Bad {" + exitFuncName + "} parameter: Room '" + roomName + "' not found!");
		return null;
	}

	return {
		room: roomId,
		x: Number(x),
		y: useSpriteCoords ? 15 - Number(y) : Number(y)
	};
}

// dest === {room: Room, x: Int, y: Int}
function doPlayerExit(dest) {
	bitsy.player().room = dest.room;
	bitsy.player().x = dest.x;
	bitsy.player().y = dest.y;
	bitsy.curRoom = dest.room;
}
// End of (exit) dialog function mod

}(window));

/**
🔚
@file end-from-dialog
@summary trigger an ending from dialog, including narration text
@license WTFPL (do WTF you want)
@version 3.1.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
Lets you end the game from dialog (including inside conditionals).

Using the (end) function in any part of a series of dialog will make the
game end after the dialog is finished. Ending the game resets it back to the
intro.

Using (endNow) at the end of a sentence will display the whole sentence and
immediately clear the background. No further dialog from that passage will
display, and the game will reset when you proceed. Using (endNow) with
narration text will immediately exit the dialog, clear the background, and
show the ending narration in an ending-style centered dialog box.

Usage: (end)
       (end "<ending narration>")
       (endNow)
       (endNow "<ending narration>")

Example: (end)
         (end "Five friars bid you goodbye. You leave the temple, hopeful.")
         (endNow "The computer is still online! The chamber floods with neurotoxin.")

HOW TO USE:
  1. Copy-paste this script into a new script tag after the Bitsy source code.
     It should appear *before* any other mods that handle loading your game
     data so it executes *after* them (last-in first-out).

NOTE: This uses parentheses "()" instead of curly braces "{}" around function
      calls because the Bitsy editor's fancy dialog window strips unrecognized
      curly-brace functions from dialog text. To keep from losing data, write
      these function calls with parentheses like the examples above.

      For full editor integration, you'd *probably* also need to paste this
      code at the end of the editor's `bitsy.js` file. Untested.
*/
(function (bitsy) {
'use strict';

bitsy = bitsy && bitsy.hasOwnProperty('default') ? bitsy['default'] : bitsy;

/**
@file utils
@summary miscellaneous bitsy utilities
@author Sean S. LeBlanc
*/

/*
Helper used to replace code in a script tag based on a search regex
To inject code without erasing original string, using capturing groups; e.g.
	inject(/(some string)/,'injected before $1 injected after')
*/
function inject(searchRegex, replaceString) {
	// find the relevant script tag
	var scriptTags = document.getElementsByTagName('script');
	var scriptTag;
	var code;
	for (var i = 0; i < scriptTags.length; ++i) {
		scriptTag = scriptTags[i];
		var matchesSearch = scriptTag.textContent.search(searchRegex) !== -1;
		var isCurrentScript = scriptTag === document.currentScript;
		if (matchesSearch && !isCurrentScript) {
			code = scriptTag.textContent;
			break;
		}
	}

	// error-handling
	if (!code) {
		throw 'Couldn\'t find "' + searchRegex + '" in script tags';
	}

	// modify the content
	code = code.replace(searchRegex, replaceString);

	// replace the old script tag with a new one using our modified code
	var newScriptTag = document.createElement('script');
	newScriptTag.textContent = code;
	scriptTag.insertAdjacentElement('afterend', newScriptTag);
	scriptTag.remove();
}

/**
 * Helper for getting an array with unique elements 
 * @param  {Array} array Original array
 * @return {Array}       Copy of array, excluding duplicates
 */
function unique(array) {
	return array.filter(function (item, idx) {
		return array.indexOf(item) === idx;
	});
}

/**

@file kitsy-script-toolkit
@summary makes it easier and cleaner to run code before and after Bitsy functions or to inject new code into Bitsy script tags
@license WTFPL (do WTF you want)
@version 3.2.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
HOW TO USE:
  import {before, after, inject, addDialogTag, addDeferredDialogTag} from "./helpers/kitsy-script-toolkit";

  before(targetFuncName, beforeFn);
  after(targetFuncName, afterFn);
  inject(searchRegex, replaceString);
  addDialogTag(tagName, dialogFn);
  addDeferredDialogTag(tagName, dialogFn);

  For more info, see the documentation at:
  https://github.com/seleb/bitsy-hacks/wiki/Coding-with-kitsy
*/


// Ex: inject(/(names.sprite.set\( name, id \);)/, '$1console.dir(names)');
function inject$1(searchRegex, replaceString) {
	var kitsy = kitsyInit();
	kitsy.queuedInjectScripts.push({
		searchRegex: searchRegex,
		replaceString: replaceString
	});
}

// Ex: before('load_game', function run() { alert('Loading!'); });
//     before('show_text', function run(text) { return text.toUpperCase(); });
//     before('show_text', function run(text, done) { done(text.toUpperCase()); });
function before(targetFuncName, beforeFn) {
	var kitsy = kitsyInit();
	kitsy.queuedBeforeScripts[targetFuncName] = kitsy.queuedBeforeScripts[targetFuncName] || [];
	kitsy.queuedBeforeScripts[targetFuncName].push(beforeFn);
}

// Ex: after('load_game', function run() { alert('Loaded!'); });
function after(targetFuncName, afterFn) {
	var kitsy = kitsyInit();
	kitsy.queuedAfterScripts[targetFuncName] = kitsy.queuedAfterScripts[targetFuncName] || [];
	kitsy.queuedAfterScripts[targetFuncName].push(afterFn);
}

function kitsyInit() {
	// return already-initialized kitsy
	if (bitsy.kitsy) {
		return bitsy.kitsy;
	}

	// Initialize kitsy
	bitsy.kitsy = {
		queuedInjectScripts: [],
		queuedBeforeScripts: {},
		queuedAfterScripts: {}
	};

	var oldStartFunc = bitsy.startExportedGame;
	bitsy.startExportedGame = function doAllInjections() {
		// Only do this once.
		bitsy.startExportedGame = oldStartFunc;

		// Rewrite scripts and hook everything up.
		doInjects();
		applyAllHooks();

		// Start the game
		bitsy.startExportedGame.apply(this, arguments);
	};

	return bitsy.kitsy;
}


function doInjects() {
	bitsy.kitsy.queuedInjectScripts.forEach(function (injectScript) {
		inject(injectScript.searchRegex, injectScript.replaceString);
	});
	_reinitEngine();
}

function applyAllHooks() {
	var allHooks = unique(Object.keys(bitsy.kitsy.queuedBeforeScripts).concat(Object.keys(bitsy.kitsy.queuedAfterScripts)));
	allHooks.forEach(applyHook);
}

function applyHook(functionName) {
	var superFn = bitsy[functionName];
	var superFnLength = superFn ? superFn.length : 0;
	var functions = [];
	// start with befores
	functions = functions.concat(bitsy.kitsy.queuedBeforeScripts[functionName] || []);
	// then original
	if (superFn) {
		functions.push(superFn);
	}
	// then afters
	functions = functions.concat(bitsy.kitsy.queuedAfterScripts[functionName] || []);

	// overwrite original with one which will call each in order
	bitsy[functionName] = function () {
		var args = [].slice.call(arguments);
		var i = 0;
		runBefore.apply(this, arguments);

		// Iterate thru sync & async functions. Run each, finally run original.
		function runBefore() {
			// All outta functions? Finish
			if (i === functions.length) {
				return;
			}

			// Update args if provided.
			if (arguments.length > 0) {
				args = [].slice.call(arguments);
			}

			if (functions[i].length > superFnLength) {
				// Assume funcs that accept more args than the original are
				// async and accept a callback as an additional argument.
				functions[i++].apply(this, args.concat(runBefore.bind(this)));
			} else {
				// run synchronously
				var newArgs = functions[i++].apply(this, args);
				newArgs = newArgs && newArgs.length ? newArgs : args;
				runBefore.apply(this, newArgs);
			}
		}
	};
}

function _reinitEngine() {
	// recreate the script and dialog objects so that they'll be
	// referencing the code with injections instead of the original
	bitsy.scriptModule = new bitsy.Script();
	bitsy.scriptInterpreter = bitsy.scriptModule.CreateInterpreter();

	bitsy.dialogModule = new bitsy.Dialog();
	bitsy.dialogRenderer = bitsy.dialogModule.CreateRenderer();
	bitsy.dialogBuffer = bitsy.dialogModule.CreateBuffer();
}

// Rewrite custom functions' parentheses to curly braces for Bitsy's
// interpreter. Unescape escaped parentheticals, too.
function convertDialogTags(input, tag) {
	return input
		.replace(new RegExp('\\\\?\\((' + tag + '(\\s+(".+?"|.+?))?)\\\\?\\)', 'g'), function(match, group){
			if(match.substr(0,1) === '\\') {
				return '('+ group + ')'; // Rewrite \(tag "..."|...\) to (tag "..."|...)
			}
			return '{'+ group + '}'; // Rewrite (tag "..."|...) to {tag "..."|...}
		});
}


function addDialogFunction(tag, fn) {
	var kitsy = kitsyInit();
	kitsy.dialogFunctions = kitsy.dialogFunctions || {};
	if (kitsy.dialogFunctions[tag]) {
		throw new Error('The dialog function "' + tag + '" already exists.');
	}

	// Hook into game load and rewrite custom functions in game data to Bitsy format.
	before('parseWorld', function (game_data) {
		return [convertDialogTags(game_data, tag)];
	});

	kitsy.dialogFunctions[tag] = fn;
}

/**
 * Adds a custom dialog tag which executes the provided function.
 * For ease-of-use with the bitsy editor, tags can be written as
 * (tagname "parameters") in addition to the standard {tagname "parameters"}
 * 
 * Function is executed immediately when the tag is reached.
 *
 * @param {string}   tag Name of tag
 * @param {Function} fn  Function to execute, with signature `function(environment, parameters, onReturn){}`
 *                       environment: provides access to SetVariable/GetVariable (among other things, see Environment in the bitsy source for more info)
 *                       parameters: array containing parameters as string in first element (i.e. `parameters[0]`)
 *                       onReturn: function to call with return value (just call `onReturn(null);` at the end of your function if your tag doesn't interact with the logic system)
 */
function addDialogTag(tag, fn) {
	addDialogFunction(tag, fn);
	inject$1(
		/(var functionMap = new Map\(\);)/,
		'$1functionMap.set("' + tag + '", kitsy.dialogFunctions.' + tag + ');'
	);
}

/**
 * Adds a custom dialog tag which executes the provided function.
 * For ease-of-use with the bitsy editor, tags can be written as
 * (tagname "parameters") in addition to the standard {tagname "parameters"}
 * 
 * Function is executed after the dialog box.
 *
 * @param {string}   tag Name of tag
 * @param {Function} fn  Function to execute, with signature `function(environment, parameters){}`
 *                       environment: provides access to SetVariable/GetVariable (among other things, see Environment in the bitsy source for more info)
 *                       parameters: array containing parameters as string in first element (i.e. `parameters[0]`)
 */
function addDeferredDialogTag(tag, fn) {
	addDialogFunction(tag, fn);
	bitsy.kitsy.deferredDialogFunctions = bitsy.kitsy.deferredDialogFunctions || {};
	var deferred = bitsy.kitsy.deferredDialogFunctions[tag] = [];
	inject$1(
		/(var functionMap = new Map\(\);)/,
		'$1functionMap.set("' + tag + '", function(e, p, o){ kitsy.deferredDialogFunctions.' + tag + '.push({e:e,p:p}); o(null); });'
	);
	// Hook into the dialog finish event and execute the actual function
	after('onExitDialog', function () {
		while (deferred.length) {
			var args = deferred.shift();
			bitsy.kitsy.dialogFunctions[tag](args.e, args.p, args.o);
		}
	});
	// Hook into the game reset and make sure data gets cleared
	after('clearGameData', function () {
		deferred.length = 0;
	});
}



// Implement the {end} dialog function. It schedules the game to end after the current dialog finishes.
addDeferredDialogTag('end', function (environment, parameters) {
	bitsy.startNarrating(parameters[0] || null, true);
});

// Implement the {endNow} dialog function. It starts ending narration, if any,
// and restarts the game right damn now.
addDialogTag('endNow', function (environment, parameters, onReturn) {
	onReturn(null);
	bitsy.startNarrating(parameters[0] || null, true);
});
// End of (end) dialog function mod

}(window));

/**
🛑
@file solid items
@summary treat some items like sprites that can be placed multiple times
@license MIT
@version 2.0.1
@author Sean S. LeBlanc

@description
Prevents certain items from being picked up or walked over, but still triggers their dialog.
This allows them to be treated like sprites that can be placed multiple times.

HOW TO USE:
1. Copy-paste this script into a script tag after the bitsy source
2. Update the `itemIsSolid` function below to match your needs
*/
(function (bitsy) {
'use strict';
var hackOptions = {
itemIsSolid: function (item) {
  // specific solid item
  //return item.name == 'tea';

  // specific solid item list
  //return ['tea', 'flower', 'hat'].indexOf(item.name) !== -1;
  
  // solid item flag in name
  return item.name.indexOf('SOLID') !== -1;

  // all items are solid
  //return true;
}
};

bitsy = bitsy && bitsy.hasOwnProperty('default') ? bitsy['default'] : bitsy;

/**
@file utils
@summary miscellaneous bitsy utilities
@author Sean S. LeBlanc
*/

/*
Helper used to replace code in a script tag based on a search regex
To inject code without erasing original string, using capturing groups; e.g.
	inject(/(some string)/,'injected before $1 injected after')
*/
function inject(searchRegex, replaceString) {
	// find the relevant script tag
	var scriptTags = document.getElementsByTagName('script');
	var scriptTag;
	var code;
	for (var i = 0; i < scriptTags.length; ++i) {
		scriptTag = scriptTags[i];
		var matchesSearch = scriptTag.textContent.search(searchRegex) !== -1;
		var isCurrentScript = scriptTag === document.currentScript;
		if (matchesSearch && !isCurrentScript) {
			code = scriptTag.textContent;
			break;
		}
	}

	// error-handling
	if (!code) {
		throw 'Couldn\'t find "' + searchRegex + '" in script tags';
	}

	// modify the content
	code = code.replace(searchRegex, replaceString);

	// replace the old script tag with a new one using our modified code
	var newScriptTag = document.createElement('script');
	newScriptTag.textContent = code;
	scriptTag.insertAdjacentElement('afterend', newScriptTag);
	scriptTag.remove();
}

/**
 * Helper for getting an array with unique elements 
 * @param  {Array} array Original array
 * @return {Array}       Copy of array, excluding duplicates
 */
function unique(array) {
	return array.filter(function (item, idx) {
		return array.indexOf(item) === idx;
	});
}

/**

@file kitsy-script-toolkit
@summary makes it easier and cleaner to run code before and after Bitsy functions or to inject new code into Bitsy script tags
@license WTFPL (do WTF you want)
@version 3.2.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
HOW TO USE:
  import {before, after, inject, addDialogTag, addDeferredDialogTag} from "./helpers/kitsy-script-toolkit";

  before(targetFuncName, beforeFn);
  after(targetFuncName, afterFn);
  inject(searchRegex, replaceString);
  addDialogTag(tagName, dialogFn);
  addDeferredDialogTag(tagName, dialogFn);

  For more info, see the documentation at:
  https://github.com/seleb/bitsy-hacks/wiki/Coding-with-kitsy
*/

// Ex: before('load_game', function run() { alert('Loading!'); });
//     before('show_text', function run(text) { return text.toUpperCase(); });
//     before('show_text', function run(text, done) { done(text.toUpperCase()); });
function before(targetFuncName, beforeFn) {
	var kitsy = kitsyInit();
	kitsy.queuedBeforeScripts[targetFuncName] = kitsy.queuedBeforeScripts[targetFuncName] || [];
	kitsy.queuedBeforeScripts[targetFuncName].push(beforeFn);
}

// Ex: after('load_game', function run() { alert('Loaded!'); });
function after(targetFuncName, afterFn) {
	var kitsy = kitsyInit();
	kitsy.queuedAfterScripts[targetFuncName] = kitsy.queuedAfterScripts[targetFuncName] || [];
	kitsy.queuedAfterScripts[targetFuncName].push(afterFn);
}

function kitsyInit() {
	// return already-initialized kitsy
	if (bitsy.kitsy) {
		return bitsy.kitsy;
	}

	// Initialize kitsy
	bitsy.kitsy = {
		queuedInjectScripts: [],
		queuedBeforeScripts: {},
		queuedAfterScripts: {}
	};

	var oldStartFunc = bitsy.startExportedGame;
	bitsy.startExportedGame = function doAllInjections() {
		// Only do this once.
		bitsy.startExportedGame = oldStartFunc;

		// Rewrite scripts and hook everything up.
		doInjects();
		applyAllHooks();

		// Start the game
		bitsy.startExportedGame.apply(this, arguments);
	};

	return bitsy.kitsy;
}


function doInjects() {
	bitsy.kitsy.queuedInjectScripts.forEach(function (injectScript) {
		inject(injectScript.searchRegex, injectScript.replaceString);
	});
	_reinitEngine();
}

function applyAllHooks() {
	var allHooks = unique(Object.keys(bitsy.kitsy.queuedBeforeScripts).concat(Object.keys(bitsy.kitsy.queuedAfterScripts)));
	allHooks.forEach(applyHook);
}

function applyHook(functionName) {
	var superFn = bitsy[functionName];
	var superFnLength = superFn ? superFn.length : 0;
	var functions = [];
	// start with befores
	functions = functions.concat(bitsy.kitsy.queuedBeforeScripts[functionName] || []);
	// then original
	if (superFn) {
		functions.push(superFn);
	}
	// then afters
	functions = functions.concat(bitsy.kitsy.queuedAfterScripts[functionName] || []);

	// overwrite original with one which will call each in order
	bitsy[functionName] = function () {
		var args = [].slice.call(arguments);
		var i = 0;
		runBefore.apply(this, arguments);

		// Iterate thru sync & async functions. Run each, finally run original.
		function runBefore() {
			// All outta functions? Finish
			if (i === functions.length) {
				return;
			}

			// Update args if provided.
			if (arguments.length > 0) {
				args = [].slice.call(arguments);
			}

			if (functions[i].length > superFnLength) {
				// Assume funcs that accept more args than the original are
				// async and accept a callback as an additional argument.
				functions[i++].apply(this, args.concat(runBefore.bind(this)));
			} else {
				// run synchronously
				var newArgs = functions[i++].apply(this, args);
				newArgs = newArgs && newArgs.length ? newArgs : args;
				runBefore.apply(this, newArgs);
			}
		}
	};
}

function _reinitEngine() {
	// recreate the script and dialog objects so that they'll be
	// referencing the code with injections instead of the original
	bitsy.scriptModule = new bitsy.Script();
	bitsy.scriptInterpreter = bitsy.scriptModule.CreateInterpreter();

	bitsy.dialogModule = new bitsy.Dialog();
	bitsy.dialogRenderer = bitsy.dialogModule.CreateRenderer();
	bitsy.dialogBuffer = bitsy.dialogModule.CreateBuffer();
}





var room;
var oldItems;
var x,y;
before("movePlayer", function () {
	x = bitsy.player().x;
	y = bitsy.player().y;
	room = bitsy.room[bitsy.curRoom];
	oldItems = room.items.slice();
});
after("movePlayer", function () {
	var newItems = room.items;
	if (newItems.length === oldItems.length) {
		return; // nothing changed
	}

	// check for changes
	for (var i = 0; i < oldItems.length; ++i) {
		if (!newItems[i] ||
			oldItems[i].x !== newItems[i].x ||
			oldItems[i].y !== newItems[i].y ||
			oldItems[i].id !== newItems[i].id
		) {
			// something changed
			if (hackOptions.itemIsSolid(bitsy.item[oldItems[i].id])) {
				// put that back!
				newItems.splice(i, 0, oldItems[i]);
				// get back there!
				bitsy.player().x = x;
				bitsy.player().y = y;
			} else {
				// add an empty entry for now to keep the arrays aligned
				newItems.splice(i, 0, null);
			}
		}
	}
	// clear out those empty entries
	room.items = newItems.filter(function (item) {
		return !!item;
	});
});

}(window));

/**
😌
@file bitsymuse
@summary A variety of Bitsy sound and music handlers
@license MIT
@version 2.1.2
@requires 4.8, 4.9
@author David Mowatt

@description
A hack that adds a variety of audio controls, including music that changes as you move between rooms.
If the same song is played as you move between rooms, the audio file will continue playing.

HOW TO USE:
1. Place your audio files somewhere relative to your bitsy html file (in the zip if you're uploading to itch.io)
2. Copy-paste `<audio id="sound ID" src="relative path to sound file"></audio>` into the <head> of your document.
   You need to do it once for each sound file you are adding, and each needs a unique sound ID. Add `loop` after the `src=""`
   tag if it's music that's going to loop (e.g. `<audio id="sound ID" src="./mySong.mp3" loop></audio>`)
3. Copy-paste this script into a script tag after the bitsy source.
4. Edit hackOptions below to set up the TRACK LIST for rooms you move through.

In addition to the track list, which will play audio based on the room number/name,
you have access to the following commands you can add to dialogue:

1. (soundeffect "<sound ID>") will play a sound without interrupting the music
2. (music "<sound ID>") will change the music as soon as it is called in the dialogue
3. (musicEnd "<sound ID>") will change the music once the dialogue box closes

You can call both music and musicEnd in the same dialogue, to e.g. change the music while you speak to a character
and then restart the regular room music once you stop speaking to them.
You can also use a special ID ("S" by default) to Silence the music.

By default, music tracks automatically restart from the beginning if you go back to a previous track.
This can also be changed in the hackOptions below.
*/
(function (bitsy) {
'use strict';
var hackOptions = {
// You need to put an entry in this list for every room ID 
// or name that is accessible by the player, and then specify 
// the song ID for each room. Expand this list to as many 
// rooms as you need.

// If the player moves between rooms with the same audio ID 
// the music keeps playing seamlessly. Undefined rooms will 
// keep playing whatever music they were last playing.

// You can set a room to stop music when you enter by using 
// the silenceId instead of a song ID. By default, this is 
// set to 'S'.

// These values are examples, and this hack WILL NOT WORK 
// with these values. Check the Readme for setup instructions.

musicByRoom: {
	'splash screen': 'thunder',
	'entrance': 'thunder',
	'catacomb1': 'abandoned_mothership',
	'catacomb2': 'abandoned_mothership',
	'catacomb3': 'abandoned_mothership',
	'batgut': 'martian_martial_arts',
	'a02-1': 'abandoned_mothership',
	'a02-2': 'abandoned_mothership',
	'a02-3': 'abandoned_mothership',
	'enui wet floor': 'dr_ice',
	'enui wet floor': 'dr_ice',
	'garden-dark':'magnetic',
	'garden-light':'dr_ice',
	'dream demons 1':'final_boss_continue',
	'dream demons 2':'final_boss_continue',
	'dream demons 3':'final_boss_continue',
	'dream demons 4':'final_boss_continue',
	'rose ruins':'thunder',
	'slime-1':'martian_martial_arts',
	'slime-2':'martian_martial_arts',
	'slime-3':'martian_martial_arts',
	'slime-4':'martian_martial_arts',
	'slime-3o':'martian_martial_arts',
	'slime-4o':'martian_martial_arts',
	'spookhop': 'dr_ice',
	'Onion Floor 1': 'abandoned_mothership',
	'Onion Floor 2': 'abandoned_mothership',
	'SquiddingtonStudy0': 'dr_ice',
	'SquiddingtonStudy1': 'dr_ice',
	'SquiddingtonStudy2': 'dr_ice',
	'ripple_room1_the_barren_belltower':'final_boss_continue',
	'entrance room':'magnetic',
	'anim1':'magnetic',
	'anim2':'magnetic',
	'anim3':'magnetic',
	'exit room':'magnetic',
	'party center': 'martian_martial_arts',
	'party left': 'martian_martial_arts',
	'party right': 'martian_martial_arts',
	'party top': 'thunder',
},
silenceId: 'S', // Use this song ID of to make a room fall silent.
resume: false, // If true, songs will pause/resume on change; otherwise, they'll stop/play (doesn't affect sound effects)
};

bitsy = bitsy && bitsy.hasOwnProperty('default') ? bitsy['default'] : bitsy;

/**
@file utils
@summary miscellaneous bitsy utilities
@author Sean S. LeBlanc
*/

/*
Helper used to replace code in a script tag based on a search regex
To inject code without erasing original string, using capturing groups; e.g.
	inject(/(some string)/,'injected before $1 injected after')
*/
function inject(searchRegex, replaceString) {
	// find the relevant script tag
	var scriptTags = document.getElementsByTagName('script');
	var scriptTag;
	var code;
	for (var i = 0; i < scriptTags.length; ++i) {
		scriptTag = scriptTags[i];
		var matchesSearch = scriptTag.textContent.search(searchRegex) !== -1;
		var isCurrentScript = scriptTag === document.currentScript;
		if (matchesSearch && !isCurrentScript) {
			code = scriptTag.textContent;
			break;
		}
	}

	// error-handling
	if (!code) {
		throw 'Couldn\'t find "' + searchRegex + '" in script tags';
	}

	// modify the content
	code = code.replace(searchRegex, replaceString);

	// replace the old script tag with a new one using our modified code
	var newScriptTag = document.createElement('script');
	newScriptTag.textContent = code;
	scriptTag.insertAdjacentElement('afterend', newScriptTag);
	scriptTag.remove();
}

/**
 * Helper for getting room by name or id
 * @param {string} name id or name of room to return
 * @return {string} room, or undefined if it doesn't exist
 */
function getRoom(name) {
	var id = bitsy.room.hasOwnProperty(name) ? name : bitsy.names.room.get(name);
	return bitsy.room[id];
}

/**
 * Helper for getting an array with unique elements 
 * @param  {Array} array Original array
 * @return {Array}       Copy of array, excluding duplicates
 */
function unique(array) {
	return array.filter(function (item, idx) {
		return array.indexOf(item) === idx;
	});
}

/**

@file kitsy-script-toolkit
@summary makes it easier and cleaner to run code before and after Bitsy functions or to inject new code into Bitsy script tags
@license WTFPL (do WTF you want)
@version 3.2.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
HOW TO USE:
  import {before, after, inject, addDialogTag, addDeferredDialogTag} from "./helpers/kitsy-script-toolkit";

  before(targetFuncName, beforeFn);
  after(targetFuncName, afterFn);
  inject(searchRegex, replaceString);
  addDialogTag(tagName, dialogFn);
  addDeferredDialogTag(tagName, dialogFn);

  For more info, see the documentation at:
  https://github.com/seleb/bitsy-hacks/wiki/Coding-with-kitsy
*/


// Ex: inject(/(names.sprite.set\( name, id \);)/, '$1console.dir(names)');
function inject$1(searchRegex, replaceString) {
	var kitsy = kitsyInit();
	kitsy.queuedInjectScripts.push({
		searchRegex: searchRegex,
		replaceString: replaceString
	});
}

// Ex: before('load_game', function run() { alert('Loading!'); });
//     before('show_text', function run(text) { return text.toUpperCase(); });
//     before('show_text', function run(text, done) { done(text.toUpperCase()); });
function before(targetFuncName, beforeFn) {
	var kitsy = kitsyInit();
	kitsy.queuedBeforeScripts[targetFuncName] = kitsy.queuedBeforeScripts[targetFuncName] || [];
	kitsy.queuedBeforeScripts[targetFuncName].push(beforeFn);
}

// Ex: after('load_game', function run() { alert('Loaded!'); });
function after(targetFuncName, afterFn) {
	var kitsy = kitsyInit();
	kitsy.queuedAfterScripts[targetFuncName] = kitsy.queuedAfterScripts[targetFuncName] || [];
	kitsy.queuedAfterScripts[targetFuncName].push(afterFn);
}

function kitsyInit() {
	// return already-initialized kitsy
	if (bitsy.kitsy) {
		return bitsy.kitsy;
	}

	// Initialize kitsy
	bitsy.kitsy = {
		queuedInjectScripts: [],
		queuedBeforeScripts: {},
		queuedAfterScripts: {}
	};

	var oldStartFunc = bitsy.startExportedGame;
	bitsy.startExportedGame = function doAllInjections() {
		// Only do this once.
		bitsy.startExportedGame = oldStartFunc;

		// Rewrite scripts and hook everything up.
		doInjects();
		applyAllHooks();

		// Start the game
		bitsy.startExportedGame.apply(this, arguments);
	};

	return bitsy.kitsy;
}


function doInjects() {
	bitsy.kitsy.queuedInjectScripts.forEach(function (injectScript) {
		inject(injectScript.searchRegex, injectScript.replaceString);
	});
	_reinitEngine();
}

function applyAllHooks() {
	var allHooks = unique(Object.keys(bitsy.kitsy.queuedBeforeScripts).concat(Object.keys(bitsy.kitsy.queuedAfterScripts)));
	allHooks.forEach(applyHook);
}

function applyHook(functionName) {
	var superFn = bitsy[functionName];
	var superFnLength = superFn ? superFn.length : 0;
	var functions = [];
	// start with befores
	functions = functions.concat(bitsy.kitsy.queuedBeforeScripts[functionName] || []);
	// then original
	if (superFn) {
		functions.push(superFn);
	}
	// then afters
	functions = functions.concat(bitsy.kitsy.queuedAfterScripts[functionName] || []);

	// overwrite original with one which will call each in order
	bitsy[functionName] = function () {
		var args = [].slice.call(arguments);
		var i = 0;
		runBefore.apply(this, arguments);

		// Iterate thru sync & async functions. Run each, finally run original.
		function runBefore() {
			// All outta functions? Finish
			if (i === functions.length) {
				return;
			}

			// Update args if provided.
			if (arguments.length > 0) {
				args = [].slice.call(arguments);
			}

			if (functions[i].length > superFnLength) {
				// Assume funcs that accept more args than the original are
				// async and accept a callback as an additional argument.
				functions[i++].apply(this, args.concat(runBefore.bind(this)));
			} else {
				// run synchronously
				var newArgs = functions[i++].apply(this, args);
				newArgs = newArgs && newArgs.length ? newArgs : args;
				runBefore.apply(this, newArgs);
			}
		}
	};
}

function _reinitEngine() {
	// recreate the script and dialog objects so that they'll be
	// referencing the code with injections instead of the original
	bitsy.scriptModule = new bitsy.Script();
	bitsy.scriptInterpreter = bitsy.scriptModule.CreateInterpreter();

	bitsy.dialogModule = new bitsy.Dialog();
	bitsy.dialogRenderer = bitsy.dialogModule.CreateRenderer();
	bitsy.dialogBuffer = bitsy.dialogModule.CreateBuffer();
}

// Rewrite custom functions' parentheses to curly braces for Bitsy's
// interpreter. Unescape escaped parentheticals, too.
function convertDialogTags(input, tag) {
	return input
		.replace(new RegExp('\\\\?\\((' + tag + '(\\s+(".+?"|.+?))?)\\\\?\\)', 'g'), function(match, group){
			if(match.substr(0,1) === '\\') {
				return '('+ group + ')'; // Rewrite \(tag "..."|...\) to (tag "..."|...)
			}
			return '{'+ group + '}'; // Rewrite (tag "..."|...) to {tag "..."|...}
		});
}


function addDialogFunction(tag, fn) {
	var kitsy = kitsyInit();
	kitsy.dialogFunctions = kitsy.dialogFunctions || {};
	if (kitsy.dialogFunctions[tag]) {
		throw new Error('The dialog function "' + tag + '" already exists.');
	}

	// Hook into game load and rewrite custom functions in game data to Bitsy format.
	before('parseWorld', function (game_data) {
		return [convertDialogTags(game_data, tag)];
	});

	kitsy.dialogFunctions[tag] = fn;
}

/**
 * Adds a custom dialog tag which executes the provided function.
 * For ease-of-use with the bitsy editor, tags can be written as
 * (tagname "parameters") in addition to the standard {tagname "parameters"}
 * 
 * Function is executed immediately when the tag is reached.
 *
 * @param {string}   tag Name of tag
 * @param {Function} fn  Function to execute, with signature `function(environment, parameters, onReturn){}`
 *                       environment: provides access to SetVariable/GetVariable (among other things, see Environment in the bitsy source for more info)
 *                       parameters: array containing parameters as string in first element (i.e. `parameters[0]`)
 *                       onReturn: function to call with return value (just call `onReturn(null);` at the end of your function if your tag doesn't interact with the logic system)
 */
function addDialogTag(tag, fn) {
	addDialogFunction(tag, fn);
	inject$1(
		/(var functionMap = new Map\(\);)/,
		'$1functionMap.set("' + tag + '", kitsy.dialogFunctions.' + tag + ');'
	);
}

/**
 * Adds a custom dialog tag which executes the provided function.
 * For ease-of-use with the bitsy editor, tags can be written as
 * (tagname "parameters") in addition to the standard {tagname "parameters"}
 * 
 * Function is executed after the dialog box.
 *
 * @param {string}   tag Name of tag
 * @param {Function} fn  Function to execute, with signature `function(environment, parameters){}`
 *                       environment: provides access to SetVariable/GetVariable (among other things, see Environment in the bitsy source for more info)
 *                       parameters: array containing parameters as string in first element (i.e. `parameters[0]`)
 */
function addDeferredDialogTag(tag, fn) {
	addDialogFunction(tag, fn);
	bitsy.kitsy.deferredDialogFunctions = bitsy.kitsy.deferredDialogFunctions || {};
	var deferred = bitsy.kitsy.deferredDialogFunctions[tag] = [];
	inject$1(
		/(var functionMap = new Map\(\);)/,
		'$1functionMap.set("' + tag + '", function(e, p, o){ kitsy.deferredDialogFunctions.' + tag + '.push({e:e,p:p}); o(null); });'
	);
	// Hook into the dialog finish event and execute the actual function
	after('onExitDialog', function () {
		while (deferred.length) {
			var args = deferred.shift();
			bitsy.kitsy.dialogFunctions[tag](args.e, args.p, args.o);
		}
	});
	// Hook into the game reset and make sure data gets cleared
	after('clearGameData', function () {
		deferred.length = 0;
	});
}





var currentMusic;
var roomMusicFlag = null;

// expand the map to include ids of rooms listed by name
after('load_game', function () {
	var room;
	for (var i in hackOptions.musicByRoom) {
		if (hackOptions.musicByRoom.hasOwnProperty(i)) {
			room = getRoom(i);
			if (room) {
				hackOptions.musicByRoom[room.id] = hackOptions.musicByRoom[i];
			}
		}
	}
});

var audioCache = {};

function getAudio(id) {
	var el = audioCache[id] || (audioCache[id] = document.getElementById(id));
	if (!el) {
		throw new Error("bitsymuse tried to use audio with id '" + id + "' but couldn't find one on the page!");
	}
	return el;
}

function playSound(soundParam) {
	if (!soundParam) {
		return;
	}
	getAudio(soundParam).play();
}

function changeMusic(newMusic) {
	var audio;
	// if we didn't get new music,
	// or the music didn't change,
	// there's no work to be done
	if (!newMusic || newMusic === currentMusic) {
		return;
	}

	// stop old music
	if (currentMusic && currentMusic !== hackOptions.silenceId) {
		audio = getAudio(currentMusic);
		audio.pause();
		if (!hackOptions.resume) {
			audio.currentTime = 0.0;
		}
	}

	// start new music
	currentMusic = newMusic;
	// special case: don't start anything new
	if (newMusic === hackOptions.silenceId) {
		return;
	}
	getAudio(newMusic).play();
}

after('drawRoom', function () {
	if (roomMusicFlag !== bitsy.curRoom) {
		changeMusic(hackOptions.musicByRoom[bitsy.curRoom]);
		roomMusicFlag = bitsy.curRoom;
	}
});

// Implement the {music} dialog function.
// It changes the music track as soon as it is called.
addDialogTag('music', function (environment, parameters, onReturn) {
	if (!parameters[0]) {
		throw new Error('{music} was missing parameters! Usage: {music "track name"}');
	}
	changeMusic(parameters[0]);
	onReturn(null);
});

// Implement the {musicEnd} dialog function.
// It changes the music track once the dialog closes.
addDeferredDialogTag('musicEnd', function (environment, parameters) {
	if (!parameters[0]) {
		throw new Error('{musicEnd} was missing parameters! Usage: {musicEnd "track name"}');
	}
	changeMusic(parameters[0]);
});

addDialogTag('soundeffect', function (environment, parameters, onReturn) {
	if (!parameters[0]) {
		throw new Error('{soundeffect} was missing parameters! Usage: {soundeffect "track name"}');
	}
	playSound(parameters[0]);
	onReturn(null);
});
// End of (music) dialog function mod

}(window));

/**
🏁
@file transparent sprites
@summary makes all sprites have transparent backgrounds
@license MIT
@version 2.0.2
@requires Bitsy Version: 5.1
@author Sean S. LeBlanc

@description
Makes all sprites have transparent backgrounds.
i.e. tiles can be seen underneath the player, sprites, and items.

HOW TO USE:
Copy-paste this script into a script tag after the bitsy source
*/
(function (bitsy) {
'use strict';

bitsy = bitsy && bitsy.hasOwnProperty('default') ? bitsy['default'] : bitsy;

/**
@file utils
@summary miscellaneous bitsy utilities
@author Sean S. LeBlanc
*/

/*
Helper used to replace code in a script tag based on a search regex
To inject code without erasing original string, using capturing groups; e.g.
	inject(/(some string)/,'injected before $1 injected after')
*/
function inject(searchRegex, replaceString) {
	// find the relevant script tag
	var scriptTags = document.getElementsByTagName('script');
	var scriptTag;
	var code;
	for (var i = 0; i < scriptTags.length; ++i) {
		scriptTag = scriptTags[i];
		var matchesSearch = scriptTag.textContent.search(searchRegex) !== -1;
		var isCurrentScript = scriptTag === document.currentScript;
		if (matchesSearch && !isCurrentScript) {
			code = scriptTag.textContent;
			break;
		}
	}

	// error-handling
	if (!code) {
		throw 'Couldn\'t find "' + searchRegex + '" in script tags';
	}

	// modify the content
	code = code.replace(searchRegex, replaceString);

	// replace the old script tag with a new one using our modified code
	var newScriptTag = document.createElement('script');
	newScriptTag.textContent = code;
	scriptTag.insertAdjacentElement('afterend', newScriptTag);
	scriptTag.remove();
}

/**
 * Helper for getting an array with unique elements 
 * @param  {Array} array Original array
 * @return {Array}       Copy of array, excluding duplicates
 */
function unique(array) {
	return array.filter(function (item, idx) {
		return array.indexOf(item) === idx;
	});
}

/**

@file kitsy-script-toolkit
@summary makes it easier and cleaner to run code before and after Bitsy functions or to inject new code into Bitsy script tags
@license WTFPL (do WTF you want)
@version 3.2.2
@requires Bitsy Version: 4.5, 4.6
@author @mildmojo

@description
HOW TO USE:
  import {before, after, inject, addDialogTag, addDeferredDialogTag} from "./helpers/kitsy-script-toolkit";

  before(targetFuncName, beforeFn);
  after(targetFuncName, afterFn);
  inject(searchRegex, replaceString);
  addDialogTag(tagName, dialogFn);
  addDeferredDialogTag(tagName, dialogFn);

  For more info, see the documentation at:
  https://github.com/seleb/bitsy-hacks/wiki/Coding-with-kitsy
*/


// Ex: inject(/(names.sprite.set\( name, id \);)/, '$1console.dir(names)');
function inject$1(searchRegex, replaceString) {
	var kitsy = kitsyInit();
	kitsy.queuedInjectScripts.push({
		searchRegex: searchRegex,
		replaceString: replaceString
	});
}

function kitsyInit() {
	// return already-initialized kitsy
	if (bitsy.kitsy) {
		return bitsy.kitsy;
	}

	// Initialize kitsy
	bitsy.kitsy = {
		queuedInjectScripts: [],
		queuedBeforeScripts: {},
		queuedAfterScripts: {}
	};

	var oldStartFunc = bitsy.startExportedGame;
	bitsy.startExportedGame = function doAllInjections() {
		// Only do this once.
		bitsy.startExportedGame = oldStartFunc;

		// Rewrite scripts and hook everything up.
		doInjects();
		applyAllHooks();

		// Start the game
		bitsy.startExportedGame.apply(this, arguments);
	};

	return bitsy.kitsy;
}


function doInjects() {
	bitsy.kitsy.queuedInjectScripts.forEach(function (injectScript) {
		inject(injectScript.searchRegex, injectScript.replaceString);
	});
	_reinitEngine();
}

function applyAllHooks() {
	var allHooks = unique(Object.keys(bitsy.kitsy.queuedBeforeScripts).concat(Object.keys(bitsy.kitsy.queuedAfterScripts)));
	allHooks.forEach(applyHook);
}

function applyHook(functionName) {
	var superFn = bitsy[functionName];
	var superFnLength = superFn ? superFn.length : 0;
	var functions = [];
	// start with befores
	functions = functions.concat(bitsy.kitsy.queuedBeforeScripts[functionName] || []);
	// then original
	if (superFn) {
		functions.push(superFn);
	}
	// then afters
	functions = functions.concat(bitsy.kitsy.queuedAfterScripts[functionName] || []);

	// overwrite original with one which will call each in order
	bitsy[functionName] = function () {
		var args = [].slice.call(arguments);
		var i = 0;
		runBefore.apply(this, arguments);

		// Iterate thru sync & async functions. Run each, finally run original.
		function runBefore() {
			// All outta functions? Finish
			if (i === functions.length) {
				return;
			}

			// Update args if provided.
			if (arguments.length > 0) {
				args = [].slice.call(arguments);
			}

			if (functions[i].length > superFnLength) {
				// Assume funcs that accept more args than the original are
				// async and accept a callback as an additional argument.
				functions[i++].apply(this, args.concat(runBefore.bind(this)));
			} else {
				// run synchronously
				var newArgs = functions[i++].apply(this, args);
				newArgs = newArgs && newArgs.length ? newArgs : args;
				runBefore.apply(this, newArgs);
			}
		}
	};
}

function _reinitEngine() {
	// recreate the script and dialog objects so that they'll be
	// referencing the code with injections instead of the original
	bitsy.scriptModule = new bitsy.Script();
	bitsy.scriptInterpreter = bitsy.scriptModule.CreateInterpreter();

	bitsy.dialogModule = new bitsy.Dialog();
	bitsy.dialogRenderer = bitsy.dialogModule.CreateRenderer();
	bitsy.dialogBuffer = bitsy.dialogModule.CreateBuffer();
}



// override imageDataFromImageSource to use transparency for background pixels
// and save the results to a custom image cache
inject$1(/(function imageDataFromImageSource\(imageSource, pal, col\) {)([^]*?)return img;/, [
'$1',
'	var cache;',
'	return function(){',
'		if (cache) {',
'			return cache;',
'		}',
'		$2',
'		// make background pixels transparent',
'		var bg = getPal(pal)[0];',
'		var i;',
'		// set background pixels to transparent',
'		for (i = 0; i < img.data.length; i += 4) {',
'			if (',
'				img.data[i + 0] === bg[0] &&',
'				img.data[i + 1] === bg[1] &&',
'				img.data[i + 2] === bg[2]',
'			) {',
'				img.data[i + 3] = 0;',
'			}',
'		}',
'	',
'		// give ourselves a little canvas + context to work with',
'		var spriteCanvas = document.createElement("canvas");',
'		spriteCanvas.width = tilesize * (scale);',
'		spriteCanvas.height = tilesize * (scale);',
'		var spriteContext = spriteCanvas.getContext("2d");',
'	',
'		// put bitsy data to our canvas',
'		spriteContext.clearRect(0, 0, tilesize, tilesize);',
'		spriteContext.putImageData(img, 0, 0);',
'	',
'		// save it in our cache',
'		cache = spriteCanvas;',
'	',
'		// return our image	',
'		return cache;',
'	};',
].join('\n'));

// override drawTile to draw from our custom image cache
// instead of putting image data directly
inject$1(/(function drawTile\(img,x,y,context\) {)/, [
'$1',
'	if (!context) { //optional pass in context; otherwise, use default',
'		context = ctx;',
'	}',
'',
'	context.drawImage(',
'		img(),',
'		x * tilesize * scale,',
'		y * tilesize * scale',
'	);',
'	return;',
].join('\n'));

}(window));



</script>

<script type="text/javascript" id="borksyAdditionalJS">
function bitsySet(varNames,values){
    if (typeof(varNames) === "string"){
        window.bitsyVariableMap.set(varNames,values);
    } else if (Array.isArray(varNames)) {
        for (var i = varNames.length - 1; i >= 0; i--) {
            var varName = varNames[i];
            if (Array.isArray(values)){
                if ( values[i] !== undefined ){
                    window.bitsyVariableMap.set(varName,values[i]);
                }
            } else {
                 window.bitsyVariableMap.set(varName,values);
            }
        }
    }
    return values;
}

function bitsyGet(varName){
    return window.bitsyVariableMap.get(varName);
}

var towerGame = {};
towerGame.currentFloor = 0;
towerGame.floors = {
    0:{
        _entrance: "entrance,0,14",
        _author: "Ayolland",
        _title: "The Tower Gate"
    },
    1:{
        _entrance: "catacomb1,1,14",
        _author: "caeth",
        _title: "The Catacombs"
    },
    2:{
        _entrance: "batgut,3,1",
        _author: "mono",
        _title: "The Waterfall"
    },
    3:{
        _entrance: "enui wet floor,7,11",
        _author: "enui",
        _title: "Caution: Wet Floor"
    },
    4:{
        _entrance: "a02-1,2,8",
        _author: "Emma Daues",
        _title: "The Pit of _____"
    },
    5:{
        _entrance: "garden-dark,3,11",
        _author: "Emma",
        _title: "The Candlelit Garden"
    },
    6:{
        _entrance: "dream demons 1,15,14",
        _author: "thatguynm",
        _title: "Dream Demon Hangout"
    },
    7:{
        _entrance: "rose ruins,5,14",
        _author: "Rose",
        _title: "Crumbling Tower"
    },
    8:{
        _entrance: "slime-1,14,6",
        _author: "Em Lindqvist",
        _title: "Slimy....."
    },
    9:{
        _entrance: "spookhop,0,6",
        _author: "Nathan Wayward",
        _title: "Leaps of Faith"
    },
    10:{
        _entrance: "Onion Floor 1,1,9",
        _author: "onion",
        _title: "oh no! this is under construction!!"
    },
    11:{
        _entrance: "SquiddingtonStudy0,2,14",
        _author: "tyedye105",
        _title: "Sir Squiddington's Library"
    },
    12:{
        _entrance: "ripple_room1_the_barren_belltower,1,14",
        _author: "Ripple",
        _title: "The Barren Belltower"
    },
    13:{
        _entrance: "entrance room,1,14",
        _author: "Sean",
        _title: "Mechanism"
    },
    14:{
        _entrance: "party center,7,14",
        _author: "Ayolland + Frens",
        _title: "The Party"
    }
}

towerGame.savedVariables = {
    'ripple_riddle':0,
    'em_win':0,
    'onion_talk':0,
    'pear_talk':0
}

function newGame(){
    towerGame.currentFloor = 0;
    Object.keys(towerGame.savedVariables).map(function(varName,index){
        towerGame.savedVariables[varName] = 0;
        bitsySet(varName,towerGame.savedVariables[varName]);
    });
}

function setupFloor(number){
    Object.keys(towerGame.savedVariables).map(function(varName,index){
        var savedValue = towerGame.savedVariables[varName];
        var bitsyValue = bitsyGet(varName);
        var isUnlocked = savedValue !== 0 || bitsyValue !== 0;
        var valueToSave = savedValue !== 0 ? savedValue : 0;
        valueToSave = bitsyValue !== 0 ? bitsyValue : valueToSave;
        towerGame.savedVariables[varName] = isUnlocked ? valueToSave : 0;
        bitsySet(varName,towerGame.savedVariables[varName]);
    });
    var floorObj = towerGame.floors[number] || {};
    bitsySet('floor_entrance',floorObj._entrance);
    bitsySet('floor_author',floorObj._author);
    bitsySet('floor_title',floorObj._title);
}

function nextFloor(){
    towerGame.currentFloor++;
    setupFloor(towerGame.currentFloor);
}

function savedFloor(){
    setupFloor(towerGame.currentFloor);
}
</script>

</head>

<!-- DOCUMENT BODY -->
<body onload='startExportedGame()'>
<audio id="thunder" src="music/thunder.mp3" loop></audio>
<audio id="magnetic" src="music/magnetic.mp3" loop></audio>
<audio id="abandoned_mothership" src="music/Abandoned_Mothership.mp3" loop></audio>
<audio id="dr_ice" src="music/Dr_Ice.mp3" loop></audio>
<audio id="martian_martial_arts" src="music/Martian_Martial_Arts.mp3" loop></audio>
<audio id="final_boss_continue" src="music/Final_Boss_Continue.mp3" loop></audio>
<!-- GAME CANVAS -->
<canvas id='game'></canvas>
</body>

</html>